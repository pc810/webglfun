(this.webpackJsonpwebglfun=this.webpackJsonpwebglfun||[]).push([[1],{102:function(e,t,r){var n=r(103);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},103:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},104:function(e,t){var r,n,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"===typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},105:function(e,t,r){e.exports=r(167)},106:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o="undefined"!==typeof window&&window.document&&window.document.createElement?n.useLayoutEffect:n.useEffect},107:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"b",(function(){return T})),r.d(t,"c",(function(){return D})),r.d(t,"d",(function(){return w})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return A})),r.d(t,"h",(function(){return M}));var n=r(47),o=r(73),a=r(38),i=r(39),s=r(40),c=r(37),u=r(41),l=r(59),h=r(61),d=r(78),f=r(108),p=r(3),v=r(36),m=r(0),g=r(106),y=Symbol.for("Animated:node"),b=function(e){return e&&e[y]},M=function(e,t){return Object(l.a)(e,y,t)},A=function(e){return e&&e[y]&&e[y].getPayload()},I=function(){function e(){Object(c.a)(this,e),this.payload=void 0,M(this,this)}return Object(u.a)(e,[{key:"getPayload",value:function(){return this.payload||[]}}]),e}(),w=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this))._value=e,n.done=!0,n.elapsedTime=void 0,n.lastPosition=void 0,n.lastVelocity=void 0,n.v0=void 0,l.d.num(n._value)&&(n.lastPosition=n._value),n}return Object(u.a)(r,[{key:"getPayload",value:function(){return[this]}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e,t){return l.d.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}},{key:"reset",value:function(){var e=this.done;this.done=!1,l.d.num(this._value)&&(this.elapsedTime=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}],[{key:"create",value:function(e,t){return new r(e)}}]),r}(I),D=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e,n){var o;return Object(c.a)(this,r),(o=t.call(this,0))._value=void 0,o._string=null,o._toString=void 0,o._toString=Object(h.a)({output:[e,n]}),o}return Object(u.a)(r,[{key:"getValue",value:function(){var e=this._string;return null==e?this._string=this._toString(this._value):e}},{key:"setValue",value:function(e){if(l.d.num(e)){if(!Object(o.a)(Object(a.a)(r.prototype),"setValue",this).call(this,e))return!1;this._string=null}else this._string=e,this._value=1;return!0}},{key:"reset",value:function(e){e&&(this._toString=Object(h.a)({output:[this.getValue(),e]})),this._value=0,Object(o.a)(Object(a.a)(r.prototype),"reset",this).call(this)}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(l.d.str(e)&&l.d.str(t))return new r(e,t);throw TypeError('Expected "from" and "to" to be strings')}}]),r}(w),x={current:null},T=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(c.a)(this,r),(e=t.call(this)).source=void 0,e.setValue(n),e}return Object(u.a)(r,[{key:"getValue",value:function(e){if(!this.source)return null;var t={};return Object(l.b)(this.source,(function(r,n){if((a=r)&&a[y]===a)t[n]=r.getValue(e);else{var o=Object(d.b)(r);o?t[n]=o.get():e||(t[n]=r)}var a})),t}},{key:"setValue",value:function(e){this.source=e,this.payload=this._makePayload(e)}},{key:"reset",value:function(){this.payload&&Object(l.b)(this.payload,(function(e){return e.reset()}))}},{key:"_makePayload",value:function(e){if(e){var t=new Set;return Object(l.b)(e,this._addToPayload,t),Array.from(t)}}},{key:"_addToPayload",value:function(e){var t=this;Object(d.b)(e)&&x.current&&x.current.dependencies.add(e);var r=A(e);r&&Object(l.b)(r,(function(e){return t.add(e)}))}}]),r}(I),S=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e,i){var s,u;return Object(c.a)(this,r),(u=t.call(this,null)).source=void 0,Object(o.a)((s=Object(n.a)(u),Object(a.a)(r.prototype)),"setValue",s).call(s,u._makeAnimated(e,i)),u}return Object(u.a)(r,[{key:"getValue",value:function(){return this.source.map((function(e){return e.getValue()}))}},{key:"setValue",value:function(e){var t=this.getPayload();e&&e.length==t.length?Object(l.b)(t,(function(t,r){return t.setValue(e[r])})):(this.source=this._makeAnimated(e),this.payload=this._makePayload(this.source))}},{key:"_makeAnimated",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return e?e.map((function(e,r){return(Object(l.e)(e)?D:w).create(e,t[r])})):[]}}],[{key:"create",value:function(e,t){return new r(e,t)}}]),r}(T),R=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,null)).update=e,n.dirty=!1,n}return Object(u.a)(r,[{key:"setValue",value:function(e,t){if(e){if(t&&(x.current=t,e.style)){var n=t.host.createAnimatedStyle;e=Object(p.a)(Object(p.a)({},e),{},{style:n(e.style)})}Object(o.a)(Object(a.a)(r.prototype),"setValue",this).call(this,e),x.current=null}}},{key:"onParentChange",value:function(e){var t=this,r=e.type;this.dirty||"change"!==r||(this.dirty=!0,v.frameLoop.onFrame((function(){t.dirty=!1,t.update()})))}}]),r}(T),G=function(e,t){return Object(m.forwardRef)((function(r,n){var o=Object(m.useRef)(null),a=!l.d.fun(e)||e.prototype&&e.prototype.isReactComponent,i=Object(f.a)(),s=new R((function(){var e=o.current;a&&!e||!1===(!!e&&t.applyAnimatedValues(e,s.getValue(!0)))&&i()})),c=new Set;return s.setValue(r,{dependencies:c,host:t}),Object(g.a)((function(){return Object(l.b)(c,(function(e){return e.addChild(s)})),function(){return Object(l.b)(c,(function(e){return e.removeChild(s)}))}})),Object(m.createElement)(e,Object(p.a)({},t.getComponentProps(s.getValue()),{ref:a&&function(e){o.current=function(e,t){e&&(l.d.fun(e)?e(t):e.current=t);return t}(n,e)}}))}))};var E=Symbol.for("AnimatedComponent"),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.applyAnimatedValues,n=void 0===r?function(){return!1}:r,o=t.createAnimatedStyle,a=void 0===o?function(e){return new T(e)}:o,i=t.getComponentProps,s=void 0===i?function(e){return e}:i,c={applyAnimatedValues:n,createAnimatedStyle:a,getComponentProps:s},u=function(e){var t=P(e)||"Anonymous";return(e=l.d.str(e)?G(e,c):e[E]||(e[E]=G(e,c))).displayName="Animated("+t+")",e};return Object(l.b)(e,(function(e,t){l.d.str(t)||(t=P(e)),u[t]=u(e)})),{animated:u}},P=function(e){return l.d.str(e)?e:e&&l.d.str(e.displayName)?e.displayName:l.d.fun(e)&&e.name||null}},108:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return i}));var n=r(0),o=function(e){return Object(n.useEffect)(e,[])},a=function(){var e=Object(n.useState)(0)[1],t=Object(n.useRef)(!1);return o((function(){return function(){t.current=!0}})),function(){t.current||e({})}};function i(e){var t=Object(n.useRef)(void 0);return Object(n.useEffect)((function(){t.current=e})),t.current}},145:function(e,t,r){"use strict";r.d(t,"a",(function(){return G}));var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var o=r(78),a=r(61),i="[-+]?\\d*\\.?\\d+",s=i+"%";function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var u=new RegExp("rgb"+c(i,i,i)),l=new RegExp("rgba"+c(i,i,i,i)),h=new RegExp("hsl"+c(i,s,s)),d=new RegExp("hsla"+c(i,s,s,i)),f=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,p=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,v=/^#([0-9a-fA-F]{6})$/,m=/^#([0-9a-fA-F]{8})$/,g=r(36);function y(e,t,r){var n=(1-Math.abs(2*r-1))*t,o=r-n/2,a=function(e,t,r){return e<60?[t,r,0]:e<120?[r,t,0]:e<180?[0,t,r]:e<240?[0,r,t]:e<300?[r,0,t]:[t,0,r]}(e,n,n*(1-Math.abs(e/60%2-1))),i=a[0],s=a[1],c=a[2];return Math.round(255*(i+o))<<24|Math.round(255*(s+o))<<16|Math.round(255*(c+o))<<8}function b(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function M(e){return(parseFloat(e)%360+360)%360/360}function A(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function I(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function w(e){var t=function(e){var t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=v.exec(e))?parseInt(t[1]+"ff",16)>>>0:g.colorNames&&void 0!==g.colorNames[e]?g.colorNames[e]:(t=u.exec(e))?(b(t[1])<<24|b(t[2])<<16|b(t[3])<<8|255)>>>0:(t=l.exec(e))?(b(t[1])<<24|b(t[2])<<16|b(t[3])<<8|A(t[4]))>>>0:(t=f.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=m.exec(e))?parseInt(t[1],16)>>>0:(t=p.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=h.exec(e))?(255|y(M(t[1]),I(t[2]),I(t[3])))>>>0:(t=d.exec(e))?(y(M(t[1]),I(t[2]),I(t[3]))|A(t[4]))>>>0:null}(e);return null===t?e:"rgba("+((4278190080&(t=t||0))>>>24)+", "+((16711680&t)>>>16)+", "+((65280&t)>>>8)+", "+(255&t)/255+")"}var D,x=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,T=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,S=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,R=function(e,t,r,n,o){return"rgba("+Math.round(t)+", "+Math.round(r)+", "+Math.round(n)+", "+o+")"},G=function(e){D||(D=g.colorNames?new RegExp("("+Object.keys(g.colorNames).join("|")+")","g"):/^\b$/);var t=e.output.map((function(e){return Object(o.c)(e).replace(T,w).replace(D,w)})),r=t.map((function(e){return e.match(x).map(Number)})),i=r[0].map((function(e,t){return r.map((function(e){if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]}))})).map((function(t){return Object(a.a)(n(n({},e),{output:t}))}));return function(e){var r=0;return t[0].replace(x,(function(){return String(i[r++](e))})).replace(S,R)}}},158:function(e,t,r){(function(t){var r=9007199254740991,n="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",i="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")();function l(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function h(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var d=Object.prototype,f=d.hasOwnProperty,p=d.toString,v=u.Symbol,m=d.propertyIsEnumerable,g=v?v.isConcatSpreadable:void 0,y=Math.max;function b(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=M),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?b(s,t-1,r,n,o):h(o,s):n||(o[o.length]=s)}return o}function M(e){return I(e)||function(e){return function(e){return w(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?p.call(e):"";return t==o||t==a}(e)}(e)}(e)&&f.call(e,"callee")&&(!m.call(e,"callee")||p.call(e)==n)}(e)||!!(g&&e&&e[g])}function A(e){if("string"==typeof e||function(e){return"symbol"==typeof e||w(e)&&p.call(e)==i}(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var I=Array.isArray;function w(e){return!!e&&"object"==typeof e}var D,x,T=(D=function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=e[i];r(s,i)&&(a[i]=s)}return a}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(b(t,1),A))},x=y(void 0===x?D.length-1:x,0),function(){for(var e=arguments,t=-1,r=y(e.length-x,0),n=Array(r);++t<r;)n[t]=e[x+t];t=-1;for(var o=Array(x+1);++t<x;)o[t]=e[t];return o[x]=n,l(D,this,o)});e.exports=T}).call(this,r(17))},159:function(e,t,r){(function(t){var r="__lodash_hash_undefined__",n=9007199254740991,o="[object Symbol]",a=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")();function l(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function h(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!==t)return function(e,t,r,n){var o=e.length,a=r+(n?1:-1);for(;n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}(e,v,r);var n=r-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function d(e,t,r){for(var n=-1,o=e?e.length:0;++n<o;)if(r(t,e[n]))return!0;return!1}function f(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function p(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function v(e){return e!==e}function m(e,t){return e.has(t)}function g(e,t){return function(r){return e(t(r))}}var y=Array.prototype,b=Function.prototype,M=Object.prototype,A=u["__core-js_shared__"],I=function(){var e=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),w=b.toString,D=M.hasOwnProperty,x=M.toString,T=RegExp("^"+w.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=u.Symbol,R=g(Object.getPrototypeOf,Object),G=M.propertyIsEnumerable,E=y.splice,O=S?S.isConcatSpreadable:void 0,P=Object.getOwnPropertySymbols,F=Math.max,_=W(u,"Map"),k=W(Object,"create");function U(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function V(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function N(e){var t=-1,r=e?e.length:0;for(this.__data__=new L;++t<r;)this.add(e[t])}function j(e,t){var r=ee(e)||J(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var a in e)!t&&!D.call(e,a)||o&&("length"==a||K(a,n))||r.push(a);return r}function C(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!==r&&n!==n)return o;return-1}function X(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=Z),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?X(s,t-1,r,n,o):p(o,s):n||(o[o.length]=s)}return o}function H(e){return!(!ne(e)||(t=e,I&&I in t))&&(re(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}(e)?T:a).test(function(e){if(null!=e){try{return w.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e));var t}function B(e){if(!ne(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=function(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||M;return e===r}(e),r=[];for(var n in e)("constructor"!=n||!t&&D.call(e,n))&&r.push(n);return r}function z(e){return function(e,t,r){var n=t(e);return ee(e)?n:p(n,r(e))}(e,ae,q)}function Q(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function W(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return H(r)?r:void 0}U.prototype.clear=function(){this.__data__=k?k(null):{}},U.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},U.prototype.get=function(e){var t=this.__data__;if(k){var n=t[e];return n===r?void 0:n}return D.call(t,e)?t[e]:void 0},U.prototype.has=function(e){var t=this.__data__;return k?void 0!==t[e]:D.call(t,e)},U.prototype.set=function(e,t){return this.__data__[e]=k&&void 0===t?r:t,this},V.prototype.clear=function(){this.__data__=[]},V.prototype.delete=function(e){var t=this.__data__,r=C(t,e);return!(r<0)&&(r==t.length-1?t.pop():E.call(t,r,1),!0)},V.prototype.get=function(e){var t=this.__data__,r=C(t,e);return r<0?void 0:t[r][1]},V.prototype.has=function(e){return C(this.__data__,e)>-1},V.prototype.set=function(e,t){var r=this.__data__,n=C(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},L.prototype.clear=function(){this.__data__={hash:new U,map:new(_||V),string:new U}},L.prototype.delete=function(e){return Q(this,e).delete(e)},L.prototype.get=function(e){return Q(this,e).get(e)},L.prototype.has=function(e){return Q(this,e).has(e)},L.prototype.set=function(e,t){return Q(this,e).set(e,t),this},N.prototype.add=N.prototype.push=function(e){return this.__data__.set(e,r),this},N.prototype.has=function(e){return this.__data__.has(e)};var Y=P?g(P,Object):ue,q=P?function(e){for(var t=[];e;)p(t,Y(e)),e=R(e);return t}:ue;function Z(e){return ee(e)||J(e)||!!(O&&e&&e[O])}function K(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}function $(e){if("string"==typeof e||function(e){return"symbol"==typeof e||oe(e)&&x.call(e)==o}(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function J(e){return function(e){return oe(e)&&te(e)}(e)&&D.call(e,"callee")&&(!G.call(e,"callee")||"[object Arguments]"==x.call(e))}var ee=Array.isArray;function te(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!re(e)}function re(e){var t=ne(e)?x.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function ne(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function oe(e){return!!e&&"object"==typeof e}function ae(e){return te(e)?j(e,!0):B(e)}var ie,se,ce=(ie=function(e,t){return null==e?{}:(t=f(X(t,1),$),function(e,t){return function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=e[i];r(s,i)&&(a[i]=s)}return a}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t,r,n){var o,a=-1,i=h,s=!0,c=e.length,u=[],l=t.length;if(!c)return u;r&&(t=f(t,(o=r,function(e){return o(e)}))),n?(i=d,s=!1):t.length>=200&&(i=m,s=!1,t=new N(t));e:for(;++a<c;){var p=e[a],v=r?r(p):p;if(p=n||0!==p?p:0,s&&v===v){for(var g=l;g--;)if(t[g]===v)continue e;u.push(p)}else i(t,v,n)||u.push(p)}return u}(z(e),t)))},se=F(void 0===se?ie.length-1:se,0),function(){for(var e=arguments,t=-1,r=F(e.length-se,0),n=Array(r);++t<r;)n[t]=e[se+t];t=-1;for(var o=Array(se+1);++t<se;)o[t]=e[t];return o[se]=n,l(ie,this,o)});function ue(){return[]}e.exports=ce}).call(this,r(17))},160:function(e,t,r){var n=function e(){function t(e){return o.appendChild(e.dom),e}function r(e){for(var t=0;t<o.children.length;t++)o.children[t].style.display=t===e?"block":"none";n=e}var n=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",(function(e){e.preventDefault(),r(++n%o.children.length)}),!1);var a=(performance||Date).now(),i=a,s=0,c=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:t,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-a,200),e>i+1e3&&(c.update(1e3*s/(e-i),100),i=e,s=0,l)){var t=performance.memory;l.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:o,setMode:r}};n.Panel=function(e,t,r){var n=1/0,o=0,a=Math.round,i=a(window.devicePixelRatio||1),s=80*i,c=48*i,u=3*i,l=2*i,h=3*i,d=15*i,f=74*i,p=30*i,v=document.createElement("canvas");v.width=s,v.height=c,v.style.cssText="width:80px;height:48px";var m=v.getContext("2d");return m.font="bold "+9*i+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=r,m.fillRect(0,0,s,c),m.fillStyle=t,m.fillText(e,u,l),m.fillRect(h,d,f,p),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(h,d,f,p),{dom:v,update:function(c,g){n=Math.min(n,c),o=Math.max(o,c),m.fillStyle=r,m.globalAlpha=1,m.fillRect(0,0,s,d),m.fillStyle=t,m.fillText(a(c)+" "+e+" ("+a(n)+"-"+a(o)+")",u,l),m.drawImage(v,h+i,d,f-i,p,h,d,f-i,p),m.fillRect(h+f-i,d,i,p),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(h+f-i,d,i,a((1-c/g)*p))}}},e.exports=n},161:function(e,t,r){var n=r(162);!function(e){"use strict";var t=["992 - Silicon Motion SM502","991 - ATI Mobility 128 M3","990 - VIA S3 Graphics ProSavage8","989 - SIS Mirage M661FX ","988 - SIS Mirage 2 M760","987 - VIA Castle Rock","986 - VIA S3G UniChrome Pro","985 - VIA S3G UniChrome Pro II","984 - ATI Radeon IGP 320M","983 - ATI Radeon IGP 340M","982 - ATI Mobility Radeon 7000 IGP","981 - Intel Extreme Graphics 2","980 - VIA Chrome9 HC","979 - ATI Mobility Radeon M6","978 - ATI Mobility Radeon M7","977 - ATI Mobility Radeon 9000 IGP","976 - ATI Mobility Radeon 9100 IGP","975 - NVIDIA GeForce 2 Go (200 / 100)","974 - NVIDIA GeForce 3 Go","965 - Intel Graphics Media Accelerator (GMA) 500","963 - Intel Graphics Media Accelerator (GMA) 600","952 - SIS Mirage 3 671MX","951 - SIS Mirage 3+ 672MX","950 - ATI Radeon Xpress 1100","949 - ATI Radeon Xpress 200M","948 - Intel Graphics Media Accelerator (GMA) 900","947 - ATI Mobility FireGL 7800","946 - ATI Mobility Radeon 7500","934 - Intel Graphics Media Accelerator (GMA) 950","933 - Intel Graphics Media Accelerator (GMA) 3150","931 - NVIDIA GeForce 4 420 Go","930 - NVIDIA GeForce 4 440 Go","929 - NVIDIA GeForce 4 460 Go","928 - NVIDIA GeForce 4 488 Go","927 - ATI Mobility Radeon 9000","926 - NVIDIA GeForce FX Go 5200","925 - ATI Mobility FireGL 9000","924 - ATI Mobility Radeon 9200","923 - Intel Graphics Media Accelerator (GMA) 3600","921 - NVIDIA GeForce 7000M","920 - NVIDIA GeForce Go 6100","919 - NVIDIA GeForce Go 6150","918 - ATI Radeon Xpress 1150","917 - NVIDIA GeForce 7150M","916 - NVIDIA GeForce 7190M","915 - Intel Graphics Media Accelerator (GMA) 3650","904 - Intel Graphics Media Accelerator (GMA) X3100","903 - ATI Radeon Xpress X1200","902 - ATI Radeon Xpress 1250","901 - ATI Radeon Xpress X1250","900 - ATI Radeon Xpress X1270","899 - NVIDIA GeForce FX Go 5600 / 5650","898 - NVIDIA Quadro FX Go 1000","897 - NVIDIA GeForce FX Go 5700","896 - NVIDIA GeForce Go 6200","895 - NVIDIA GeForce Go 6250","894 - ATI Mobility Radeon X300","893 - NVIDIA GeForce Go 6400","892 - NVIDIA GeForce Go 7200","891 - ATI Mobility Radeon 9550","890 - ATI Mobility FireGL T2","889 - ATI Mobility Radeon 9600","888 - NVIDIA GeForce4 4200 Go","887 - ATI Mobility Radeon X1300","886 - ATI Mobility FireGL T2e","885 - ATI Mobility Radeon 9700","884 - ATI Mobility Radeon HD 2300","883 - ATI Mobility Radeon X2300","882 - ATI Mobility FireGL V3100","881 - ATI Mobility FireGL V3200","880 - ATI Mobility Radeon X600","879 - NVIDIA Quadro NVS 110M","874 - NVIDIA GeForce Go 7300","873 - NVIDIA Quadro NVS 120M","872 - NVIDIA Quadro FX 350M","871 - NVIDIA GeForce Go 7400","869 - Intel Graphics Media Accelerator (GMA) 4500M","868 - Intel Graphics Media Accelerator (GMA) 4500MHD","867 - Intel Graphics Media Accelerator (GMA) 4700MHD","866 - NVIDIA GeForce 8200M G","865 - NVIDIA Quadro NVS 130M","862 - NVIDIA GeForce 8400M G","861 - ATI Radeon HD 3100","860 - ATI Mobility Radeon HD 3400","851 - ATI Radeon HD 4100","850 - ATI Radeon HD 4225","849 - ATI Radeon HD 3200","848 - ATI Mobility Radeon HD 2400","847 - NVIDIA Quadro NVS 135M","846 - NVIDIA GeForce 8400M GS","845 - NVIDIA GeForce 9100M G","844 - ATI Mobility Radeon X1400","843 - ATI Mobility Radeon X1350","842 - NVIDIA Quadro FX 360M","841 - NVIDIA Quadro NVS 150M","840 - AMD Radeon HD 6250","839 - Intel Graphics Media Accelerator (GMA) HD Graphics","838 - ATI Radeon HD 4200","837 - ATI Radeon HD 4250","836 - ATI Radeon HD 4270","835 - ATI Mobility Radeon HD 2400 XT","834 - ATI Mobility Radeon HD 3410","833 - ATI Mobility Radeon HD 3430","832 - ATI Mobility Radeon HD 3450","831 - AMD Radeon HD 6290","830 - AMD Radeon HD 7290","829 - NVIDIA GeForce 9200M GS","828 - NVIDIA Quadro NVS 160M","827 - NVIDIA Quadro FX 370M","826 - NVIDIA GeForce 9300M GS","825 - NVIDIA ION 2","824 - NVIDIA GeForce 9300M G","823 - ATI Mobility Radeon HD 3470","822 - NVIDIA GeForce 9400M GeForceBoost","821 - ATI Mobility Radeon HD 3470 Hybrid X2","820 - AMD Radeon HD 8180","819 - AMD Radeon HD 6310","818 - AMD Radeon HD 7310","817 - AMD Radeon HD 6320","816 - AMD Radeon HD 7340","812 - Intel HD Graphics (Bay Trail)","803 - Intel HD Graphics (Sandy Bridge)","802 - NVIDIA GeForce 9400M (G) / ION (LE)","801 - NVIDIA GeForce G 205M","800 - NVIDIA GeForce G 102M","799 - NVIDIA GeForce 9500M GE","798 - NVIDIA GeForce G 103M","797 - NVIDIA GeForce G 105M","795 - Intel HD Graphics 2000","794 - NVIDIA Quadro NVS 140M","793 - NVIDIA GeForce 8400M GT","792 - ATI Mobility Radeon HD 4330","791 - AMD Radeon HD 6330M","790 - NVIDIA GeForce G 110M","789 - ATI Mobility FireGL V5000","788 - ATI Mobility Radeon X700","787 - ATI Mobility Radeon X1450","786 - NVIDIA GeForce Go 6600","785 - ATI Mobility Radeon 9800","784 - ATI Mobility FireGL V5200","783 - ATI Mobility Radeon X1600","782 - ATI Mobility Radeon X800","781 - NVIDIA Quadro NVS 300M","780 - NVIDIA GeForce Go 7600","779 - ATI Mobility Radeon X2500","778 - ATI Mobility FireGL V5250","777 - ATI Mobility Radeon X1700","776 - NVIDIA GeForce 305M","775 - ATI Mobility Radeon HD 530v","774 - ATI Radeon HD 4350","773 - ATI Mobility Radeon HD 4350","772 - ATI Mobility Radeon HD 4530","771 - AMD Radeon HD 6350M","770 - AMD Radeon HD 7350M","769 - Intel HD Graphics (Ivy Bridge)","768 - Intel HD Graphics 2500","767 - ATI Mobility Radeon HD 4550","766 - ATI Mobility Radeon HD 540v","765 - AMD Radeon HD 8210","764 - ATI Mobility Radeon HD 5430","763 - AMD Radeon HD 6380G","762 - AMD Radeon HD 6430M","761 - ATI Mobility Radeon X800XT","760 - NVIDIA Quadro FX Go 1400","759 - NVIDIA GeForce Go 6800","758 - NVIDIA GeForce Go 7700","757 - NVIDIA NVS 2100M","756 - NVIDIA GeForce 8600M GS","755 - NVIDIA GeForce 9500M G","754 - NVIDIA GeForce Go 7600 GT","753 - NVIDIA GeForce 315M","752 - NVIDIA GeForce 405M","751 - NVIDIA NVS 3100M","750 - NVIDIA GeForce G210M","749 - NVIDIA GeForce 310M","748 - NVIDIA Quadro FX 380M","747 - Intel HD Graphics 3000","746 - ATI Mobility Radeon HD 2600","745 - NVIDIA GeForce 8600M GT","744 - ATI Mobility Radeon HD 5450","743 - NVIDIA Quadro FX 570M","742 - ATI Mobility Radeon HD 4570","741 - Intel HD Graphics (Cherry Trail)","740 - AMD Radeon HD 8250","739 - AMD Radeon R6 (Mullins)","738 - AMD Radeon HD 8240","737 - ATI Mobility Radeon HD 545v","736 - ATI Mobility Radeon HD 5145","735 - ATI Mobility FireGL V5700","734 - ATI Mobility Radeon HD 3650","733 - AMD Radeon HD 7430M","732 - AMD Radeon HD 6450M","731 - ATI Mobility Radeon HD 5470","730 - AMD Radeon HD 8280","729 - AMD Radeon HD 6370M","727 - AMD Radeon R2 (Mullins/Beema/Carrizo-L)","723 - AMD Radeon HD 7370M","722 - NVIDIA GeForce 410M","721 - NVIDIA GeForce GT 415M","720 - ATI Mobility Radeon HD 2700","719 - AMD Radeon HD 6480G","718 - AMD Radeon HD 7400G","717 - NVIDIA GeForce 9500M GS","716 - NVIDIA GeForce 9600M GS","715 - NVIDIA GeForce Go 7800","714 - NVIDIA GeForce Go 6800 Ultra","713 - ATI Mobility Radeon X1800","712 - ATI Mobility Radeon X1800XT","711 - ATI Mobility Radeon X1900","710 - ATI Mobility Radeon HD 2600 XT","709 - NVIDIA GeForce GT 320M","708 - NVIDIA GeForce 320M","707 - AMD Radeon HD 8310G","706 - AMD Radeon HD 6520G","705 - Intel HD Graphics (Haswell)","701 - ATI Mobility FireGL V5725","700 - ATI Mobility Radeon HD 3670","699 - AMD Radeon HD 7420G","698 - NVIDIA GeForce GT 520M","697 - AMD FirePro M3900","696 - AMD Radeon HD 6470M","695 - Intel HD Graphics 400 (Braswell)","694 - Intel HD Graphics (Braswell)","693 - Intel HD Graphics 405 (Braswell)","690 - NVIDIA GeForce 705M","689 - NVIDIA GeForce 610M","688 - AMD Radeon HD 7450M","687 - AMD Radeon HD 6510G2","686 - NVIDIA GeForce GT 120M","685 - NVIDIA Quadro FX 770M","684 - NVIDIA GeForce GT 220M","683 - NVIDIA GeForce 9600M GT","682 - NVIDIA Quadro FX 1500M","681 - NVIDIA Quadro NVS 320M","680 - NVIDIA GeForce Go 7900 GS","679 - NVIDIA GeForce Go 7800 GTX","678 - NVIDIA Quadro FX 1600M","677 - NVIDIA Quadro FX 1700M","676 - NVIDIA GeForce 8700M GT","675 - NVIDIA GeForce 9650M GT","674 - NVIDIA GeForce 9650M GS","673 - Intel HD Graphics 500","672 - Intel UHD Graphics 600","671 - AMD Radeon HD 8330","670 - AMD Radeon HD 8350G","669 - NVIDIA Quadro FX 2500M","668 - NVIDIA GeForce Go 7900 GTX","667 - NVIDIA NVS 4200M","666 - NVIDIA GeForce GT 130M","665 - NVIDIA GeForce Go 7900 GS SLI","664 - NVIDIA GeForce 8600M GT SLI","663 - NVIDIA GeForce Go 7800 GTX SLI","662 - NVIDIA GeForce GT 325M","661 - AMD Radeon HD 7520G","660 - NVIDIA GeForce GT 520MX","654 - AMD Radeon HD 8400","653 - AMD Radeon HD 8410G","652 - AMD Radeon HD 6490M","651 - AMD Radeon HD 7470M","650 - AMD Radeon HD 8450G","649 - AMD Radeon HD 6515G2","648 - AMD Radeon HD 6480G + HD 7450M Dual Graphics","647 - AMD Radeon HD 7500G","646 - AMD Radeon HD 6540G2","645 - AMD Radeon HD 6520G + HD 7450M Dual Graphics","644 - AMD Radeon HD 6545G2","643 - AMD Radeon HD 6450 GDDR5","642 - Intel HD Graphics (Skylake)","641 - Intel HD Graphics 4200","640 - Intel HD Graphics (Broadwell)","639 - AMD Radeon R2 (Stoney Ridge)","638 - AMD Radeon R3 (Mullins/Beema)","637 - AMD Radeon R4 (Kaveri)","636 - AMD Radeon R4 (Beema)","635 - AMD Radeon R5 (Beema/Carrizo-L)","633 - AMD Radeon R4 (Stoney Ridge)","632 - AMD Radeon HD 6620G","629 - Intel HD Graphics 4000","628 - AMD Radeon HD 7480D","627 - ATI Mobility Radeon HD 550v","626 - NVIDIA GeForce GT 230M","625 - NVIDIA GeForce 9700M GT","624 - NVIDIA GeForce 8700M GT SLI","623 - NVIDIA Quadro FX 3500M","622 - NVIDIA GeForce Go 7950 GTX","621 - AMD Radeon HD 7510M","620 - Intel HD Graphics 5300","619 - Intel HD Graphics 505","618 - Intel UHD Graphics 605","617 - AMD Radeon HD 7490M","616 - NVIDIA GeForce GT 240M","615 - NVIDIA Quadro NVS 5100M","614 - NVIDIA Quadro FX 880M","613 - NVIDIA GeForce GT 330M","612 - ATI Mobility Radeon HD 3850","611 - AMD Radeon HD 7530M","610 - NVIDIA GeForce GT 420M","609 - NVIDIA GeForce Go 7900 GTX SLI","608 - NVIDIA GeForce GT 220","607 - NVIDIA GeForce Go 7950 GTX SLI","606 - ATI Mobility Radeon HD 4650","605 - ATI Mobility Radeon HD 560v","604 - ATI Mobility Radeon HD 5165","603 - AMD Radeon HD 6640G2","602 - AMD Radeon HD 6620G + HD 7450M Dual Graphics","601 - ATI Mobility Radeon HD 3870","600 - AMD Radeon HD 7600G","599 - AMD Radeon HD 7500G + HD 7550M Dual Graphics","598 - NVIDIA GeForce GT 335M","597 - NVIDIA Quadro FX 2700M","596 - AMD Radeon HD 6645G2","595 - NVIDIA GeForce 9700M GTS","594 - NVIDIA GeForce GT 425M","593 - ATI Mobility Radeon HD 4670","592 - AMD Radeon HD 7550M","591 - ATI Mobility Radeon HD 565v","590 - NVIDIA NVS 5200M","589 - Intel HD Graphics 510","588 - AMD Radeon HD 8610G","587 - Intel HD Graphics 4400","586 - Intel HD Graphics 610","585 - Intel UHD Graphics 610","584 - Intel HD Graphics 515","576 - AMD Radeon HD 7640G","575 - AMD Radeon HD 8470D","574 - AMD Radeon HD 7620G","573 - AMD Radeon HD 7610M","572 - AMD Radeon HD 7640G + HD 7610M Dual Graphics","571 - AMD Radeon HD 6550D","570 - NVIDIA GeForce GT 525M","569 - NVIDIA GeForce GT 620M","568 - NVIDIA GeForce GT 625M","567 - NVIDIA Quadro K500M","566 - AMD Radeon HD 8550G","565 - AMD Radeon HD 6530M","564 - AMD Radeon HD 8510G","563 - ATI Mobility Radeon HD 5650","562 - NVIDIA Quadro FX 1800M","561 - AMD Radeon HD 7630M","560 - AMD Radeon HD 7570M","559 - AMD FirePro M2000","558 - AMD Radeon HD 7650M","557 - AMD Radeon HD 6630M","556 - NVIDIA GeForce GTS 250M","555 - NVIDIA GeForce GTS 350M","554 - AMD Radeon HD 7590M","553 - AMD Radeon HD 6550M","552 - ATI Radeon HD 5570","551 - NVIDIA Quadro K510M","550 - Intel HD Graphics 5000","549 - AMD Radeon HD 6680G2","548 - NVIDIA GeForce GT 435M","547 - AMD Radeon HD 7660G","546 - NVIDIA GeForce 710M","545 - NVIDIA NVS 5400M","544 - ATI FirePro M5800","543 - AMD Radeon R5 (Kaveri)","542 - AMD Radeon R5 (Carrizo)","541 - Intel HD Graphics 615","540 - Intel UHD Graphics 615","539 - Intel UHD Graphics 617","530 - Qualcomm Adreno 630","526 - Intel HD Graphics 5500","525 - ATI Mobility Radeon HD 5730","524 - Intel HD Graphics 4600","523 - AMD Radeon HD 6650M","522 - AMD Radeon HD 6690G2","521 - NVIDIA GeForce GT 540M","520 - Intel Iris Graphics 5100","519 - AMD Radeon HD 8550M","518 - NVIDIA Quadro K610M","517 - Intel HD Graphics 6000","516 - AMD Radeon HD 8570M","515 - AMD Radeon HD 8450G + Radeon HD 8570M Dual Graphics","514 - AMD Radeon HD 6720G2","513 - ATI Mobility Radeon HD 5750","511 - AMD Radeon R5 (Stoney Ridge)","510 - AMD Radeon RX Vega 2","509 - AMD Radeon R5 M420","508 - AMD Radeon R5 M315","507 - AMD Radeon R5 M230","506 - AMD Radeon R5 M320","505 - AMD Radeon R5 M240","504 - NVIDIA GeForce 8800M GTS","503 - NVIDIA GeForce GT 720M","502 - Intel UHD Graphics G4 (Lakefield GT1 48 EU)","501 - Intel Iris Graphics 6100","500 - Intel HD Graphics 520","499 - NVIDIA GeForce 820M","498 - NVIDIA GeForce 910M","497 - NVIDIA Quadro 1000M","496 - AMD Radeon RX Vega 3","495 - AMD Radeon R5 M255","494 - AMD Radeon R5 M430","493 - AMD Radeon R5 M330","492 - AMD Radeon R5 M335","491 - NVIDIA GeForce GTS 150M","490 - AMD Radeon HD 7560D","489 - NVIDIA GeForce GT 630M","488 - AMD Radeon HD 7670M","487 - AMD Radeon HD 7520G + HD 7670M Dual Graphics","486 - AMD Radeon HD 6620G + HD 7670M Dual Graphics","485 - AMD Radeon HD 7640G + HD 7670M Dual Graphics","484 - AMD Radeon HD 8650G","483 - AMD Radeon HD 6570M","482 - ATI Mobility Radeon HD 5770","481 - ATI Mobility Radeon HD 4830","480 - NVIDIA GeForce 9800M GS","479 - AMD Radeon HD 6730M","478 - AMD Radeon HD 6740G2","477 - AMD Radeon HD 6760G2","476 - ATI Mobility Radeon HD 5830","475 - AMD Radeon HD 6830M","474 - NVIDIA GeForce GT 430","473 - NVIDIA GeForce 9800M GTS","472 - NVIDIA GeForce GTS 160M","471 - NVIDIA GeForce GTS 260M","470 - AMD Radeon HD 8590M","469 - NVIDIA GeForce GT 550M","468 - NVIDIA Quadro K1000M","467 - AMD Radeon HD 6750M","466 - AMD Radeon HD 7660D","465 - AMD Radeon R6 M255DX","464 - AMD Radeon HD 8670M","463 - AMD Radeon HD 8550G + HD 8670M Dual Graphics","462 - AMD Radeon HD 7660G + HD 7670M Dual Graphics","461 - AMD Radeon HD 8650G + HD 8570M Dual Graphics","460 - AMD Radeon HD 8650G + HD 8670M Dual Graphics","459 - AMD Radeon HD 8570D","458 - Intel HD Graphics 5600","457 - AMD Radeon HD 7690M","456 - AMD Radeon HD 6755G2","455 - NVIDIA GeForce GT 240 GDDR5","454 - NVIDIA GeForce GTS 360M","453 - NVIDIA GeForce GT 445M","452 - NVIDIA Quadro FX 3600M","451 - NVIDIA GeForce 8800M GTX","450 - NVIDIA GeForce 9800M GT","449 - NVIDIA Quadro 2000M","448 - AMD FirePro W2100","447 - AMD Radeon HD 6850M","446 - ATI Mobility Radeon HD 5850","445 - ATI Radeon HD 5670","444 - NVIDIA GeForce GT 555M","443 - NVIDIA GeForce GT 635M","442 - AMD Radeon HD 6770M","441 - AMD Radeon HD 8730M","440 - AMD Radeon HD 8650M","439 - AMD Radeon R6 (Kaveri)","438 - NVIDIA GeForce GT 640M LE","437 - AMD FirePro M5950","436 - AMD Radeon HD 7690M XT","435 - AMD Radeon HD 8670D","434 - AMD Radeon HD 6775G2","433 - NVIDIA Quadro FX 2800M","432 - NVIDIA GeForce 9800M GTX","431 - NVIDIA GeForce GTX 260M","430 - ATI Mobility Radeon HD 4850","429 - ATI FirePro M7740","428 - ATI Mobility Radeon HD 4860","427 - Qualcomm Adreno 680","426 - Qualcomm Adreno 685","425 - AMD Radeon R6 (Carrizo)","424 - Intel HD Graphics 620","423 - Intel UHD Graphics 620","422 - AMD Radeon R5 (Bristol Ridge)","420 - Intel HD Graphics P530","419 - Intel HD Graphics 530","418 - Intel UHD Graphics G7 (Lakefield GT2 64 EU)","417 - Intel HD Graphics P630","416 - Intel HD Graphics 630","415 - Intel UHD Graphics P630","414 - Intel UHD Graphics 630","413 - Intel UHD Graphics G1 (Ice Lake 32 EU)","412 - AMD Radeon RX Vega 5","411 - AMD Radeon RX Vega 6 (Ryzen 2000/3000)","410 - AMD Radeon R6 M340DX","409 - AMD Radeon 610","408 - AMD Radeon 520","407 - AMD Radeon R7 M340","406 - AMD Radeon R7 M260","405 - NVIDIA Quadro FX 3700M","404 - ATI Mobility Radeon HD 3850 X2","403 - NVIDIA GeForce 8800M GTX SLI","402 - ATI Mobility Radeon HD 3870 X2","401 - NVIDIA GeForce 9800M GTS SLI","400 - AMD Radeon R7 M440","399 - AMD Radeon 620","398 - AMD Radeon R8 M445DX","397 - AMD Radeon HD 8690M","396 - NVIDIA GeForce 9800M GT SLI","395 - NVIDIA GeForce 920M","394 - NVIDIA GeForce GTX 280M","393 - AMD Radeon R7 M360","391 - AMD Radeon HD 7730M","390 - AMD Radeon R7 M460","389 - AMD Radeon R8 M365DX","388 - AMD Radeon R7 (Kaveri)","387 - AMD Radeon R7 (Carrizo)","386 - NVIDIA GeForce GT 640M","385 - AMD Radeon R7 (Bristol Ridge)","384 - ATI Mobility Radeon HD 4870","383 - NVIDIA GeForce GTX 285M","382 - NVIDIA Quadro FX 3800M","381 - AMD Radeon R7 M265","380 - AMD Radeon R7 M270","379 - NVIDIA Quadro 3000M","378 - AMD Radeon HD 8750M","377 - AMD FirePro M4100","376 - AMD Radeon HD 7750M","375 - NVIDIA GeForce GT 645M","374 - NVIDIA GeForce GT 730M","373 - AMD Radeon HD 8550G + HD 8750M Dual Graphics","372 - NVIDIA GeForce GTX 460M","371 - AMD Radeon R7 M260X","370 - AMD Radeon HD 8770M","369 - AMD Radeon HD 8830M","368 - NVIDIA GeForce 9800M GTX SLI","367 - ATI Radeon HD 4850","366 - AMD Radeon HD 6870M","365 - ATI FirePro M7820","364 - AMD FirePro M4000","363 - NVIDIA Quadro 5000M","362 - NVIDIA GeForce 825M","361 - ATI Mobility Radeon HD 5870","360 - NVIDIA GeForce GT 735M","359 - NVIDIA GeForce GTX 260M SLI","358 - NVIDIA GeForce GTS 450","357 - NVIDIA Quadro K2000M","352 - Intel Iris Graphics 540","351 - NVIDIA GeForce 920MX","350 - Intel Iris Plus Graphics 640","349 - NVIDIA GeForce MX110","348 - NVIDIA GeForce 830M","346 - Intel Iris Plus Graphics 645","345 - AMD Radeon RX Vega 6 (Ryzen 4000)","344 - AMD Radeon 625","343 - AMD Radeon 530","342 - Intel Iris Graphics 550","341 - NVIDIA GeForce 930M","340 - Intel Iris Plus Graphics 650","339 - NVIDIA GeForce GT 740M","338 - AMD Radeon R7 384 Cores (Kaveri Desktop)","337 - Intel Iris Pro Graphics 5200","336 - AMD Radeon R7 512 Cores (Kaveri Desktop)","335 - NVIDIA GeForce GTX 560M","334 - AMD Radeon HD 7770M","333 - NVIDIA GeForce GT 745M","332 - AMD Radeon R7 M275DX","331 - NVIDIA GeForce 840M","330 - NVIDIA Quadro M500M","329 - NVIDIA Quadro K620M","328 - NVIDIA GeForce GT 650M","327 - AMD Radeon R7 M370","326 - AMD Radeon R7 M380","325 - AMD Radeon R7 M445","324 - Intel Iris Plus Graphics 655","323 - AMD Radeon R9 M375","322 - AMD FirePro W4190M","321 - NVIDIA Quadro M600M","318 - NVIDIA GeForce 930MX","317 - Intel Iris Plus Graphics G4 (Ice Lake 48 EU)","316 - NVIDIA GeForce 940M","315 - AMD Radeon RX Vega 7","314 - AMD Radeon RX Vega 8 (Ryzen 2000/3000)","313 - NVIDIA Quadro K1100M","312 - NVIDIA Quadro M520","311 - NVIDIA GeForce 940MX","310 - NVIDIA GeForce MX130","309 - Intel Iris Pro Graphics 6200","308 - NVIDIA GeForce GT 750M","307 - NVIDIA GeForce GTX 480M","306 - NVIDIA GeForce GTX 470M","305 - NVIDIA Quadro 4000M","304 - ATI Mobility Radeon HD 4870 X2","303 - AMD FirePro W4100","302 - AMD FirePro W4170M","301 - AMD Radeon HD 8790M","300 - AMD Radeon R7 M465","299 - AMD Radeon HD 7850M","298 - AMD Radeon R9 M265X","297 - AMD Radeon R9 M365X","296 - AMD Radeon HD 8850M","295 - NVIDIA GeForce 845M","294 - NVIDIA GeForce GTX 660M","293 - NVIDIA GeForce GT 755M","292 - AMD Radeon R7 250","291 - AMD Radeon HD 6950M","290 - NVIDIA GeForce GTX 280M SLI","289 - NVIDIA GeForce GTX 550 Ti","288 - ATI Radeon HD 5770","287 - NVIDIA Quadro K2100M","286 - AMD Radeon RX Vega 8 (Ryzen 4000)","285 - NVIDIA GeForce MX230","284 - AMD FirePro M5100","283 - AMD FirePro M6000","282 - Intel UHD Graphics Xe G4 48EUs","281 - NVIDIA GeForce GTX 570M","280 - NVIDIA Quadro K3000M","279 - AMD Radeon HD 7870M","278 - AMD Radeon HD 8870M","277 - AMD Radeon R9 M270","276 - AMD Radeon HD 6970M","275 - AMD FirePro M8900","274 - AMD FirePro W5130M","273 - NVIDIA Maxwell GPU Surface Book","272 - AMD Radeon RX Vega 9","271 - NVIDIA GeForce GTX 670M","270 - AMD Radeon R9 M275","269 - NVIDIA GeForce GTX 760M","268 - NVIDIA Quadro 5010M","267 - NVIDIA GeForce GTX 670MX","266 - AMD Radeon R9 M370X","265 - AMD FirePro W5170M","264 - NVIDIA Quadro K3100M","263 - NVIDIA GeForce GTX 285M SLI","262 - AMD Radeon HD 6790","261 - NVIDIA GeForce GTX 460 768MB","260 - NVIDIA GeForce GTX 485M","259 - ATI Mobility Radeon HD 5870 Crossfire","258 - NVIDIA GeForce GTX 460M SLI","257 - NVIDIA GeForce GT 650M SLI","256 - AMD Radeon HD 7770","255 - AMD Radeon R9 M380","254 - AMD Radeon R9 M385","253 - AMD Radeon R9 M470","252 - AMD Radeon HD 6990M","251 - NVIDIA GeForce GTX 580M","250 - NVIDIA GeForce GTX 675M","249 - ATI Radeon HD 5850","248 - Intel Iris Pro Graphics 580","247 - Intel Iris Pro Graphics P580","246 - AMD Radeon RX Vega 10","245 - Intel Iris Plus Graphics G7 (Ice Lake 64 EU)","244 - NVIDIA Quadro P500","243 - NVIDIA Quadro K4000M","242 - NVIDIA GeForce GTX 560M SLI","241 - NVIDIA GeForce GTX 480M SLI","240 - NVIDIA GeForce GTX 470M SLI","239 - NVIDIA GeForce GTX 765M","238 - NVIDIA GeForce 945M","237 - NVIDIA GeForce GTX 470","236 - AMD Radeon HD 6870","235 - NVIDIA GeForce GTX 560 Ti","234 - AMD Radeon HD 7950M","233 - AMD Radeon R9 M280X","232 - AMD Radeon RX Vega 11","231 - NVIDIA Quadro M620","230 - NVIDIA Quadro M1000M","229 - NVIDIA GeForce GTX 850M","228 - NVIDIA Quadro P520","227 - AMD Radeon R9 M385X","226 - AMD Radeon R9 M470X","225 - AMD Radeon 540X","224 - AMD Radeon 630","223 - AMD Radeon Pro 450","222 - NVIDIA GeForce GTX 950M","221 - NVIDIA GeForce GT 750M SLI","220 - NVIDIA GeForce GTX 675MX","219 - AMD Radeon HD 6970M Crossfire","218 - NVIDIA GeForce GTX 485M SLI","217 - NVIDIA GeForce GT 755M SLI","216 - AMD Radeon HD 6990M Crossfire","215 - NVIDIA GeForce GTX 580M SLI","214 - NVIDIA GeForce GTX 860M","213 - AMD Radeon Pro WX 3100","212 - AMD Radeon RX 540","211 - AMD Radeon Pro WX 2100","210 - AMD Radeon RX 540X","209 - NVIDIA GeForce GTX 770M","208 - Intel Iris Xe Graphics G7 80EUs","207 - NVIDIA Quadro K4100M","206 - NVIDIA Quadro K5000M","205 - NVIDIA Quadro M2000M","204 - NVIDIA GeForce MX330","203 - NVIDIA GeForce MX150","202 - NVIDIA GeForce MX250","201 - NVIDIA Quadro P600","200 - NVIDIA GeForce GT 1030","199 - AMD Radeon Pro 455","198 - AMD Radeon Pro 555","197 - AMD Radeon Pro 555X","196 - AMD Radeon Pro WX 3200","195 - AMD Radeon RX 640","194 - AMD Radeon RX 550","193 - AMD Radeon RX 550X","192 - NVIDIA Quadro P620","191 - NVIDIA Quadro M1200","190 - NVIDIA GeForce GTX 480","189 - NVIDIA GeForce GTX 570","188 - NVIDIA GeForce GTX 670MX SLI","187 - NVIDIA GeForce GTX 750 Ti","186 - NVIDIA GeForce GTX 960M","185 - AMD Radeon Pro WX 4130","184 - AMD Radeon Pro 460","183 - AMD Radeon Pro 560","182 - AMD Radeon Pro 560X","181 - AMD Radeon HD 7970M","180 - AMD FirePro M6100","179 - AMD Radeon R9 M390","178 - NVIDIA GeForce GTX 775M","177 - NVIDIA GeForce GTX 680M","176 - AMD Radeon RX 460","175 - NVIDIA GeForce GTX 765M SLI","174 - NVIDIA GeForce GTX 675M SLI","173 - AMD Radeon HD 6970","172 - NVIDIA GeForce GTX 580","171 - AMD Radeon HD 8970M","170 - AMD Radeon R9 M290X","169 - NVIDIA GeForce GTX 870M","168 - NVIDIA Quadro M2200","167 - AMD Radeon RX 560","166 - AMD Radeon RX 560X","165 - NVIDIA GeForce GTX 965M","164 - AMD Radeon HD 7870","163 - AMD Radeon Pro WX 4150","162 - AMD Radeon RX 460","161 - NVIDIA GeForce GTX 680MX","160 - NVIDIA GeForce MX350","159 - NVIDIA Quadro P1000","158 - NVIDIA Quadro K5100M","157 - NVIDIA GeForce GTX 780M","156 - NVIDIA GeForce GTX 760","155 - NVIDIA GeForce GTX 660 Ti","154 - AMD Radeon R9 270X","153 - NVIDIA GeForce GTX 950","152 - NVIDIA GeForce GTX 1050 Max-Q","151 - NVIDIA GeForce GTX 880M","150 - NVIDIA GeForce GTX 590","149 - Intel Iris Xe Graphics G7 96EUs","148 - AMD Radeon R7 370","147 - AMD Radeon R9 M395","146 - AMD FirePro W7170M","145 - Intel Xe DG1 LP (iDG1LP) Mobile","144 - NVIDIA GeForce GTX 1050 Mobile","143 - NVIDIA GeForce GTX 1050","142 - NVIDIA Quadro M3000M","141 - AMD Radeon R9 M390X","140 - AMD Radeon R9 M295X","139 - AMD Radeon R9 M485X","138 - AMD Radeon Pro Vega 16","137 - AMD Radeon Pro WX Vega M GL","136 - AMD Radeon RX Vega M GL / 870","135 - NVIDIA GeForce GTX 1050 Ti Max-Q","134 - AMD Radeon R9 M395X","133 - NVIDIA GeForce GTX 770M SLI","132 - AMD Radeon HD 7970","131 - NVIDIA GeForce GTX 680","130 - NVIDIA GeForce GTX 860M SLI","129 - NVIDIA GeForce GTX 970M","128 - NVIDIA Quadro M4000M","127 - NVIDIA Quadro P2000 Max-Q","126 - NVIDIA Quadro P2000","125 - NVIDIA GeForce GTX 1050 Ti","124 - NVIDIA GeForce GTX 1050 Ti Mobile","123 - NVIDIA GeForce GTX 960","122 - AMD Radeon R9 380","121 - AMD Radeon R9 280X","120 - NVIDIA Quadro M5000M","119 - AMD Radeon Pro Vega 20","118 - AMD Radeon RX Vega M GH","117 - NVIDIA GeForce GTX 980M","116 - AMD Radeon HD 7970M Crossfire","115 - NVIDIA GeForce GTX 680M SLI","114 - AMD Radeon HD 8970M Crossfire","113 - AMD Radeon R9 M290X Crossfire","112 - NVIDIA GeForce GTX 965M SLI","111 - AMD Radeon RX 490M","110 - AMD Radeon R9 290X","109 - NVIDIA GeForce GTX 780M SLI","108 - NVIDIA GeForce GTX 880M SLI","107 - NVIDIA GeForce MX450","106 - NVIDIA Quadro T1000 Max-Q","105 - NVIDIA Quadro T1000","104 - NVIDIA GeForce GTX 1650 Max-Q","103 - AMD Radeon RX 470","102 - AMD Radeon RX 570","101 - AMD Radeon RX 570X","100 - AMD Radeon RX 470","99 - AMD Radeon Pro WX 7100","98 - AMD Radeon RX 480","97 - NVIDIA Quadro P3000 Max-Q","96 - NVIDIA GeForce GTX 1060 Max-Q","95 - NVIDIA GeForce GTX 1650 Ti Max-Q","94 - NVIDIA GeForce GTX 1650","93 - NVIDIA GeForce GTX 1650 Mobile","92 - NVIDIA GeForce GTX 970","91 - NVIDIA Quadro P3000","90 - AMD Radeon RX 5300M","89 - AMD Radeon Pro 5300M","88 - AMD Radeon RX Vega Mobile","87 - NVIDIA GeForce GTX 780 Ti","86 - AMD Radeon RX 580","85 - AMD Radeon RX 580X","84 - NVIDIA Quadro P3200","83 - NVIDIA Quadro P4000 Max-Q","82 - AMD Radeon Pro 5500M","81 - AMD Radeon RX 5500M","80 - NVIDIA GeForce GTX 1060 Mobile","79 - AMD Radeon RX 480","78 - NVIDIA GeForce GTX 1650 Ti Mobile","76 - NVIDIA Quadro T2000 Max-Q","75 - NVIDIA Quadro T2000","74 - NVIDIA Quadro P4000","73 - AMD Radeon RX 570","72 - NVIDIA GeForce GTX 1060","71 - NVIDIA GeForce GTX 970M SLI","70 - AMD Radeon R9 390X","69 - NVIDIA Quadro M5500","68 - NVIDIA GeForce GTX 980","67 - AMD Radeon RX 580","66 - AMD Radeon RX 590","65 - NVIDIA GeForce GTX 980","64 - AMD Radeon R9 Nano","63 - AMD Radeon R9 Fury","62 - NVIDIA GeForce GTX 980M SLI","61 - NVIDIA Quadro P5000 Max-Q","60 - NVIDIA GeForce GTX 1660 Ti Max-Q","59 - AMD Radeon Pro 5600M","58 - NVIDIA GeForce GTX 1070 Max-Q","57 - NVIDIA GeForce GTX 1660","56 - NVIDIA GeForce GTX 980 Ti","55 - AMD Radeon RX 5600M","54 - NVIDIA GeForce GTX 1660 Ti Mobile","53 - NVIDIA Quadro P5000","52 - NVIDIA GeForce GTX 1660 Super","51 - NVIDIA GeForce GTX 1660 Ti","50 - NVIDIA Quadro P4200","49 - NVIDIA GeForce GTX 1070 Mobile","48 - NVIDIA GeForce RTX 2060 Max-Q","47 - AMD Radeon Pro Vega 56","46 - NVIDIA GeForce GTX 1080 Max-Q","45 - AMD Radeon RX 5600 XT","44 - NVIDIA GeForce GTX 1070","43 - NVIDIA Quadro P5200","42 - NVIDIA GeForce GTX 980 SLI","41 - NVIDIA GeForce RTX 2060 Mobile","40 - AMD Radeon RX Vega 56","39 - NVIDIA Quadro RTX 3000 Max-Q","38 - NVIDIA Quadro RTX 3000","37 - NVIDIA GeForce RTX 2070 Max-Q","36 - NVIDIA GeForce GTX 1070 Ti","35 - NVIDIA GeForce RTX 2070 Super Max-Q","34 - NVIDIA GeForce RTX 2060","33 - NVIDIA Quadro RTX 4000 Max-Q","32 - NVIDIA Quadro RTX 4000","31 - NVIDIA GeForce GTX 1080 Mobile","30 - AMD Radeon RX Vega 64","29 - AMD Radeon RX 5700M","28 - AMD Radeon RX 5700","27 - NVIDIA GeForce RTX 2060 Super","26 - NVIDIA GeForce RTX 2070 Mobile","25 - NVIDIA GeForce RTX 2070 Super Mobile","24 - NVIDIA GeForce GTX 1080","22 - NVIDIA GeForce RTX 2070","21 - AMD Radeon RX 5700 XT","20 - AMD Radeon VII","19 - NVIDIA GeForce RTX 2070 Super","18 - NVIDIA GeForce RTX 2080 Max-Q","17 - NVIDIA GeForce RTX 2080 Super Max-Q","16 - NVIDIA GeForce GTX 1070 SLI","15 - NVIDIA GeForce GTX 1070 SLI","14 - NVIDIA GeForce GTX 1080 SLI","13 - NVIDIA Titan X Pascal","12 - NVIDIA GeForce GTX 1080 Ti","11 - NVIDIA GeForce RTX 2080 Mobile","10 - NVIDIA GeForce RTX 2080 Super Mobile","9 - NVIDIA Quadro RTX 5000 Max-Q","8 - NVIDIA Quadro RTX 5000","6 - NVIDIA GeForce RTX 2080","5 - NVIDIA GeForce RTX 2080 Super","4 - NVIDIA Quadro RTX 6000","2 - NVIDIA GeForce RTX 2080 Ti","1 - NVIDIA Titan RTX"],r=["973 - ARM Mali-200","972 - Qualcomm Adreno 200","971 - PowerVR SGX530","970 - PowerVR SGX531","969 - PowerVR SGX535","968 - Vivante GC800","967 - Qualcomm Adreno 203","966 - Qualcomm Adreno 205","964 - PowerVR SGX540","962 - NVIDIA GeForce ULP (Tegra 2)","961 - ARM Mali-400 MP","960 - ARM Mali-400 MP2","959 - Vivante GC1000+ Dual-Core","958 - Qualcomm Adreno 220","957 - Broadcom VideoCore-IV","956 - NVIDIA GeForce ULP (Tegra 3)","955 - ARM Mali-400 MP4","954 - Vivante GC4000","953 - Qualcomm Adreno 225","945 - Qualcomm Adreno 302","944 - Vivante GC7000UL","943 - ARM Mali-T720","942 - Qualcomm Adreno 304","941 - Qualcomm Adreno 305","940 - Qualcomm Adreno 306","939 - Qualcomm Adreno 308","938 - PowerVR SGX544","937 - ARM Mali-T720 MP2","936 - PowerVR SGX544MP2","935 - PowerVR SGX545","932 - PowerVR SGX543MP2","922 - PowerVR SGX543MP3","914 - ARM Mali-T830 MP1","913 - ARM Mali-450 MP4","912 - ARM Mali-T720 MP4","911 - PowerVR GE8100","910 - PowerVR GE8300","909 - PowerVR GE8320","908 - ARM Mali-T760 MP2","907 - Qualcomm Adreno 320","906 - ARM Mali-T624","905 - PowerVR SGX543MP4","878 - ARM Mali-T830 MP2","877 - Qualcomm Adreno 405","876 - PowerVR G6200","875 - NVIDIA GeForce Tegra 4","870 - ARM Mali-T604 MP4","864 - ARM Mali-T830 MP3","863 - ARM Mali-T860 MP2","859 - Qualcomm Adreno 504","858 - Qualcomm Adreno 505","857 - PowerVR GE8322 / IMG8322","856 - Qualcomm Adreno 506","855 - Qualcomm Adreno 508","854 - Qualcomm Adreno 509","853 - ARM Mali-T628 MP4","852 - PowerVR SGX554MP4","814 - ARM Mali-T760 MP4","813 - ARM Mali-T628 MP6","812 - Intel HD Graphics (Bay Trail)","811 - PowerVR G6400","810 - PowerVR GX6250","809 - PowerVR G6430","808 - Qualcomm Adreno 330","807 - Qualcomm Adreno 510","806 - Qualcomm Adreno 512","805 - Qualcomm Adreno 610","804 - Qualcomm Adreno 612","741 - Intel HD Graphics (Cherry Trail)","728 - ARM Mali-G51 MP4","726 - Qualcomm Adreno 616","725 - Qualcomm Adreno 618","724 - Qualcomm Adreno 418","704 - Qualcomm Adreno 620","703 - Qualcomm Adreno 420","702 - PowerVR GX6450","692 - ARM Mali-T880 MP2","691 - ARM Mali-T760 MP6","659 - ARM Mali-G52 MP1","658 - ARM Mali-G52 MP2","657 - ARM Mali-G52 MP6","656 - ARM Mali-T880 MP4","655 - ARM Mali-G72 MP3","634 - Qualcomm Adreno 430","631 - ARM Mali-G71 MP2","630 - ARM Mali-T760 MP8","583 - ARM Mali-G76 MP4","582 - ARM Mali-T880 MP12","581 - Apple A9 / PowerVR GT7600","580 - NVIDIA Tegra K1 Kepler GPU","579 - PowerVR GXA6850","578 - Qualcomm Adreno 530","577 - PowerVR GM9446","538 - ARM Mali-G71 MP8","537 - ARM Mali-G72 MP12","536 - ARM Mali-G71 MP20","535 - ARM Mali-G72 MP18","534 - ARM Mali-G57 MP6","533 - Qualcomm Adreno 540","532 - ARM Mali-G76 MP10","531 - ARM Mali-G76 MP12","530 - Qualcomm Adreno 630","529 - Qualcomm Adreno 640","528 - ARM Mali-G76 MP16","527 - ARM Mali-G77 MP11","512 - Apple A10 Fusion GPU / PowerVR","421 - NVIDIA Tegra X1 Maxwell GPU","392 - Apple A9X / PowerVR Series 7XT","356 - Apple A10X Fusion GPU / PowerVR","355 - Apple A11 Bionic GPU","354 - Qualcomm Adreno 650","353 - Apple A12 Bionic GPU","347 - Apple A13 Bionic GPU","320 - Apple A12X Bionic GPU","319 - Apple A12Z Bionic GPU"],o=function(e){return e.toLowerCase().split("- ")[1].split(" /")[0]},a="undefined"==typeof window,i=new(function(){function e(e){this.userAgent=e||(!a&&window.navigator?window.navigator.userAgent:""),this.isAndroidDevice=!/like android/i.test(this.userAgent)&&/android/i.test(this.userAgent),this.iOSDevice=this.match(1,/(iphone|ipod|ipad)/i).toLowerCase(),!a&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>2&&!window.MSStream&&(this.iOSDevice="ipad")}return e.prototype.match=function(e,t){var r=this.userAgent.match(t);return r&&r.length>1&&r[e]||""},Object.defineProperty(e.prototype,"isMobile",{get:function(){return!this.isTablet&&(/[^-]mobi/i.test(this.userAgent)||"iphone"===this.iOSDevice||"ipod"===this.iOSDevice||this.isAndroidDevice||/nexus\s*[0-6]\s*/i.test(this.userAgent))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTablet",{get:function(){return/tablet/i.test(this.userAgent)&&!/tablet pc/i.test(this.userAgent)||"ipad"===this.iOSDevice||this.isAndroidDevice&&!/[^-]mobi/i.test(this.userAgent)||!/nexus\s*[0-6]\s*/i.test(this.userAgent)&&/nexus\s*[0-9]+/i.test(this.userAgent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDesktop",{get:function(){return!this.isMobile&&!this.isTablet},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMacOS",{get:function(){return/macintosh/i.test(this.userAgent)&&{version:this.match(1,/mac os x (\d+(\.?_?\d+)+)/i).replace(/[_\s]/g,".").split(".").map((function(e){return e}))[1]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWindows",{get:function(){return/windows /i.test(this.userAgent)&&{version:this.match(1,/Windows ((NT|XP)( \d\d?.\d)?)/i)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isiOS",{get:function(){return!!this.iOSDevice&&{version:this.match(1,/os (\d+([_\s]\d+)*) like mac os x/i).replace(/[_\s]/g,".")||this.match(1,/version\/(\d+(\.\d+)?)/i)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAndroid",{get:function(){return this.isAndroidDevice&&{version:this.match(1,/android[ \/-](\d+(\.\d+)*)/i)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"browser",{get:function(){var e=this.match(1,/version\/(\d+(\.\d+)?)/i);return/opera/i.test(this.userAgent)?{name:"Opera",version:e||this.match(1,/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(this.userAgent)?{name:"Opera",version:this.match(1,/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||e}:/SamsungBrowser/i.test(this.userAgent)?{name:"Samsung Internet for Android",version:e||this.match(1,/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(this.userAgent)?{name:"Yandex Browser",version:e||this.match(1,/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(this.userAgent)?{name:"UC Browser",version:this.match(1,/(?:ucbrowser)[\s\/](\d+(\.\d+)?)/i)}:/msie|trident/i.test(this.userAgent)?{name:"Internet Explorer",version:this.match(1,/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/(edge|edgios|edga|edg)/i.test(this.userAgent)?{name:"Microsoft Edge",version:this.match(2,/(edge|edgios|edga|edg)\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(this.userAgent)?{name:"Firefox",version:this.match(1,/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)}:/chromium/i.test(this.userAgent)?{name:"Chromium",version:this.match(1,/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||e}:/chrome|crios|crmo/i.test(this.userAgent)?{name:"Chrome",version:this.match(1,/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/safari|applewebkit/i.test(this.userAgent)?{name:"Safari",version:e}:{name:this.match(1,/^(.*)\/(.*) /),version:this.match(2,/^(.*)\/(.*) /)}},enumerable:!1,configurable:!0}),e}()),s=i.browser,c=i.isMobile,u=i.isTablet,l=function(e){return e.replace(/[\D]/g,"")},h=function(e,t){var r=e?e.length:0,n=t?t.length:0;if(0===r)return n;if(0===n)return r;for(var o=new Array(n+1),a=0;a<=n;++a)(o[a]=new Array(r+1))[0]=a;for(var i=o[0],s=1;s<=r;++s)i[s]=s;for(var c=1;c<=n;++c)for(var u=1;u<=r;++u)t.charAt(c-1)===e.charAt(u-1)?o[c][u]=o[c-1][u-1]:o[c][u]=Math.min(o[c-1][u-1],o[c][u-1],o[c-1][u])+1;return o[n][r]},d=function(e,t,r){var n=["adreno","apple","mali-t","mali","nvidia","powervr"].find((function(e){return t.includes(e)})),a=[];if(n)for(var i=0;i<e.length;i++)for(var s=e[i],c=0;c<s.length;c++){var u=o(s[c]);!u.includes(n)||"mali"===u&&u.includes("mali-t")||!l(u).includes(r)||a.push({rank:[i,"BENCHMARK - "+u],distance:h(t,u)})}var d=f(a);return d.length>0?d[0].rank:[void 0,void 0]},f=function(e){return e.sort((function(e,t){return e.distance-t.distance}))},p=function(e,t,r){var n=["intel","amd","nvidia"].find((function(e){return t.includes(e)})),a=[];if(n)for(var i=0;i<e.length;i++)for(var s=e[i],c=0;c<s.length;c++){var u=o(s[c]);u.includes(n)&&l(u).includes(r)&&a.push({rank:[i,"BENCHMARK - "+u],distance:h(t,u)})}var d=f(a);return d.length>0?d[0].rank:[void 0,void 0]};e.getGPUTier=function(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=o.mobileBenchmarkPercentages,i=void 0===a?[0,50,30,20]:a,h=o.desktopBenchmarkPercentages,f=void 0===h?[0,50,30,20]:h,v=o.forceRendererString,m=void 0===v?"":v,g=o.forceMobile,y=void 0!==g&&g,b=o.glContext,M=o.failIfMajorPerformanceCaveat,A=c||u||y,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FALLBACK";return{tier:"GPU_".concat(A?"MOBILE":"DESKTOP","_TIER_").concat(e),type:t}};if(m)e=m;else{var w=b||function(e){var t={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:!(arguments.length>1&&void 0!==arguments[1])||arguments[1],powerPreference:"high-performance",stencil:!1};"boolean"!=typeof e&&"Safari"===e.name&&e.version.includes("12")&&delete t.powerPreference;var r=document.createElement("canvas"),n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);if(n&&n instanceof WebGLRenderingContext)return n}(s,void 0===M||M);if(!w)return I(0,"WEBGL_UNSUPPORTED");e=function(e){var t=e.getExtension("WEBGL_debug_renderer_info");return t&&e.getParameter(t.UNMASKED_RENDERER_WEBGL)}(w)}if(e=function(e){var t=e.toLowerCase();return t.includes("angle (")&&t.includes("direct3d")&&(t=t.replace("angle (","").split(" direct3d")[0]),t.includes("nvidia")&&t.includes("gb")&&(t=t.split(/\dgb/)[0]),t}(e),/(radeon hd 6970m|radeon hd 6770m|radeon hd 6490m|radeon hd 6630m|radeon hd 6750m|radeon hd 5750|radeon hd 5670|radeon hd 4850|radeon hd 4870|radeon hd 4670|geforce 9400m|geforce 320m|geforce 330m|geforce gt 130|geforce gt 120|geforce gtx 285|geforce 8600|geforce 9600m|geforce 9400m|geforce 8800 gs|geforce 8800 gt|quadro fx 5|quadro fx 4|radeon hd 2600|radeon hd 2400|radeon r9 200|mali-4|mali-3|mali-2|google swiftshader|sgx543|legacy|sgx 543)/.test(e))return I(0,"BLACKLISTED");var D=(A?d:p)(function(e,t){var r=0;return t.map((function(t){var n=Math.round(e.length/100*t),o=e.slice(r,r+n);return r+=n,o}))}(A?r:t,A?i:f),e,l(e)),x=n(D,2);return I(x[0],x[1])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},162:function(e,t,r){var n=r(163),o=r(164),a=r(102),i=r(165);e.exports=function(e,t){return n(e)||o(e,t)||a(e,t)||i()}},163:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},164:function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(c){o=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}}},165:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},166:function(e,t,r){"use strict";(function(e){function n(){var e,t=0,r=[],o=0,a=0;var i=f((function(e){a||c(1,e)})),s=f((function(e){a||c(-1,e)}));function c(r,n){a++;var o=0;try{n===m&&p();var i=r>0&&d(n);i?i.call(n,f((function(e){o++,c(1,e)})),f((function(e){o++,c(-1,e)}))):(t=r,e=n,u())}catch(s){t||o||c(-1,s)}}function u(){o||(setTimeout(l,0),o=1)}function l(){var e=r;o=0,r=[],e.forEach(h)}function h(e){e()}function d(e){var t=e&&(v(e)||"object"===typeof e)&&e.then;return v(t)&&t}function f(e){var t=0;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];t++||e.apply(this,r)}}function p(){throw new TypeError("Chaining cycle detected")}var v=function(e){return"function"===typeof e},m={then:function(o,a){var i=n();return r.push((function(){var r=t>0?o:a;if(v(r))try{var n=r(e);n===i&&p();var s=d(n);s?s.call(n,i.resolve,i.reject):i.resolve(n)}catch(c){i.reject(c)}else i[t>0?"resolve":"reject"](e)})),t&&u(),i},resolve:i,reject:s};return m}function o(){var e,t,r=new Promise((function(r,n){e=r,t=n}));return{then:r.then.bind(r),resolve:e,reject:t}}r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return f})),n.all=o.all=function(e){var t=0,r=[],n=a();return 0===e.length?n.resolve([]):e.forEach((function(o,i){var s=a();s.resolve(o),s.then((function(o){t++,r[i]=o,t===e.length&&n.resolve(r)}),n.reject)})),n};var a="function"===typeof Promise?o:n;function i(){var e=Object.create(null);function t(n,o){var a=n.id,i=n.name,s=n.dependencies;void 0===s&&(s=[]);var c=n.init;void 0===c&&(c=function(){});var u=n.getTransferables;if(void 0===u&&(u=null),!e[a])try{s=s.map((function(r){return r&&r.isWorkerModule&&(t(r,(function(e){if(e instanceof Error)throw e})),r=e[r.id].value),r})),c=r("<"+i+">.init",c),u&&(u=r("<"+i+">.getTransferables",u));var l=null;"function"===typeof c?l=c.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[a]={id:a,value:l,getTransferables:u},o(l)}catch(h){h&&h.noLog||console.error(h),o(h)}}function r(e,t){var r=void 0;self.troikaDefine=function(e){return r=e};var n=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(o){console.error(o)}return URL.revokeObjectURL(n),delete self.troikaDefine,r}self.addEventListener("message",(function(r){var n=r.data,o=n.messageId,a=n.action,i=n.data;try{"registerModule"===a&&t(i,(function(e){e instanceof Error?postMessage({messageId:o,success:!1,error:e.message}):postMessage({messageId:o,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===a&&function(t,r){var n,o=t.id,a=t.args;e[o]&&"function"===typeof e[o].value||r(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var i=(n=e[o]).value.apply(n,a);i&&"function"===typeof i.then?i.then(s,(function(e){return r(e instanceof Error?e:new Error(""+e))})):s(i)}catch(c){r(c)}function s(t){try{var n=e[o].getTransferables&&e[o].getTransferables(t);n&&Array.isArray(n)&&n.length||(n=void 0),r(t,n)}catch(c){console.error(c),r(c)}}}(i,(function(e,t){e instanceof Error?postMessage({messageId:o,success:!1,error:e.message}):postMessage({messageId:o,success:!0,result:e},t||void 0)}))}catch(s){postMessage({messageId:o,success:!1,error:s.stack})}}))}var s=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return s=function(){return e},e},c=0,u=0,l=!1,h=Object.create(null),d=function(){var e=Object.create(null);return e._count=0,e}();function f(e){if((!e||"function"!==typeof e.init)&&!l)throw new Error("requires `options.init` function");var t=e.dependencies,r=e.init,n=e.getTransferables,o=e.workerId;if(!s())return function(e){var t=function e(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then((function(e){if("function"===typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var r=e.dependencies,n=e.init;r=Array.isArray(r)?r.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var o=a.all(r).then((function(e){return n.apply(null,e)}));return t._getInitResult=function(){return o},o},t}(e);null==o&&(o="#default");var i="workerModule"+ ++c,u=e.name||i,h=null;function d(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return h||(h=v(o,"registerModule",d.workerModuleData)),h.then((function(t){if(t.isCallable)return v(o,"callModule",{id:i,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!==typeof e||e.workerModuleData||(l=!0,e=f({workerId:o,name:"<"+u+"> function dependency: "+e.name,init:"function(){return (\n"+p(e)+"\n)}"}),l=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),d.workerModuleData={isWorkerModule:!0,id:i,name:u,dependencies:t,init:p(r),getTransferables:n&&p(n)},d}function p(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function v(e,t,r){var n=a(),o=++u;return d[o]=function(e){e.success?n.resolve(e.result):n.reject(new Error("Error in worker "+t+" call: "+e.error))},d._count++,d.count>1e3&&console.warn("Large number of open WorkerModule requests, some may not be returning"),function(e){var t=h[e];if(!t){var r=p(i);(t=h[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,r=t.messageId,n=d[r];if(!n)throw new Error("WorkerModule response with empty or unknown messageId");delete d[r],d.count--,n(t)}}return t}(e).postMessage({messageId:o,action:t,data:r}),n}var m=f({name:"Thenable",dependencies:[a],init:function(e){return e}})}).call(this,r(104))},167:function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),i=new R(n||[]);return a._invoke=function(e,t,r){var n=h;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw a;return E()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=x(i,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?p:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=p,r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(O){return{type:"throw",arg:O}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};b[a]=function(){return this};var M=Object.getPrototypeOf,A=M&&M(M(G([])));A&&A!==r&&n.call(A,a)&&(b=A);var I=y.prototype=m.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function r(o,a,i,s){var c=l(e[o],e,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"===typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(h).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function x(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function G(e){if(e){var r=e[a];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:E}}function E(){return{value:t,done:!0}}return g.prototype=I.constructor=y,y.constructor=g,g.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},w(D.prototype),D.prototype[i]=function(){return this},e.AsyncIterator=D,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new D(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(I),c(I,s,"Generator"),I[a]=function(){return this},I.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=G,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:G(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},168:function(e,t,r){"use strict";function n(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function s(e){n(i,o,a,s,c,"next",e)}function c(e){n(i,o,a,s,c,"throw",e)}s(void 0)}))}}r.d(t,"a",(function(){return o}))},169:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));var n=r(0);function o(e,t){var r=Object(n.useState)((function(){return{inputs:t,result:e()}}))[0],o=Object(n.useRef)(r),a=Boolean(t&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,o.current.inputs))?o.current:{inputs:t,result:e()};return Object(n.useEffect)((function(){o.current=a}),[a]),a.result}function a(e,t){return o((function(){return e}),t)}},170:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=!1;function o(){n||(n=!0,console.warn('react-spring: The "interpolate" function is deprecated in v10 (use "to" instead)'))}},171:function(e,t,r){"use strict";r.d(t,"a",(function(){return R}));var n=r(41),o=r(33),a=r(37),i=r(39),s=r(40),c=r(7),u=r(50),l=r(14),h=r(145),d=r(172),f=r(107),p=r(59),v=r(78),m=/^--/;function g(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||m.test(e)||b.hasOwnProperty(e)&&b[e]?(""+t).trim():t+"px"}var y={};var b={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M=["Webkit","Ms","Moz","O"];b=Object.keys(b).reduce((function(e,t){return M.forEach((function(r){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(r,t)]=e[t]})),e}),b);var A=/^(matrix|translate|scale|rotate|skew)/,I=/^(translate)/,w=/^(rotate|skew)/,D=function(e,t){return p.d.num(e)&&0!==e?e+t:e},x=function e(t,r){return p.d.arr(t)?t.every((function(t){return e(t,r)})):p.d.num(t)?t===r:parseFloat(t)===r},T=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e){Object(a.a)(this,r);var n=e.x,i=e.y,s=e.z,u=Object(c.a)(e,["x","y","z"]),l=[],h=[];return(n||i||s)&&(l.push([n||0,i||0,s||0]),h.push((function(e){return["translate3d("+e.map((function(e){return D(e,"px")})).join(",")+")",x(e,0)]}))),Object(p.b)(u,(function(e,t){if("transform"===t)l.push([e||""]),h.push((function(e){return[e,""===e]}));else if(A.test(t)){if(delete u[t],p.d.und(e))return;var r=I.test(t)?"px":w.test(t)?"deg":"";l.push(Object(p.h)(e)),h.push("rotate3d"===t?function(e){var t=Object(o.a)(e,4),n=t[0],a=t[1],i=t[2],s=t[3];return["rotate3d("+n+","+a+","+i+","+D(s,r)+")",x(s,0)]}:function(e){return[t+"("+e.map((function(e){return D(e,r)})).join(",")+")",x(e,t.startsWith("scale")?1:0)]})}})),l.length&&(u.transform=new S(l,h)),t.call(this,u)}return r}(f.b),S=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e,n){var o;return Object(a.a)(this,r),(o=t.call(this)).inputs=e,o.transforms=n,o._value=null,o._children=new Set,o}return Object(n.a)(r,[{key:"get",value:function(){return this._value||(this._value=this._get())}},{key:"_get",value:function(){var e=this,t="",r=!0;return Object(p.b)(this.inputs,(function(n,a){var i=Object(v.c)(n[0]),s=e.transforms[a](p.d.arr(i)?i:n.map(v.c)),c=Object(o.a)(s,2),u=c[0],l=c[1];t+=" "+u,r=r&&l})),r?"none":t}},{key:"addChild",value:function(e){var t=this;this._children.size||Object(p.b)(this.inputs,(function(e){return Object(p.b)(e,(function(e){var r=Object(v.b)(e);r&&r.addChild(t)}))})),this._children.add(e)}},{key:"removeChild",value:function(e){var t=this;this._children.delete(e),this._children.size||Object(p.b)(this.inputs,(function(e){return Object(p.b)(e,(function(e){var r=Object(v.b)(e);r&&r.removeChild(t)}))}))}},{key:"onParentChange",value:function(e){"change"==e.type&&(this._value=null),Object(p.b)(this._children,(function(t){t.onParentChange(e)}))}}]),r}(v.a);u.Globals.assign({colorNames:d.a,createStringInterpolator:h.a,batchedUpdates:l.unstable_batchedUpdates});var R=Object(f.e)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;var r="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,n=t,o=n.style,a=n.children,i=n.scrollTop,s=n.scrollLeft,l=Object(c.a)(n,["style","children","scrollTop","scrollLeft"]),h=Object.values(l),d=Object.keys(l).map((function(t){return r||e.hasAttribute(t)?t:y[t]||(y[t]=t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})))}));u.Globals.frameLoop.onWrite((function(){for(var t in void 0!==a&&(e.textContent=a),o)if(o.hasOwnProperty(t)){var r=g(t,o[t]);"float"===t?t="cssFloat":m.test(t)?e.style.setProperty(t,r):e.style[t]=r}d.forEach((function(t,r){e.setAttribute(t,h[r])})),void 0!==i&&(e.scrollTop=i),void 0!==s&&(e.scrollLeft=s)}))},createAnimatedStyle:function(e){return new T(e)},getComponentProps:function(e){return Object(c.a)(e,["scrollTop","scrollLeft"])}}).animated},172:function(e,t,r){"use strict";t.a={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}},324:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(38),o=r(74);var a=r(76);function i(e){var t="function"===typeof Map?new Map:void 0;return(i=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Object(a.a)(e,arguments,Object(n.a)(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Object(o.a)(i,e)})(e)}},36:function(e,t,r){"use strict";r.r(t),r.d(t,"createStringInterpolator",(function(){return n})),r.d(t,"frameLoop",(function(){return s})),r.d(t,"to",(function(){return o})),r.d(t,"now",(function(){return c})),r.d(t,"colorNames",(function(){return u})),r.d(t,"skipAnimation",(function(){return l})),r.d(t,"requestAnimationFrame",(function(){return h})),r.d(t,"batchedUpdates",(function(){return d})),r.d(t,"willAdvance",(function(){return f})),r.d(t,"assign",(function(){return p}));var n,o,a=r(60),i=r(59),s=new a.a,c=function(){return performance.now()},u=null,l=!1,h="undefined"!==typeof window?window.requestAnimationFrame:function(){return-1},d=function(e){return e()},f=i.g,p=function(e){var t;return t=Object.assign({to:o,now:c,frameLoop:s,colorNames:u,skipAnimation:l,createStringInterpolator:n,requestAnimationFrame:h,batchedUpdates:d,willAdvance:f},function(e){var t={};for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}(e)),o=t.to,c=t.now,s=t.frameLoop,u=t.colorNames,l=t.skipAnimation,n=t.createStringInterpolator,h=t.requestAnimationFrame,d=t.batchedUpdates,f=t.willAdvance,t}},50:function(e,t,r){"use strict";var n=r(36);r.d(t,"Globals",(function(){return n}));r(78)},59:function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"f",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"h",(function(){return l})),r.d(t,"c",(function(){return h}));var n=r(36),o=function(){},a=function(e,t,r){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})},i={arr:Array.isArray,obj:function(e){return!!e&&"Object"===e.constructor.name},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},und:function(e){return void 0===e}};function s(e,t){if(i.arr(e)){if(!i.arr(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var c=function(e){return i.str(e)&&("#"==e[0]||/\d/.test(e)||!(!n.colorNames||!n.colorNames[e]))},u=function(e,t,r){i.fun(e.forEach)?e.forEach(t,r):Object.keys(e).forEach((function(n){return t.call(r,e[n],n)}))},l=function(e){return i.und(e)?[]:i.arr(e)?e:[e]};function h(e,t){if(e.size){var r=Array.from(e);e.clear(),u(r,t)}}},60:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a}));var n=r(36),o=function(e){return(0,n.requestAnimationFrame)(e)},a=function(e){void 0===e&&(e=o);var t=!0,r=!1,a=0,s=[],c=0,u=new Set,l=new Set,h=new Set,d=function(e){var t=s.indexOf(e);t<0&&(t=s.findIndex((function(t){return t.priority>e.priority})),s.splice(~t?t:s.length,0,e))},f=function r(){if(!t)try{m(),e(r)}catch(n){console.error(n)}},p=function(){t&&(t=!1,0==a&&(a=n.now(),e(f)))},v=[];this.setTimeout=function(e,t){var r=n.now()+t,o=i(v,(function(e){return e.time>r})),a={time:r,handler:e,cancel:function e(){var t=v.findIndex((function(t){return t.cancel==e}));t>=0&&v.splice(t,1)}};return v.splice(o,0,a),p(),a};var m=this.advance=function(){var e=n.now();if(u.size&&(u.forEach(d),u.clear()),v.length&&n.batchedUpdates((function(){var t=i(v,(function(t){return t.time>e}));v.splice(0,t).forEach((function(e){return e.handler()}))})),e>a){var t=Math.min(64,e-a);a=e,n.batchedUpdates((function(){s.length&&(n.willAdvance(s),s=s.filter((function(e){return c=e.priority,e.idle||e.advance(t),!e.idle})),c=0),l.size&&(l.forEach((function(t){return t(e)})),l.clear()),h.size&&(r=!0,h.forEach((function(t){return t(e)})),h.clear(),r=!1)}))}};this.start=function(e){c>e.priority?u.add(e):(d(e),p())},this.onFrame=function(e){l.add(e),p()},this.onWrite=function(e){r?e(a):h.add(e)}};function i(e,t){var r=e.findIndex(t);return r<0?e.length:r}}).call(this,r(104))},61:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(36),o=r(59),a=function e(t,r,a){if(o.d.fun(t))return t;if(o.d.arr(t))return e({range:t,output:r,extrapolate:a});if(o.d.str(t.output[0]))return n.createStringInterpolator(t);var i=t,s=i.output,c=i.range||[0,1],u=i.extrapolateLeft||i.extrapolate||"extend",l=i.extrapolateRight||i.extrapolate||"extend",h=i.easing||function(e){return e};return function(e){var t=function(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(e,c);return function(e,t,r,n,o,a,i,s,c){var u=c?c(e):e;if(u<t){if("identity"===i)return u;"clamp"===i&&(u=t)}if(u>r){if("identity"===s)return u;"clamp"===s&&(u=r)}if(n===o)return n;if(t===r)return e<=t?n:o;t===-1/0?u=-u:r===1/0?u-=t:u=(u-t)/(r-t);u=a(u),n===-1/0?u=-u:o===1/0?u+=n:u=u*(o-n)+n;return u}(e,c[t],c[t+1],s[t],s[t+1],h,u,l,i.map)}}},72:function(e,t,r){"use strict";r.d(t,"a",(function(){return ot}));var n=r(57),o=r(37),a=r(41),i=r(47),s=r(39),c=r(40),u=(r(76),r(56)),l=r(33),h=r(3),d=r(7),f=r(0),p=r.n(f),v=r(46),m=(r(101),r(30)),g=function(){m.InstancedBufferGeometry.call(this),this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new m.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new m.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))};g.prototype=Object.assign(Object.create(m.InstancedBufferGeometry.prototype),{constructor:g,isLineSegmentsGeometry:!0,applyMatrix4:function(e){var t=this.attributes.instanceStart,r=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),r.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var r=new m.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceStart",new m.InterleavedBufferAttribute(r,3,0)),this.setAttribute("instanceEnd",new m.InterleavedBufferAttribute(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var r=new m.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceColorStart",new m.InterleavedBufferAttribute(r,3,0)),this.setAttribute("instanceColorEnd",new m.InterleavedBufferAttribute(r,3,3)),this},fromWireframeGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromEdgesGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromMesh:function(e){return this.fromWireframeGeometry(new m.WireframeGeometry(e.geometry)),this},fromLineSegments:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this},computeBoundingBox:function(){var e=new m.Box3;return function(){null===this.boundingBox&&(this.boundingBox=new m.Box3);var t=this.attributes.instanceStart,r=this.attributes.instanceEnd;void 0!==t&&void 0!==r&&(this.boundingBox.setFromBufferAttribute(t),e.setFromBufferAttribute(r),this.boundingBox.union(e))}}(),computeBoundingSphere:function(){var e=new m.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new m.Sphere),null===this.boundingBox&&this.computeBoundingBox();var t=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(void 0!==t&&void 0!==r){var n=this.boundingSphere.center;this.boundingBox.getCenter(n);for(var o=0,a=0,i=t.count;a<i;a++)e.fromBufferAttribute(t,a),o=Math.max(o,n.distanceToSquared(e)),e.fromBufferAttribute(r,a),o=Math.max(o,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}}(),toJSON:function(){},applyMatrix:function(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}});var y=function(){g.call(this),this.type="LineGeometry"};y.prototype=Object.assign(Object.create(g.prototype),{constructor:y,isLineGeometry:!0,setPositions:function(e){for(var t=e.length-3,r=new Float32Array(2*t),n=0;n<t;n+=3)r[2*n]=e[n],r[2*n+1]=e[n+1],r[2*n+2]=e[n+2],r[2*n+3]=e[n+3],r[2*n+4]=e[n+4],r[2*n+5]=e[n+5];return g.prototype.setPositions.call(this,r),this},setColors:function(e){for(var t=e.length-3,r=new Float32Array(2*t),n=0;n<t;n+=3)r[2*n]=e[n],r[2*n+1]=e[n+1],r[2*n+2]=e[n+2],r[2*n+3]=e[n+3],r[2*n+4]=e[n+4],r[2*n+5]=e[n+5];return g.prototype.setColors.call(this,r),this},fromLine:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this},copy:function(){return this}}),m.UniformsLib.line={linewidth:{value:1},resolution:{value:new m.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}},m.ShaderLib.line={uniforms:m.UniformsUtils.merge([m.UniformsLib.common,m.UniformsLib.fog,m.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};var b=function(e){m.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:m.UniformsUtils.clone(m.ShaderLib.line.uniforms),vertexShader:m.ShaderLib.line.vertexShader,fragmentShader:m.ShaderLib.line.fragmentShader,clipping:!0}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};(b.prototype=Object.create(m.ShaderMaterial.prototype)).constructor=b,b.prototype.isLineMaterial=!0;var M=function(e,t){void 0===e&&(e=new g),void 0===t&&(t=new b({color:16777215*Math.random()})),m.Mesh.call(this,e,t),this.type="LineSegments2"};M.prototype=Object.assign(Object.create(m.Mesh.prototype),{constructor:M,isLineSegments2:!0,computeLineDistances:function(){var e=new m.Vector3,t=new m.Vector3;return function(){for(var r=this.geometry,n=r.attributes.instanceStart,o=r.attributes.instanceEnd,a=new Float32Array(2*n.data.count),i=0,s=0,c=n.data.count;i<c;i++,s+=2)e.fromBufferAttribute(n,i),t.fromBufferAttribute(o,i),a[s]=0===s?0:a[s-1],a[s+1]=a[s]+e.distanceTo(t);var u=new m.InstancedInterleavedBuffer(a,2,1);return r.setAttribute("instanceDistanceStart",new m.InterleavedBufferAttribute(u,1,0)),r.setAttribute("instanceDistanceEnd",new m.InterleavedBufferAttribute(u,1,1)),this}}(),raycast:function(){var e=new m.Vector4,t=new m.Vector4,r=new m.Vector4,n=new m.Vector3,o=new m.Matrix4,a=new m.Line3,i=new m.Vector3;return function(s,c){null===s.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var u=void 0!==s.params.Line2&&s.params.Line2.threshold||0,l=s.ray,h=s.camera,d=h.projectionMatrix,f=this.geometry,p=this.material,v=p.resolution,g=p.linewidth+u,y=f.attributes.instanceStart,b=f.attributes.instanceEnd;l.at(1,r),r.w=1,r.applyMatrix4(h.matrixWorldInverse),r.applyMatrix4(d),r.multiplyScalar(1/r.w),r.x*=v.x/2,r.y*=v.y/2,r.z=0,n.copy(r);var M=this.matrixWorld;o.multiplyMatrices(h.matrixWorldInverse,M);for(var A=0,I=y.count;A<I;A++){e.fromBufferAttribute(y,A),t.fromBufferAttribute(b,A),e.w=1,t.w=1,e.applyMatrix4(o),t.applyMatrix4(o),e.applyMatrix4(d),t.applyMatrix4(d),e.multiplyScalar(1/e.w),t.multiplyScalar(1/t.w);var w=e.z<-1&&t.z<-1,D=e.z>1&&t.z>1;if(!w&&!D){e.x*=v.x/2,e.y*=v.y/2,t.x*=v.x/2,t.y*=v.y/2,a.start.copy(e),a.start.z=0,a.end.copy(t),a.end.z=0;var x=a.closestPointToPointParameter(n,!0);a.at(x,i);var T=m.MathUtils.lerp(e.z,t.z,x),S=T>=-1&&T<=1,R=n.distanceTo(i)<.5*g;if(S&&R){a.start.fromBufferAttribute(y,A),a.end.fromBufferAttribute(b,A),a.start.applyMatrix4(M),a.end.applyMatrix4(M);var G=new m.Vector3,E=new m.Vector3;l.distanceSqToSegment(a.start,a.end,E,G),c.push({point:E,pointOnLine:G,distance:l.origin.distanceTo(E),object:this,face:null,faceIndex:A,uv:null,uv2:null})}}}}}()});var A=function(e,t){void 0===e&&(e=new y),void 0===t&&(t=new b({color:16777215*Math.random()})),M.call(this,e,t),this.type="Line2"};A.prototype=Object.assign(Object.create(M.prototype),{constructor:A,isLine2:!0});r(73),r(38);var I=r(166),w=/\bvoid\s+main\s*\(\s*\)\s*{/g;function D(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var r=m.ShaderChunk[t];return r?D(r):e}))}var x=Object.assign||function(){for(var e=arguments[0],t=1,r=arguments.length;t<r;t++){var n=arguments[t];if(n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e},T=Date.now(),S=new WeakMap,R=new Map,G=1e10;function E(e,t){var r=function(e){var t=JSON.stringify(e,P),r=_.get(t);null==r&&_.set(t,r=++F);return r}(t),n=S.get(e);if(n||S.set(e,n=Object.create(null)),n[r])return new n[r];var o="_onBeforeCompile".concat(r),a=function(n){e.onBeforeCompile.call(this,n);var a=r+"|||"+n.vertexShader+"|||"+n.fragmentShader,i=R[a];if(!i){var s=function(e,t,r){var n=e.vertexShader,o=e.fragmentShader,a=t.vertexDefs,i=t.vertexMainIntro,s=t.vertexMainOutro,c=t.vertexTransform,u=t.fragmentDefs,l=t.fragmentMainIntro,h=t.fragmentMainOutro,d=t.fragmentColorTransform,f=t.customRewriter,p=t.timeUniform;a=a||"",i=i||"",s=s||"",u=u||"",l=l||"",h=h||"",(c||f)&&(n=D(n));(d||f)&&(o=D(o=o.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(f){var v=f({vertexShader:n,fragmentShader:o});n=v.vertexShader,o=v.fragmentShader}if(d){var m=[];o=o.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(function(e){return m.push(e),""})),h="".concat(d,"\n").concat(m.join("\n"),"\n").concat(h)}if(p){var g="\nuniform float ".concat(p,";\n");a=g+a,u=g+u}c&&(a="".concat(a,"\nvec3 troika_position_").concat(r,";\nvec3 troika_normal_").concat(r,";\nvec2 troika_uv_").concat(r,";\nvoid troikaVertexTransform").concat(r,"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ").concat(c,"\n}\n"),i="\ntroika_position_".concat(r," = vec3(position);\ntroika_normal_").concat(r," = vec3(normal);\ntroika_uv_").concat(r," = vec2(uv);\ntroikaVertexTransform").concat(r,"(troika_position_").concat(r,", troika_normal_").concat(r,", troika_uv_").concat(r,");\n").concat(i,"\n"),n=n.replace(/\b(position|normal|uv)\b/g,(function(e,t,n,o){return/\battribute\s+vec[23]\s+$/.test(o.substr(0,n))?t:"troika_".concat(t,"_").concat(r)})));return n=O(n,r,a,i,s),o=O(o,r,u,l,h),{vertexShader:n,fragmentShader:o}}(n,t,r);i=R[a]=s}n.vertexShader=i.vertexShader,n.fragmentShader=i.fragmentShader,x(n.uniforms,this.uniforms),t.timeUniform&&(n.uniforms[t.timeUniform]={get value(){return Date.now()-T}}),this[o]&&this[o](n)},i=function(){return s(t.chained?e:e.clone())},s=function(n){var o=Object.create(n,c);return Object.defineProperty(o,"baseMaterial",{value:e}),Object.defineProperty(o,"id",{value:G++}),o.uuid=m.MathUtils.generateUUID(),o.uniforms=x({},n.uniforms,t.uniforms),o.defines=x({},n.defines,t.defines),o.defines["TROIKA_DERIVED_MATERIAL_".concat(r)]="",o.extensions=x({},n.extensions,t.extensions),o._listeners=void 0,o},c={constructor:{value:i},isDerivedMaterial:{value:!0},customProgramCacheKey:{value:function(){return r}},onBeforeCompile:{get:function(){return a},set:function(e){this[o]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(x(this.extensions,t.extensions),x(this.defines,t.defines),x(this.uniforms,m.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){var t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){var r=this._depthMaterial;return r||((r=this._depthMaterial=E(e.isDerivedMaterial?e.getDepthMaterial():new m.MeshDepthMaterial({depthPacking:m.RGBADepthPacking}),t)).defines.IS_DEPTH_MATERIAL="",r.uniforms=this.uniforms),r}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){var r=this._distanceMaterial;return r||((r=this._distanceMaterial=E(e.isDerivedMaterial?e.getDistanceMaterial():new m.MeshDistanceMaterial,t)).defines.IS_DISTANCE_MATERIAL="",r.uniforms=this.uniforms),r}},dispose:{writable:!0,configurable:!0,value:function(){var t=this._depthMaterial,r=this._distanceMaterial;t&&t.dispose(),r&&r.dispose(),e.dispose.call(this)}}};return n[r]=i,new i}function O(e,t,r,n,o){return(n||o||r)&&(e=e.replace(w,"\n".concat(r,"\nvoid troikaOrigMain").concat(t,"() {")),e+="\nvoid main() {\n  ".concat(n,"\n  troikaOrigMain").concat(t,"();\n  ").concat(o,"\n}")),e}function P(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}var F=0,_=new Map;var k=null,U=new m.MeshStandardMaterial({color:16777215,side:m.DoubleSide});m.Mesh;var V=Object(I.b)({name:"Typr Font Parser",dependencies:[function(){var e=self,t={parse:function(e){var r=t._bin,n=new Uint8Array(e);if("ttcf"==r.readASCII(n,0,4)){var o=4;r.readUshort(n,o);o+=2;r.readUshort(n,o);o+=2;var a=r.readUint(n,o);o+=4;for(var i=[],s=0;s<a;s++){var c=r.readUint(n,o);o+=4,i.push(t._readFont(n,c))}return i}return[t._readFont(n,0)]},_readFont:function(e,r){var n=t._bin,o=r;n.readFixed(e,r);r+=4;var a=n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:o},c={},u=0;u<a;u++){var l=n.readASCII(e,r,4);r+=4;n.readUint(e,r);r+=4;var h=n.readUint(e,r);r+=4;var d=n.readUint(e,r);r+=4,c[l]={offset:h,length:d}}for(u=0;u<i.length;u++){var f=i[u];c[f]&&(s[f.trim()]=t[f.trim()].parse(e,c[f].offset,c[f].length,s))}return s},_tabOffset:function(e,r,n){for(var o=t._bin,a=o.readUshort(e,n+4),i=n+12,s=0;s<a;s++){var c=o.readASCII(e,i,4);i+=4;o.readUint(e,i);i+=4;var u=o.readUint(e,i);i+=4;o.readUint(e,i);if(i+=4,c==r)return u}return 0}};return t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,r){return t._bin.readShort(e,r)/16384},readInt:function(e,r){var n=t._bin.t.uint8;return n[0]=e[r+3],n[1]=e[r+2],n[2]=e[r+1],n[3]=e[r],t._bin.t.int32[0]},readInt8:function(e,r){return t._bin.t.uint8[0]=e[r],t._bin.t.int8[0]},readShort:function(e,r){var n=t._bin.t.uint8;return n[1]=e[r],n[0]=e[r+1],t._bin.t.int16[0]},readUshort:function(e,t){return e[t]<<8|e[t+1]},readUshorts:function(e,r,n){for(var o=[],a=0;a<n;a++)o.push(t._bin.readUshort(e,r+2*a));return o},readUint:function(e,r){var n=t._bin.t.uint8;return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t._bin.t.uint32[0]},readUint64:function(e,r){return 4294967296*t._bin.readUint(e,r)+t._bin.readUint(e,r+4)},readASCII:function(e,t,r){for(var n="",o=0;o<r;o++)n+=String.fromCharCode(e[t+o]);return n},readUnicode:function(e,t,r){for(var n="",o=0;o<r;o++){var a=e[t++]<<8|e[t++];n+=String.fromCharCode(a)}return n},_tdec:e.TextDecoder?new e.TextDecoder:null,readUTF8:function(e,r,n){var o=t._bin._tdec;return o&&0==r&&n==e.length?o.decode(e):t._bin.readASCII(e,r,n)},readBytes:function(e,t,r){for(var n=[],o=0;o<r;o++)n.push(e[t+o]);return n},readASCIIArray:function(e,t,r){for(var n=[],o=0;o<r;o++)n.push(String.fromCharCode(e[t+o]));return n}},t._bin.t={buff:new ArrayBuffer(8)},t._bin.t.int8=new Int8Array(t._bin.t.buff),t._bin.t.uint8=new Uint8Array(t._bin.t.buff),t._bin.t.int16=new Int16Array(t._bin.t.buff),t._bin.t.uint16=new Uint16Array(t._bin.t.buff),t._bin.t.int32=new Int32Array(t._bin.t.buff),t._bin.t.uint32=new Uint32Array(t._bin.t.buff),t._lctf={},t._lctf.parse=function(e,r,n,o,a){var i=t._bin,s={},c=r;i.readFixed(e,r);r+=4;var u=i.readUshort(e,r);r+=2;var l=i.readUshort(e,r);r+=2;var h=i.readUshort(e,r);return r+=2,s.scriptList=t._lctf.readScriptList(e,c+u),s.featureList=t._lctf.readFeatureList(e,c+l),s.lookupList=t._lctf.readLookupList(e,c+h,a),s},t._lctf.readLookupList=function(e,r,n){var o=t._bin,a=r,i=[],s=o.readUshort(e,r);r+=2;for(var c=0;c<s;c++){var u=o.readUshort(e,r);r+=2;var l=t._lctf.readLookupTable(e,a+u,n);i.push(l)}return i},t._lctf.readLookupTable=function(e,r,n){var o=t._bin,a=r,i={tabs:[]};i.ltype=o.readUshort(e,r),r+=2,i.flag=o.readUshort(e,r),r+=2;var s=o.readUshort(e,r);r+=2;for(var c=0;c<s;c++){var u=o.readUshort(e,r);r+=2;var l=n(e,i.ltype,a+u);i.tabs.push(l)}return i},t._lctf.numOfOnes=function(e){for(var t=0,r=0;r<32;r++)0!=(e>>>r&1)&&t++;return t},t._lctf.readClassDef=function(e,r){var n=t._bin,o=[],a=n.readUshort(e,r);if(r+=2,1==a){var i=n.readUshort(e,r);r+=2;var s=n.readUshort(e,r);r+=2;for(var c=0;c<s;c++)o.push(i+c),o.push(i+c),o.push(n.readUshort(e,r)),r+=2}if(2==a){var u=n.readUshort(e,r);r+=2;for(c=0;c<u;c++)o.push(n.readUshort(e,r)),r+=2,o.push(n.readUshort(e,r)),r+=2,o.push(n.readUshort(e,r)),r+=2}return o},t._lctf.getInterval=function(e,t){for(var r=0;r<e.length;r+=3){var n=e[r],o=e[r+1];e[r+2];if(n<=t&&t<=o)return r}return-1},t._lctf.readCoverage=function(e,r){var n=t._bin,o={};o.fmt=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);return r+=2,1==o.fmt&&(o.tab=n.readUshorts(e,r,a)),2==o.fmt&&(o.tab=n.readUshorts(e,r,3*a)),o},t._lctf.coverageIndex=function(e,r){var n=e.tab;if(1==e.fmt)return n.indexOf(r);if(2==e.fmt){var o=t._lctf.getInterval(n,r);if(-1!=o)return n[o+2]+(r-n[o])}return-1},t._lctf.readFeatureList=function(e,r){var n=t._bin,o=r,a=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,a.push({tag:c.trim(),tab:t._lctf.readFeatureTable(e,o+u)})}return a},t._lctf.readFeatureTable=function(e,r){var n=t._bin;n.readUshort(e,r);r+=2;var o=n.readUshort(e,r);r+=2;for(var a=[],i=0;i<o;i++)a.push(n.readUshort(e,r+2*i));return a},t._lctf.readScriptList=function(e,r){var n=t._bin,o=r,a={},i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,a[c.trim()]=t._lctf.readScriptTable(e,o+u)}return a},t._lctf.readScriptTable=function(e,r){var n=t._bin,o=r,a={},i=n.readUshort(e,r);r+=2,a.default=t._lctf.readLangSysTable(e,o+i);var s=n.readUshort(e,r);r+=2;for(var c=0;c<s;c++){var u=n.readASCII(e,r,4);r+=4;var l=n.readUshort(e,r);r+=2,a[u.trim()]=t._lctf.readLangSysTable(e,o+l)}return a},t._lctf.readLangSysTable=function(e,r){var n=t._bin,o={};n.readUshort(e,r);r+=2,o.reqFeature=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);return r+=2,o.features=n.readUshorts(e,r,a),o},t.CFF={},t.CFF.parse=function(e,r,n){var o=t._bin;(e=new Uint8Array(e.buffer,r,n))[r=0],e[++r],e[++r],e[++r];r++;var a=[];r=t.CFF.readIndex(e,r,a);for(var i=[],s=0;s<a.length-1;s++)i.push(o.readASCII(e,r+a[s],a[s+1]-a[s]));r+=a[a.length-1];var c=[];r=t.CFF.readIndex(e,r,c);var u=[];for(s=0;s<c.length-1;s++)u.push(t.CFF.readDict(e,r+c[s],r+c[s+1]));r+=c[c.length-1];var l=u[0],h=[];r=t.CFF.readIndex(e,r,h);var d=[];for(s=0;s<h.length-1;s++)d.push(o.readASCII(e,r+h[s],h[s+1]-h[s]));if(r+=h[h.length-1],t.CFF.readSubrs(e,r,l),l.CharStrings){r=l.CharStrings;h=[];r=t.CFF.readIndex(e,r,h);var f=[];for(s=0;s<h.length-1;s++)f.push(o.readBytes(e,r+h[s],h[s+1]-h[s]));l.CharStrings=f}if(l.ROS){r=l.FDArray;var p=[];r=t.CFF.readIndex(e,r,p),l.FDArray=[];for(s=0;s<p.length-1;s++){var v=t.CFF.readDict(e,r+p[s],r+p[s+1]);t.CFF._readFDict(e,v,d),l.FDArray.push(v)}r+=p[p.length-1],r=l.FDSelect,l.FDSelect=[];var m=e[r];if(r++,3!=m)throw m;var g=o.readUshort(e,r);r+=2;for(s=0;s<g+1;s++)l.FDSelect.push(o.readUshort(e,r),e[r+2]),r+=3}return l.Encoding&&(l.Encoding=t.CFF.readEncoding(e,l.Encoding,l.CharStrings.length)),l.charset&&(l.charset=t.CFF.readCharset(e,l.charset,l.CharStrings.length)),t.CFF._readFDict(e,l,d),l},t.CFF._readFDict=function(e,r,n){var o;for(var a in r.Private&&(o=r.Private[1],r.Private=t.CFF.readDict(e,o,o+r.Private[0]),r.Private.Subrs&&t.CFF.readSubrs(e,o+r.Private.Subrs,r.Private)),r)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(a)&&(r[a]=n[r[a]-426+35])},t.CFF.readSubrs=function(e,r,n){var o=t._bin,a=[];r=t.CFF.readIndex(e,r,a);var i,s=a.length;i=s<1240?107:s<33900?1131:32768,n.Bias=i,n.Subrs=[];for(var c=0;c<a.length-1;c++)n.Subrs.push(o.readBytes(e,r+a[c],a[c+1]-a[c]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var r=0;r<e.charset.length;r++)if(e.charset[r]==t)return r;return-1},t.CFF.glyphBySE=function(e,r){return r<0||r>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[r])},t.CFF.readEncoding=function(e,r,n){t._bin;var o=[".notdef"],a=e[r];if(r++,0!=a)throw"error: unknown encoding format: "+a;var i=e[r];r++;for(var s=0;s<i;s++)o.push(e[r+s]);return o},t.CFF.readCharset=function(e,r,n){var o=t._bin,a=[".notdef"],i=e[r];if(r++,0==i)for(var s=0;s<n;s++){var c=o.readUshort(e,r);r+=2,a.push(c)}else{if(1!=i&&2!=i)throw"error: format: "+i;for(;a.length<n;){c=o.readUshort(e,r);r+=2;var u=0;1==i?(u=e[r],r++):(u=o.readUshort(e,r),r+=2);for(s=0;s<=u;s++)a.push(c),c++}}return a},t.CFF.readIndex=function(e,r,n){var o=t._bin,a=o.readUshort(e,r)+1,i=e[r+=2];if(r++,1==i)for(var s=0;s<a;s++)n.push(e[r+s]);else if(2==i)for(s=0;s<a;s++)n.push(o.readUshort(e,r+2*s));else if(3==i)for(s=0;s<a;s++)n.push(16777215&o.readUint(e,r+3*s-1));else if(1!=a)throw"unsupported offset size: "+i+", count: "+a;return(r+=a*i)-1},t.CFF.getCharString=function(e,r,n){var o=t._bin,a=e[r],i=e[r+1],s=(e[r+2],e[r+3],e[r+4],1),c=null,u=null;a<=20&&(c=a,s=1),12==a&&(c=100*a+i,s=2),21<=a&&a<=27&&(c=a,s=1),28==a&&(u=o.readShort(e,r+1),s=3),29<=a&&a<=31&&(c=a,s=1),32<=a&&a<=246&&(u=a-139,s=1),247<=a&&a<=250&&(u=256*(a-247)+i+108,s=2),251<=a&&a<=254&&(u=256*-(a-251)-i-108,s=2),255==a&&(u=o.readInt(e,r+1)/65535,s=5),n.val=null!=u?u:"o"+c,n.size=s},t.CFF.readCharString=function(e,r,n){for(var o=r+n,a=t._bin,i=[];r<o;){var s=e[r],c=e[r+1],u=(e[r+2],e[r+3],e[r+4],1),l=null,h=null;s<=20&&(l=s,u=1),12==s&&(l=100*s+c,u=2),19!=s&&20!=s||(l=s,u=2),21<=s&&s<=27&&(l=s,u=1),28==s&&(h=a.readShort(e,r+1),u=3),29<=s&&s<=31&&(l=s,u=1),32<=s&&s<=246&&(h=s-139,u=1),247<=s&&s<=250&&(h=256*(s-247)+c+108,u=2),251<=s&&s<=254&&(h=256*-(s-251)-c-108,u=2),255==s&&(h=a.readInt(e,r+1)/65535,u=5),i.push(null!=h?h:"o"+l),r+=u}return i},t.CFF.readDict=function(e,r,n){for(var o=t._bin,a={},i=[];r<n;){var s=e[r],c=e[r+1],u=(e[r+2],e[r+3],e[r+4],1),l=null,h=null;if(28==s&&(h=o.readShort(e,r+1),u=3),29==s&&(h=o.readInt(e,r+1),u=5),32<=s&&s<=246&&(h=s-139,u=1),247<=s&&s<=250&&(h=256*(s-247)+c+108,u=2),251<=s&&s<=254&&(h=256*-(s-251)-c-108,u=2),255==s)throw h=o.readInt(e,r+1)/65535,u=5,"unknown number";if(30==s){var d=[];for(u=1;;){var f=e[r+u];u++;var p=f>>4,v=15&f;if(15!=p&&d.push(p),15!=v&&d.push(v),15==v)break}for(var m="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)m+=g[d[y]];h=parseFloat(m)}if(s<=21)if(l=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,12==s)l=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],u=2;null!=l?(a[l]=1==i.length?i[0]:i,i=[]):i.push(h),r+=u}return a},t.cmap={},t.cmap.parse=function(e,r,n){e=new Uint8Array(e.buffer,r,n),r=0;var o=t._bin,a={};o.readUshort(e,r);r+=2;var i=o.readUshort(e,r);r+=2;var s=[];a.tables=[];for(var c=0;c<i;c++){var u=o.readUshort(e,r);r+=2;var l=o.readUshort(e,r);r+=2;var h=o.readUint(e,r);r+=4;var d="p"+u+"e"+l,f=s.indexOf(h);if(-1==f){var p;f=a.tables.length,s.push(h);var v=o.readUshort(e,h);0==v?p=t.cmap.parse0(e,h):4==v?p=t.cmap.parse4(e,h):6==v?p=t.cmap.parse6(e,h):12==v?p=t.cmap.parse12(e,h):console.log("unknown format: "+v,u,l,h),a.tables.push(p)}if(null!=a[d])throw"multiple tables for one platform+encoding";a[d]=f}return a},t.cmap.parse0=function(e,r){var n=t._bin,o={};o.format=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2,o.map=[];for(var i=0;i<a-6;i++)o.map.push(e[r+i]);return o},t.cmap.parse4=function(e,r){var n=t._bin,o=r,a={};a.format=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2;var s=n.readUshort(e,r);r+=2;var c=s/2;a.searchRange=n.readUshort(e,r),r+=2,a.entrySelector=n.readUshort(e,r),r+=2,a.rangeShift=n.readUshort(e,r),r+=2,a.endCount=n.readUshorts(e,r,c),r+=2*c,r+=2,a.startCount=n.readUshorts(e,r,c),r+=2*c,a.idDelta=[];for(var u=0;u<c;u++)a.idDelta.push(n.readShort(e,r)),r+=2;for(a.idRangeOffset=n.readUshorts(e,r,c),r+=2*c,a.glyphIdArray=[];r<o+i;)a.glyphIdArray.push(n.readUshort(e,r)),r+=2;return a},t.cmap.parse6=function(e,r){var n=t._bin,o={};o.format=n.readUshort(e,r),r+=2;n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2,o.firstCode=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);r+=2,o.glyphIdArray=[];for(var i=0;i<a;i++)o.glyphIdArray.push(n.readUshort(e,r)),r+=2;return o},t.cmap.parse12=function(e,r){var n=t._bin,o={};o.format=n.readUshort(e,r),r+=2,r+=2;n.readUint(e,r);r+=4;n.readUint(e,r);r+=4;var a=n.readUint(e,r);r+=4,o.groups=[];for(var i=0;i<a;i++){var s=r+12*i,c=n.readUint(e,s+0),u=n.readUint(e,s+4),l=n.readUint(e,s+8);o.groups.push([c,u,l])}return o},t.glyf={},t.glyf.parse=function(e,t,r,n){for(var o=[],a=0;a<n.maxp.numGlyphs;a++)o.push(null);return o},t.glyf._parseGlyf=function(e,r){var n=t._bin,o=e._data,a=t._tabOffset(o,"glyf",e._offset)+e.loca[r];if(e.loca[r]==e.loca[r+1])return null;var i={};if(i.noc=n.readShort(o,a),a+=2,i.xMin=n.readShort(o,a),a+=2,i.yMin=n.readShort(o,a),a+=2,i.xMax=n.readShort(o,a),a+=2,i.yMax=n.readShort(o,a),a+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var s=0;s<i.noc;s++)i.endPts.push(n.readUshort(o,a)),a+=2;var c=n.readUshort(o,a);if(a+=2,o.length-a<c)return null;i.instructions=n.readBytes(o,a,c),a+=c;var u=i.endPts[i.noc-1]+1;i.flags=[];for(s=0;s<u;s++){var l=o[a];if(a++,i.flags.push(l),0!=(8&l)){var h=o[a];a++;for(var d=0;d<h;d++)i.flags.push(l),s++}}i.xs=[];for(s=0;s<u;s++){var f=0!=(2&i.flags[s]),p=0!=(16&i.flags[s]);f?(i.xs.push(p?o[a]:-o[a]),a++):p?i.xs.push(0):(i.xs.push(n.readShort(o,a)),a+=2)}i.ys=[];for(s=0;s<u;s++){f=0!=(4&i.flags[s]),p=0!=(32&i.flags[s]);f?(i.ys.push(p?o[a]:-o[a]),a++):p?i.ys.push(0):(i.ys.push(n.readShort(o,a)),a+=2)}var v=0,m=0;for(s=0;s<u;s++)v+=i.xs[s],m+=i.ys[s],i.xs[s]=v,i.ys[s]=m}else{var g;i.parts=[];do{g=n.readUshort(o,a),a+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(y),y.glyphIndex=n.readUshort(o,a),a+=2,1&g){var b=n.readShort(o,a);a+=2;var M=n.readShort(o,a);a+=2}else{b=n.readInt8(o,a);a++;M=n.readInt8(o,a);a++}2&g?(y.m.tx=b,y.m.ty=M):(y.p1=b,y.p2=M),8&g?(y.m.a=y.m.d=n.readF2dot14(o,a),a+=2):64&g?(y.m.a=n.readF2dot14(o,a),a+=2,y.m.d=n.readF2dot14(o,a),a+=2):128&g&&(y.m.a=n.readF2dot14(o,a),a+=2,y.m.b=n.readF2dot14(o,a),a+=2,y.m.c=n.readF2dot14(o,a),a+=2,y.m.d=n.readF2dot14(o,a),a+=2)}while(32&g);if(256&g){var A=n.readUshort(o,a);a+=2,i.instr=[];for(s=0;s<A;s++)i.instr.push(o[a]),a++}}return i},t.GPOS={},t.GPOS.parse=function(e,r,n,o){return t._lctf.parse(e,r,n,o,t.GPOS.subt)},t.GPOS.subt=function(e,r,n){var o=t._bin,a=n,i={};if(i.fmt=o.readUshort(e,n),n+=2,1==r||2==r||3==r||7==r||8==r&&i.fmt<=2){var s=o.readUshort(e,n);n+=2,i.coverage=t._lctf.readCoverage(e,s+a)}if(1==r&&1==i.fmt){var c=o.readUshort(e,n);n+=2;var u=t._lctf.numOfOnes(c);0!=c&&(i.pos=t.GPOS.readValueRecord(e,n,c))}else if(2==r){c=o.readUshort(e,n);n+=2;var l=o.readUshort(e,n);n+=2;u=t._lctf.numOfOnes(c);var h=t._lctf.numOfOnes(l);if(1==i.fmt){i.pairsets=[];var d=o.readUshort(e,n);n+=2;for(var f=0;f<d;f++){var p=a+o.readUshort(e,n);n+=2;var v=o.readUshort(e,p);p+=2;for(var m=[],g=0;g<v;g++){var y=o.readUshort(e,p);p+=2,0!=c&&(D=t.GPOS.readValueRecord(e,p,c),p+=2*u),0!=l&&(x=t.GPOS.readValueRecord(e,p,l),p+=2*h),m.push({gid2:y,val1:D,val2:x})}i.pairsets.push(m)}}if(2==i.fmt){var b=o.readUshort(e,n);n+=2;var M=o.readUshort(e,n);n+=2;var A=o.readUshort(e,n);n+=2;var I=o.readUshort(e,n);n+=2,i.classDef1=t._lctf.readClassDef(e,a+b),i.classDef2=t._lctf.readClassDef(e,a+M),i.matrix=[];for(f=0;f<A;f++){var w=[];for(g=0;g<I;g++){var D=null,x=null;0!=i.valFmt1&&(D=t.GPOS.readValueRecord(e,n,i.valFmt1),n+=2*u),0!=i.valFmt2&&(x=t.GPOS.readValueRecord(e,n,i.valFmt2),n+=2*h),w.push({val1:D,val2:x})}i.matrix.push(w)}}}return i},t.GPOS.readValueRecord=function(e,r,n){var o=t._bin,a=[];return a.push(1&n?o.readShort(e,r):0),r+=1&n?2:0,a.push(2&n?o.readShort(e,r):0),r+=2&n?2:0,a.push(4&n?o.readShort(e,r):0),r+=4&n?2:0,a.push(8&n?o.readShort(e,r):0),r+=8&n?2:0,a},t.GSUB={},t.GSUB.parse=function(e,r,n,o){return t._lctf.parse(e,r,n,o,t.GSUB.subt)},t.GSUB.subt=function(e,r,n){var o=t._bin,a=n,i={};if(i.fmt=o.readUshort(e,n),n+=2,1!=r&&4!=r&&5!=r&&6!=r)return null;if(1==r||4==r||5==r&&i.fmt<=2||6==r&&i.fmt<=2){var s=o.readUshort(e,n);n+=2,i.coverage=t._lctf.readCoverage(e,a+s)}if(1==r){if(1==i.fmt)i.delta=o.readShort(e,n),n+=2;else if(2==i.fmt){var c=o.readUshort(e,n);n+=2,i.newg=o.readUshorts(e,n,c),n+=2*i.newg.length}}else if(4==r){i.vals=[];c=o.readUshort(e,n);n+=2;for(var u=0;u<c;u++){var l=o.readUshort(e,n);n+=2,i.vals.push(t.GSUB.readLigatureSet(e,a+l))}}else if(5==r){if(2==i.fmt){var h=o.readUshort(e,n);n+=2,i.cDef=t._lctf.readClassDef(e,a+h),i.scset=[];var d=o.readUshort(e,n);n+=2;for(u=0;u<d;u++){var f=o.readUshort(e,n);n+=2,i.scset.push(0==f?null:t.GSUB.readSubClassSet(e,a+f))}}}else if(6==r&&3==i.fmt){for(u=0;u<3;u++){c=o.readUshort(e,n);n+=2;for(var p=[],v=0;v<c;v++)p.push(t._lctf.readCoverage(e,a+o.readUshort(e,n+2*v)));n+=2*c,0==u&&(i.backCvg=p),1==u&&(i.inptCvg=p),2==u&&(i.ahedCvg=p)}c=o.readUshort(e,n);n+=2,i.lookupRec=t.GSUB.readSubstLookupRecords(e,n,c)}return i},t.GSUB.readSubClassSet=function(e,r){var n=t._bin.readUshort,o=r,a=[],i=n(e,r);r+=2;for(var s=0;s<i;s++){var c=n(e,r);r+=2,a.push(t.GSUB.readSubClassRule(e,o+c))}return a},t.GSUB.readSubClassRule=function(e,r){var n=t._bin.readUshort,o={},a=n(e,r),i=n(e,r+=2);r+=2,o.input=[];for(var s=0;s<a-1;s++)o.input.push(n(e,r)),r+=2;return o.substLookupRecords=t.GSUB.readSubstLookupRecords(e,r,i),o},t.GSUB.readSubstLookupRecords=function(e,r,n){for(var o=t._bin.readUshort,a=[],i=0;i<n;i++)a.push(o(e,r),o(e,r+2)),r+=4;return a},t.GSUB.readChainSubClassSet=function(e,r){var n=t._bin,o=r,a=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=n.readUshort(e,r);r+=2,a.push(t.GSUB.readChainSubClassRule(e,o+c))}return a},t.GSUB.readChainSubClassRule=function(e,r){for(var n=t._bin,o={},a=["backtrack","input","lookahead"],i=0;i<a.length;i++){var s=n.readUshort(e,r);r+=2,1==i&&s--,o[a[i]]=n.readUshorts(e,r,s),r+=2*o[a[i]].length}s=n.readUshort(e,r);return r+=2,o.subst=n.readUshorts(e,r,2*s),r+=2*o.subst.length,o},t.GSUB.readLigatureSet=function(e,r){var n=t._bin,o=r,a=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=n.readUshort(e,r);r+=2,a.push(t.GSUB.readLigature(e,o+c))}return a},t.GSUB.readLigature=function(e,r){var n=t._bin,o={chain:[]};o.nglyph=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);r+=2;for(var i=0;i<a-1;i++)o.chain.push(n.readUshort(e,r)),r+=2;return o},t.head={},t.head.parse=function(e,r,n){var o=t._bin,a={};o.readFixed(e,r);r+=4,a.fontRevision=o.readFixed(e,r),r+=4;o.readUint(e,r);r+=4;o.readUint(e,r);return r+=4,a.flags=o.readUshort(e,r),r+=2,a.unitsPerEm=o.readUshort(e,r),r+=2,a.created=o.readUint64(e,r),r+=8,a.modified=o.readUint64(e,r),r+=8,a.xMin=o.readShort(e,r),r+=2,a.yMin=o.readShort(e,r),r+=2,a.xMax=o.readShort(e,r),r+=2,a.yMax=o.readShort(e,r),r+=2,a.macStyle=o.readUshort(e,r),r+=2,a.lowestRecPPEM=o.readUshort(e,r),r+=2,a.fontDirectionHint=o.readShort(e,r),r+=2,a.indexToLocFormat=o.readShort(e,r),r+=2,a.glyphDataFormat=o.readShort(e,r),r+=2,a},t.hhea={},t.hhea.parse=function(e,r,n){var o=t._bin,a={};o.readFixed(e,r);return r+=4,a.ascender=o.readShort(e,r),r+=2,a.descender=o.readShort(e,r),r+=2,a.lineGap=o.readShort(e,r),r+=2,a.advanceWidthMax=o.readUshort(e,r),r+=2,a.minLeftSideBearing=o.readShort(e,r),r+=2,a.minRightSideBearing=o.readShort(e,r),r+=2,a.xMaxExtent=o.readShort(e,r),r+=2,a.caretSlopeRise=o.readShort(e,r),r+=2,a.caretSlopeRun=o.readShort(e,r),r+=2,a.caretOffset=o.readShort(e,r),r+=2,r+=8,a.metricDataFormat=o.readShort(e,r),r+=2,a.numberOfHMetrics=o.readUshort(e,r),r+=2,a},t.hmtx={},t.hmtx.parse=function(e,r,n,o){for(var a=t._bin,i={aWidth:[],lsBearing:[]},s=0,c=0,u=0;u<o.maxp.numGlyphs;u++)u<o.hhea.numberOfHMetrics&&(s=a.readUshort(e,r),r+=2,c=a.readShort(e,r),r+=2),i.aWidth.push(s),i.lsBearing.push(c);return i},t.kern={},t.kern.parse=function(e,r,n,o){var a=t._bin,i=a.readUshort(e,r);if(r+=2,1==i)return t.kern.parseV1(e,r-2,n,o);var s=a.readUshort(e,r);r+=2;for(var c={glyph1:[],rval:[]},u=0;u<s;u++){r+=2;n=a.readUshort(e,r);r+=2;var l=a.readUshort(e,r);r+=2;var h=l>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;r=t.kern.readFormat0(e,r,c)}return c},t.kern.parseV1=function(e,r,n,o){var a=t._bin;a.readFixed(e,r);r+=4;var i=a.readUint(e,r);r+=4;for(var s={glyph1:[],rval:[]},c=0;c<i;c++){a.readUint(e,r);r+=4;var u=a.readUshort(e,r);r+=2;a.readUshort(e,r);r+=2;var l=u>>>8;if(0!=(l&=15))throw"unknown kern table format: "+l;r=t.kern.readFormat0(e,r,s)}return s},t.kern.readFormat0=function(e,r,n){var o=t._bin,a=-1,i=o.readUshort(e,r);r+=2;o.readUshort(e,r);r+=2;o.readUshort(e,r);r+=2;o.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var c=o.readUshort(e,r);r+=2;var u=o.readUshort(e,r);r+=2;var l=o.readShort(e,r);r+=2,c!=a&&(n.glyph1.push(c),n.rval.push({glyph2:[],vals:[]}));var h=n.rval[n.rval.length-1];h.glyph2.push(u),h.vals.push(l),a=c}return r},t.loca={},t.loca.parse=function(e,r,n,o){var a=t._bin,i=[],s=o.head.indexToLocFormat,c=o.maxp.numGlyphs+1;if(0==s)for(var u=0;u<c;u++)i.push(a.readUshort(e,r+(u<<1))<<1);if(1==s)for(u=0;u<c;u++)i.push(a.readUint(e,r+(u<<2)));return i},t.maxp={},t.maxp.parse=function(e,r,n){var o=t._bin,a={},i=o.readUint(e,r);return r+=4,a.numGlyphs=o.readUshort(e,r),r+=2,65536==i&&(a.maxPoints=o.readUshort(e,r),r+=2,a.maxContours=o.readUshort(e,r),r+=2,a.maxCompositePoints=o.readUshort(e,r),r+=2,a.maxCompositeContours=o.readUshort(e,r),r+=2,a.maxZones=o.readUshort(e,r),r+=2,a.maxTwilightPoints=o.readUshort(e,r),r+=2,a.maxStorage=o.readUshort(e,r),r+=2,a.maxFunctionDefs=o.readUshort(e,r),r+=2,a.maxInstructionDefs=o.readUshort(e,r),r+=2,a.maxStackElements=o.readUshort(e,r),r+=2,a.maxSizeOfInstructions=o.readUshort(e,r),r+=2,a.maxComponentElements=o.readUshort(e,r),r+=2,a.maxComponentDepth=o.readUshort(e,r),r+=2),a},t.name={},t.name.parse=function(e,r,n){var o=t._bin,a={};o.readUshort(e,r);r+=2;var i=o.readUshort(e,r);r+=2;o.readUshort(e,r);for(var s,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=r+=2,l=0;l<i;l++){var h=o.readUshort(e,r);r+=2;var d=o.readUshort(e,r);r+=2;var f=o.readUshort(e,r);r+=2;var p=o.readUshort(e,r);r+=2;var v=o.readUshort(e,r);r+=2;var m=o.readUshort(e,r);r+=2;var g,y=c[p],b=u+12*i+m;if(0==h)g=o.readUnicode(e,b,v/2);else if(3==h&&0==d)g=o.readUnicode(e,b,v/2);else if(0==d)g=o.readASCII(e,b,v);else if(1==d)g=o.readUnicode(e,b,v/2);else if(3==d)g=o.readUnicode(e,b,v/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;g=o.readASCII(e,b,v),console.log("reading unknown MAC encoding "+d+" as ASCII")}var M="p"+h+","+f.toString(16);null==a[M]&&(a[M]={}),a[M][y]=g,a[M]._lang=f}for(var A in a)if(null!=a[A].postScriptName&&1033==a[A]._lang)return a[A];for(var A in a)if(null!=a[A].postScriptName&&0==a[A]._lang)return a[A];for(var A in a)if(null!=a[A].postScriptName&&3084==a[A]._lang)return a[A];for(var A in a)if(null!=a[A].postScriptName)return a[A];for(var A in a){s=A;break}return console.log("returning name table with languageID "+a[s]._lang),a[s]},t["OS/2"]={},t["OS/2"].parse=function(e,r,n){var o=t._bin.readUshort(e,r);r+=2;var a={};if(0==o)t["OS/2"].version0(e,r,a);else if(1==o)t["OS/2"].version1(e,r,a);else if(2==o||3==o||4==o)t["OS/2"].version2(e,r,a);else{if(5!=o)throw"unknown OS/2 table version: "+o;t["OS/2"].version5(e,r,a)}return a},t["OS/2"].version0=function(e,r,n){var o=t._bin;return n.xAvgCharWidth=o.readShort(e,r),r+=2,n.usWeightClass=o.readUshort(e,r),r+=2,n.usWidthClass=o.readUshort(e,r),r+=2,n.fsType=o.readUshort(e,r),r+=2,n.ySubscriptXSize=o.readShort(e,r),r+=2,n.ySubscriptYSize=o.readShort(e,r),r+=2,n.ySubscriptXOffset=o.readShort(e,r),r+=2,n.ySubscriptYOffset=o.readShort(e,r),r+=2,n.ySuperscriptXSize=o.readShort(e,r),r+=2,n.ySuperscriptYSize=o.readShort(e,r),r+=2,n.ySuperscriptXOffset=o.readShort(e,r),r+=2,n.ySuperscriptYOffset=o.readShort(e,r),r+=2,n.yStrikeoutSize=o.readShort(e,r),r+=2,n.yStrikeoutPosition=o.readShort(e,r),r+=2,n.sFamilyClass=o.readShort(e,r),r+=2,n.panose=o.readBytes(e,r,10),r+=10,n.ulUnicodeRange1=o.readUint(e,r),r+=4,n.ulUnicodeRange2=o.readUint(e,r),r+=4,n.ulUnicodeRange3=o.readUint(e,r),r+=4,n.ulUnicodeRange4=o.readUint(e,r),r+=4,n.achVendID=[o.readInt8(e,r),o.readInt8(e,r+1),o.readInt8(e,r+2),o.readInt8(e,r+3)],r+=4,n.fsSelection=o.readUshort(e,r),r+=2,n.usFirstCharIndex=o.readUshort(e,r),r+=2,n.usLastCharIndex=o.readUshort(e,r),r+=2,n.sTypoAscender=o.readShort(e,r),r+=2,n.sTypoDescender=o.readShort(e,r),r+=2,n.sTypoLineGap=o.readShort(e,r),r+=2,n.usWinAscent=o.readUshort(e,r),r+=2,n.usWinDescent=o.readUshort(e,r),r+=2},t["OS/2"].version1=function(e,r,n){var o=t._bin;return r=t["OS/2"].version0(e,r,n),n.ulCodePageRange1=o.readUint(e,r),r+=4,n.ulCodePageRange2=o.readUint(e,r),r+=4},t["OS/2"].version2=function(e,r,n){var o=t._bin;return r=t["OS/2"].version1(e,r,n),n.sxHeight=o.readShort(e,r),r+=2,n.sCapHeight=o.readShort(e,r),r+=2,n.usDefault=o.readUshort(e,r),r+=2,n.usBreak=o.readUshort(e,r),r+=2,n.usMaxContext=o.readUshort(e,r),r+=2},t["OS/2"].version5=function(e,r,n){var o=t._bin;return r=t["OS/2"].version2(e,r,n),n.usLowerOpticalPointSize=o.readUshort(e,r),r+=2,n.usUpperOpticalPointSize=o.readUshort(e,r),r+=2},t.post={},t.post.parse=function(e,r,n){var o=t._bin,a={};return a.version=o.readFixed(e,r),r+=4,a.italicAngle=o.readFixed(e,r),r+=4,a.underlinePosition=o.readShort(e,r),r+=2,a.underlineThickness=o.readShort(e,r),r+=2,a},t.SVG={},t.SVG.parse=function(e,r,n){var o=t._bin,a={entries:[]},i=r;o.readUshort(e,r);r+=2;var s=o.readUint(e,r);r+=4;o.readUint(e,r);r+=4,r=s+i;var c=o.readUshort(e,r);r+=2;for(var u=0;u<c;u++){var l=o.readUshort(e,r);r+=2;var h=o.readUshort(e,r);r+=2;var d=o.readUint(e,r);r+=4;var f=o.readUint(e,r);r+=4;for(var p=new Uint8Array(e.buffer,i+d+s,f),v=o.readUTF8(p,0,p.length),m=l;m<=h;m++)a.entries[m]=v}return a},t.SVG.toPath=function(e){var r={cmds:[],crds:[]};if(null==e)return r;for(var n=(new DOMParser).parseFromString(e,"image/svg+xml").firstChild;"svg"!=n.tagName;)n=n.nextSibling;var o=n.getAttribute("viewBox");o=o?o.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],t.SVG._toPath(n.children,r);for(var a=0;a<r.crds.length;a+=2){var i=r.crds[a],s=r.crds[a+1];i-=o[0],s=-(s-=o[1]),r.crds[a]=i,r.crds[a+1]=s}return r},t.SVG._toPath=function(e,r,n){for(var o=0;o<e.length;o++){var a=e[o],i=a.tagName,s=a.getAttribute("fill");if(null==s&&(s=n),"g"==i)t.SVG._toPath(a.children,r,s);else if("path"==i){r.cmds.push(s||"#000000");var c=a.getAttribute("d"),u=t.SVG._tokens(c);t.SVG._toksToPath(u,r),r.cmds.push("X")}else"defs"==i||console.log(i,a)}},t.SVG._tokens=function(e){for(var t=[],r=0,n=!1,o="";r<e.length;){var a=e.charCodeAt(r),i=e.charAt(r);r++;var s=48<=a&&a<=57||"."==i||"-"==i;n?"-"==i?(t.push(parseFloat(o)),o=i):s?o+=i:(t.push(parseFloat(o)),","!=i&&" "!=i&&t.push(i),n=!1):s?(o=i,n=!0):","!=i&&" "!=i&&t.push(i)}return n&&t.push(parseFloat(o)),t},t.SVG._toksToPath=function(e,r){for(var n=0,o=0,a=0,i=0,s=0,c={M:2,L:2,H:1,V:1,S:4,C:6},u=r.cmds,l=r.crds;n<e.length;){var h=e[n];if(n++,"z"==h)u.push("Z"),o=i,a=s;else for(var d=h.toUpperCase(),f=c[d],p=t.SVG._reps(e,n,f),v=0;v<p;v++){var m=0,g=0;if(h!=d&&(m=o,g=a),"M"==d)o=m+e[n++],a=g+e[n++],u.push("M"),l.push(o,a),i=o,s=a;else if("L"==d)o=m+e[n++],a=g+e[n++],u.push("L"),l.push(o,a);else if("H"==d)o=m+e[n++],u.push("L"),l.push(o,a);else if("V"==d)a=g+e[n++],u.push("L"),l.push(o,a);else if("C"==d){var y=m+e[n++],b=g+e[n++],M=m+e[n++],A=g+e[n++],I=m+e[n++],w=g+e[n++];u.push("C"),l.push(y,b,M,A,I,w),o=I,a=w}else if("S"==d){var D=Math.max(l.length-4,0);y=o+o-l[D],b=a+a-l[D+1],M=m+e[n++],A=g+e[n++],I=m+e[n++],w=g+e[n++];u.push("C"),l.push(y,b,M,A,I,w),o=I,a=w}else console.log("Unknown SVG command "+h)}}},t.SVG._reps=function(e,t,r){for(var n=t;n<e.length&&"string"!=typeof e[n];)n+=r;return(n-t)/r},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var r=e.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var o=r.tables[n];if(0==o.format)return t>=o.map.length?0:o.map[t];if(4==o.format){for(var a=-1,i=0;i<o.endCount.length;i++)if(t<=o.endCount[i]){a=i;break}if(-1==a)return 0;if(o.startCount[a]>t)return 0;return 65535&(0!=o.idRangeOffset[a]?o.glyphIdArray[t-o.startCount[a]+(o.idRangeOffset[a]>>1)-(o.idRangeOffset.length-a)]:t+o.idDelta[a])}if(12==o.format){if(t>o.groups[o.groups.length-1][1])return 0;for(i=0;i<o.groups.length;i++){var s=o.groups[i];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+o.format},t.U.glyphToPath=function(e,r){var n={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[r]){var o=e.SVG.entries[r];return null==o?n:("string"==typeof o&&(o=t.SVG.toPath(o),e.SVG.entries[r]=o),o)}if(e.CFF){var a={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},i=e.CFF,s=e.CFF.Private;if(i.ROS){for(var c=0;i.FDSelect[c+2]<=r;)c+=2;s=i.FDArray[i.FDSelect[c+1]].Private}t.U._drawCFF(e.CFF.CharStrings[r],a,i,s,n)}else e.glyf&&t.U._drawGlyf(r,e,n);return n},t.U._drawGlyf=function(e,r,n){var o=r.glyf[e];null==o&&(o=r.glyf[e]=t.glyf._parseGlyf(r,e)),null!=o&&(o.noc>-1?t.U._simpleGlyph(o,n):t.U._compoGlyph(o,r,n))},t.U._simpleGlyph=function(e,r){for(var n=0;n<e.noc;n++){for(var o=0==n?0:e.endPts[n-1]+1,a=e.endPts[n],i=o;i<=a;i++){var s=i==o?a:i-1,c=i==a?o:i+1,u=1&e.flags[i],l=1&e.flags[s],h=1&e.flags[c],d=e.xs[i],f=e.ys[i];if(i==o)if(u){if(!l){t.U.P.moveTo(r,d,f);continue}t.U.P.moveTo(r,e.xs[s],e.ys[s])}else l?t.U.P.moveTo(r,e.xs[s],e.ys[s]):t.U.P.moveTo(r,(e.xs[s]+d)/2,(e.ys[s]+f)/2);u?l&&t.U.P.lineTo(r,d,f):h?t.U.P.qcurveTo(r,d,f,e.xs[c],e.ys[c]):t.U.P.qcurveTo(r,d,f,(d+e.xs[c])/2,(f+e.ys[c])/2)}t.U.P.closePath(r)}},t.U._compoGlyph=function(e,r,n){for(var o=0;o<e.parts.length;o++){var a={cmds:[],crds:[]},i=e.parts[o];t.U._drawGlyf(i.glyphIndex,r,a);for(var s=i.m,c=0;c<a.crds.length;c+=2){var u=a.crds[c],l=a.crds[c+1];n.crds.push(u*s.a+l*s.b+s.tx),n.crds.push(u*s.c+l*s.d+s.ty)}for(c=0;c<a.cmds.length;c++)n.cmds.push(a.cmds[c])}},t.U._getGlyphClass=function(e,r){var n=t._lctf.getInterval(r,e);return-1==n?0:r[n+2]},t.U.getPairAdjustment=function(e,r,n){if(e.GPOS)for(var o=e.GPOS,a=o.lookupList,i=o.featureList,s=[],c=0;c<i.length;c++){var u=i[c];if("kern"==u.tag)for(var l=0;l<u.tab.length;l++)if(!s[u.tab[l]]){s[u.tab[l]]=!0;for(var h=a[u.tab[l]],d=0;d<h.tabs.length;d++)if(null!=h.tabs[c]){var f,p=h.tabs[d];if(!p.coverage||-1!=(f=t._lctf.coverageIndex(p.coverage,r)))if(1==h.ltype);else if(2==h.ltype){var v;if(1==p.fmt){var m=p.pairsets[f];for(c=0;c<m.length;c++)m[c].gid2==n&&(v=m[c])}else if(2==p.fmt){var g=t.U._getGlyphClass(r,p.classDef1),y=t.U._getGlyphClass(n,p.classDef2);v=p.matrix[g][y]}if(v&&v.val2)return v.val2[2]}}}}if(e.kern){var b=e.kern.glyph1.indexOf(r);if(-1!=b){var M=e.kern.rval[b].glyph2.indexOf(n);if(-1!=M)return e.kern.rval[b].vals[M]}}return 0},t.U.stringToGlyphs=function(e,r){for(var n=[],o=0;o<r.length;o++){(a=r.codePointAt(o))>65535&&o++,n.push(t.U.codeToGlyph(e,a))}for(o=0;o<r.length;o++){var a;if(2367==(a=r.codePointAt(o))){var i=n[o-1];n[o-1]=n[o],n[o]=i}a>65535&&o++}var s=e.GSUB;if(null==s)return n;for(var c=s.lookupList,u=s.featureList,l=["rlig","liga","mset","isol","init","fina","medi","half","pres","blws"],h=[],d=0;d<u.length;d++){var f=u[d];if(-1!=l.indexOf(f.tag))for(var p=0;p<f.tab.length;p++)if(!h[f.tab[p]]){h[f.tab[p]]=!0;for(var v=c[f.tab[p]],m=0;m<n.length;m++){var g=t.U._getWPfeature(r,m);-1!="isol,init,fina,medi".indexOf(f.tag)&&f.tag!=g||t.U._applySubs(n,m,v,c)}}}return n},t.U._getWPfeature=function(e,t){var r='\n\t" ,.:;!?()  \u060c',n="\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0671\u0672\u0673\u0675\u0676\u0677\u0688\u0689\u068a\u068b\u068c\u068d\u068e\u068f\u0690\u0691\u0692\u0693\u0694\u0695\u0696\u0697\u0698\u0699\u06c0\u06c3\u06c4\u06c5\u06c6\u06c7\u06c8\u06c9\u06ca\u06cb\u06cd\u06cf\u06d2\u06d3\u06d5\u06ee\u06ef\u0710\u0715\u0716\u0717\u0718\u0719\u071e\u0728\u072a\u072c\u072f\u074d\u0759\u075a\u075b\u076b\u076c\u0771\u0773\u0774\u0778\u0779\u0840\u0846\u0847\u0849\u0854\u0867\u0869\u086a\u08aa\u08ab\u08ac\u08ae\u08b1\u08b2\u08b9\u0ac5\u0ac7\u0ac9\u0aca\u0ace\u0acf\u0ad0\u0ad1\u0ad2\u0add\u0ae1\u0ae4\u0aef\u0b81\u0b83\u0b84\u0b85\u0b89\u0b8c\u0b8e\u0b8f\u0b91\u0ba9\u0baa\u0bab\u0bac",o=0==t||-1!=r.indexOf(e[t-1]),a=t==e.length-1||-1!=r.indexOf(e[t+1]);o||-1==n.indexOf(e[t-1])||(o=!0),a||-1==n.indexOf(e[t])||(a=!0),a||-1=="\ua872\u0acd\u0ad7".indexOf(e[t+1])||(a=!0),o||-1=="\ua872\u0acd\u0ad7".indexOf(e[t])||(o=!0);return o?a?"isol":"init":a?"fina":"medi"},t.U._applySubs=function(e,r,n,o){for(var a=e.length-r-1,i=0;i<n.tabs.length;i++)if(null!=n.tabs[i]){var s,c=n.tabs[i];if(!c.coverage||-1!=(s=t._lctf.coverageIndex(c.coverage,e[r])))if(1==n.ltype){e[r];1==c.fmt?e[r]=e[r]+c.delta:e[r]=c.newg[s]}else if(4==n.ltype)for(var u=c.vals[s],l=0;l<u.length;l++){var h=u[l],d=h.chain.length;if(!(d>a)){for(var f=!0,p=0,v=0;v<d;v++){for(;-1==e[r+p+(1+v)];)p++;h.chain[v]!=e[r+p+(1+v)]&&(f=!1)}if(f){e[r]=h.nglyph;for(v=0;v<d+p;v++)e[r+v+1]=-1;break}}}else if(5==n.ltype&&2==c.fmt)for(var m=t._lctf.getInterval(c.cDef,e[r]),g=c.cDef[m+2],y=c.scset[g],b=0;b<y.length;b++){var M=y[b],A=M.input;if(!(A.length>a)){for(f=!0,v=0;v<A.length;v++){var I=t._lctf.getInterval(c.cDef,e[r+1+v]);if(-1==m&&c.cDef[I+2]!=A[v]){f=!1;break}}if(f){var w=M.substLookupRecords;for(l=0;l<w.length;l+=2)w[l],w[l+1]}}}else if(6==n.ltype&&3==c.fmt){if(!t.U._glsCovered(e,c.backCvg,r-c.backCvg.length))continue;if(!t.U._glsCovered(e,c.inptCvg,r))continue;if(!t.U._glsCovered(e,c.ahedCvg,r+c.inptCvg.length))continue;var D=c.lookupRec;for(b=0;b<D.length;b+=2){m=D[b];var x=o[D[b+1]];t.U._applySubs(e,r+m,x,o)}}}},t.U._glsCovered=function(e,r,n){for(var o=0;o<r.length;o++){if(-1==t._lctf.coverageIndex(r[o],e[n+o]))return!1}return!0},t.U.glyphsToPath=function(e,r,n){for(var o={cmds:[],crds:[]},a=0,i=0;i<r.length;i++){var s=r[i];if(-1!=s){for(var c=i<r.length-1&&-1!=r[i+1]?r[i+1]:0,u=t.U.glyphToPath(e,s),l=0;l<u.crds.length;l+=2)o.crds.push(u.crds[l]+a),o.crds.push(u.crds[l+1]);n&&o.cmds.push(n);for(l=0;l<u.cmds.length;l++)o.cmds.push(u.cmds[l]);n&&o.cmds.push("X"),a+=e.hmtx.aWidth[s],i<r.length-1&&(a+=t.U.getPairAdjustment(e,s,c))}}return o},t.U.pathToSVG=function(e,t){null==t&&(t=5);for(var r=[],n=0,o={M:2,L:2,Q:4,C:6},a=0;a<e.cmds.length;a++){var i=e.cmds[a],s=n+(o[i]?o[i]:0);for(r.push(i);n<s;){var c=e.crds[n++];r.push(parseFloat(c.toFixed(t))+(n==s?"":" "))}}return r.join("")},t.U.pathToContext=function(e,t){for(var r=0,n=e.crds,o=0;o<e.cmds.length;o++){var a=e.cmds[o];"M"==a?(t.moveTo(n[r],n[r+1]),r+=2):"L"==a?(t.lineTo(n[r],n[r+1]),r+=2):"C"==a?(t.bezierCurveTo(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5]),r+=6):"Q"==a?(t.quadraticCurveTo(n[r],n[r+1],n[r+2],n[r+3]),r+=4):"#"==a.charAt(0)?(t.beginPath(),t.fillStyle=a):"Z"==a?t.closePath():"X"==a&&t.fill()}},t.U.P={},t.U.P.moveTo=function(e,t,r){e.cmds.push("M"),e.crds.push(t,r)},t.U.P.lineTo=function(e,t,r){e.cmds.push("L"),e.crds.push(t,r)},t.U.P.curveTo=function(e,t,r,n,o,a,i){e.cmds.push("C"),e.crds.push(t,r,n,o,a,i)},t.U.P.qcurveTo=function(e,t,r,n,o){e.cmds.push("Q"),e.crds.push(t,r,n,o)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,r,n,o,a){for(var i=r.stack,s=r.nStems,c=r.haveWidth,u=r.width,l=r.open,h=0,d=r.x,f=r.y,p=0,v=0,m=0,g=0,y=0,b=0,M=0,A=0,I=0,w=0,D={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,D);var x=D.val;if(h+=D.size,"o1"==x||"o18"==x)i.length%2!==0&&!c&&(u=i.shift()+o.nominalWidthX),s+=i.length>>1,i.length=0,c=!0;else if("o3"==x||"o23"==x){i.length%2!==0&&!c&&(u=i.shift()+o.nominalWidthX),s+=i.length>>1,i.length=0,c=!0}else if("o4"==x)i.length>1&&!c&&(u=i.shift()+o.nominalWidthX,c=!0),l&&t.U.P.closePath(a),f+=i.pop(),t.U.P.moveTo(a,d,f),l=!0;else if("o5"==x)for(;i.length>0;)d+=i.shift(),f+=i.shift(),t.U.P.lineTo(a,d,f);else if("o6"==x||"o7"==x)for(var T=i.length,S="o6"==x,R=0;R<T;R++){var G=i.shift();S?d+=G:f+=G,S=!S,t.U.P.lineTo(a,d,f)}else if("o8"==x||"o24"==x){T=i.length;for(var E=0;E+6<=T;)p=d+i.shift(),v=f+i.shift(),m=p+i.shift(),g=v+i.shift(),d=m+i.shift(),f=g+i.shift(),t.U.P.curveTo(a,p,v,m,g,d,f),E+=6;"o24"==x&&(d+=i.shift(),f+=i.shift(),t.U.P.lineTo(a,d,f))}else{if("o11"==x)break;if("o1234"==x||"o1235"==x||"o1236"==x||"o1237"==x)"o1234"==x&&(v=f,m=(p=d+i.shift())+i.shift(),w=g=v+i.shift(),b=g,A=f,d=(M=(y=(I=m+i.shift())+i.shift())+i.shift())+i.shift(),t.U.P.curveTo(a,p,v,m,g,I,w),t.U.P.curveTo(a,y,b,M,A,d,f)),"o1235"==x&&(p=d+i.shift(),v=f+i.shift(),m=p+i.shift(),g=v+i.shift(),I=m+i.shift(),w=g+i.shift(),y=I+i.shift(),b=w+i.shift(),M=y+i.shift(),A=b+i.shift(),d=M+i.shift(),f=A+i.shift(),i.shift(),t.U.P.curveTo(a,p,v,m,g,I,w),t.U.P.curveTo(a,y,b,M,A,d,f)),"o1236"==x&&(p=d+i.shift(),v=f+i.shift(),m=p+i.shift(),w=g=v+i.shift(),b=g,M=(y=(I=m+i.shift())+i.shift())+i.shift(),A=b+i.shift(),d=M+i.shift(),t.U.P.curveTo(a,p,v,m,g,I,w),t.U.P.curveTo(a,y,b,M,A,d,f)),"o1237"==x&&(p=d+i.shift(),v=f+i.shift(),m=p+i.shift(),g=v+i.shift(),I=m+i.shift(),w=g+i.shift(),y=I+i.shift(),b=w+i.shift(),M=y+i.shift(),A=b+i.shift(),Math.abs(M-d)>Math.abs(A-f)?d=M+i.shift():f=A+i.shift(),t.U.P.curveTo(a,p,v,m,g,I,w),t.U.P.curveTo(a,y,b,M,A,d,f));else if("o14"==x){if(i.length>0&&!c&&(u=i.shift()+n.nominalWidthX,c=!0),4==i.length){var O=i.shift(),P=i.shift(),F=i.shift(),_=i.shift(),k=t.CFF.glyphBySE(n,F),U=t.CFF.glyphBySE(n,_);t.U._drawCFF(n.CharStrings[k],r,n,o,a),r.x=O,r.y=P,t.U._drawCFF(n.CharStrings[U],r,n,o,a)}l&&(t.U.P.closePath(a),l=!1)}else if("o19"==x||"o20"==x){i.length%2!==0&&!c&&(u=i.shift()+o.nominalWidthX),s+=i.length>>1,i.length=0,c=!0,h+=s+7>>3}else if("o21"==x)i.length>2&&!c&&(u=i.shift()+o.nominalWidthX,c=!0),f+=i.pop(),d+=i.pop(),l&&t.U.P.closePath(a),t.U.P.moveTo(a,d,f),l=!0;else if("o22"==x)i.length>1&&!c&&(u=i.shift()+o.nominalWidthX,c=!0),d+=i.pop(),l&&t.U.P.closePath(a),t.U.P.moveTo(a,d,f),l=!0;else if("o25"==x){for(;i.length>6;)d+=i.shift(),f+=i.shift(),t.U.P.lineTo(a,d,f);p=d+i.shift(),v=f+i.shift(),m=p+i.shift(),g=v+i.shift(),d=m+i.shift(),f=g+i.shift(),t.U.P.curveTo(a,p,v,m,g,d,f)}else if("o26"==x)for(i.length%2&&(d+=i.shift());i.length>0;)p=d,v=f+i.shift(),d=m=p+i.shift(),f=(g=v+i.shift())+i.shift(),t.U.P.curveTo(a,p,v,m,g,d,f);else if("o27"==x)for(i.length%2&&(f+=i.shift());i.length>0;)v=f,m=(p=d+i.shift())+i.shift(),g=v+i.shift(),d=m+i.shift(),f=g,t.U.P.curveTo(a,p,v,m,g,d,f);else if("o10"==x||"o29"==x){var V="o10"==x?o:n;if(0==i.length)console.log("error: empty stack");else{var L=i.pop(),N=V.Subrs[L+V.Bias];r.x=d,r.y=f,r.nStems=s,r.haveWidth=c,r.width=u,r.open=l,t.U._drawCFF(N,r,n,o,a),d=r.x,f=r.y,s=r.nStems,c=r.haveWidth,u=r.width,l=r.open}}else if("o30"==x||"o31"==x){var j=i.length,C=(E=0,"o31"==x);for(E+=j-(T=-3&j);E<T;)C?(v=f,m=(p=d+i.shift())+i.shift(),f=(g=v+i.shift())+i.shift(),T-E==5?(d=m+i.shift(),E++):d=m,C=!1):(p=d,v=f+i.shift(),m=p+i.shift(),g=v+i.shift(),d=m+i.shift(),T-E==5?(f=g+i.shift(),E++):f=g,C=!0),t.U.P.curveTo(a,p,v,m,g,d,f),E+=4}else{if("o"==(x+"").charAt(0))throw console.log("Unknown operation: "+x,e),x;i.push(x)}}}r.x=d,r.y=f,r.nStems=s,r.haveWidth=c,r.width=u,r.open=l},t},function(){var e=function(){var e={};function t(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(e,r){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=r,this.destLen=0,this.ltree=new t,this.dtree=new t}var n=new t,o=new t,a=new Uint8Array(30),i=new Uint16Array(30),s=new Uint8Array(30),c=new Uint16Array(30),u=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new t,h=new Uint8Array(320);function d(e,t,r,n){var o,a;for(o=0;o<r;++o)e[o]=0;for(o=0;o<30-r;++o)e[o+r]=o/r|0;for(a=n,o=0;o<30;++o)t[o]=a,a+=1<<e[o]}var f=new Uint16Array(16);function p(e,t,r,n){var o,a;for(o=0;o<16;++o)e.table[o]=0;for(o=0;o<n;++o)e.table[t[r+o]]++;for(e.table[0]=0,a=0,o=0;o<16;++o)f[o]=a,a+=e.table[o];for(o=0;o<n;++o)t[r+o]&&(e.trans[f[t[r+o]]++]=o)}function v(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function m(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function g(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,o=0,a=e.tag;do{n=2*n+(1&a),a>>>=1,++o,r+=t.table[o],n-=t.table[o]}while(n>=0);return e.tag=a,e.bitcount-=o,t.trans[r+n]}function y(e,t,r){var n,o,a,i,s,c;for(n=m(e,5,257),o=m(e,5,1),a=m(e,4,4),i=0;i<19;++i)h[i]=0;for(i=0;i<a;++i){var d=m(e,3,0);h[u[i]]=d}for(p(l,h,0,19),s=0;s<n+o;){var f=g(e,l);switch(f){case 16:var v=h[s-1];for(c=m(e,2,3);c;--c)h[s++]=v;break;case 17:for(c=m(e,3,3);c;--c)h[s++]=0;break;case 18:for(c=m(e,7,11);c;--c)h[s++]=0;break;default:h[s++]=f}}p(t,h,0,n),p(r,h,n,o)}function b(e,t,r){for(;;){var n,o,u,l,h=g(e,t);if(256===h)return 0;if(h<256)e.dest[e.destLen++]=h;else for(n=m(e,a[h-=257],i[h]),o=g(e,r),l=u=e.destLen-m(e,s[o],c[o]);l<u+n;++l)e.dest[e.destLen++]=e.dest[l]}}function M(e){for(var t,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}return function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(n,o),d(a,i,4,3),d(s,c,2,1),a[28]=0,i[28]=258,e.exports=function(e,t){var a,i,s=new r(e,t);do{switch(a=v(s),m(s,2,0)){case 0:i=M(s);break;case 1:i=b(s,n,o);break;case 2:y(s,s.ltree,s.dtree),i=b(s,s.ltree,s.dtree);break;default:i=-3}if(0!==i)throw new Error("Data error")}while(!a);return s.destLen<s.dest.length?"function"===typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest},e.exports}();return function(t){return function(e,t){var r=new DataView(e),n=0;function o(){var e=r.getUint16(n);return n+=2,e}function a(){var e=r.getUint32(n);return n+=4,e}function i(e){y.setUint16(b,e),b+=2}function s(e){y.setUint32(b,e),b+=4}for(var c={signature:a(),flavor:a(),length:a(),numTables:o(),reserved:o(),totalSfntSize:a(),majorVersion:o(),minorVersion:o(),metaOffset:a(),metaLength:a(),metaOrigLength:a(),privOffset:a(),privLength:a()},u=0;Math.pow(2,u)<=c.numTables;)u++;u--;for(var l=16*Math.pow(2,u),h=16*c.numTables-l,d=12,f=[],p=0;p<c.numTables;p++)f.push({tag:a(),offset:a(),compLength:a(),origLength:a(),origChecksum:a()}),d+=16;var v,m=new Uint8Array(12+16*f.length+f.reduce((function(e,t){return e+t.origLength+4}),0)),g=m.buffer,y=new DataView(g),b=0;return s(c.flavor),i(c.numTables),i(l),i(u),i(h),f.forEach((function(e){s(e.tag),s(e.origChecksum),s(d),s(e.origLength),e.outOffset=d,(d+=e.origLength)%4!=0&&(d+=4-d%4)})),f.forEach((function(r){var n=e.slice(r.offset,r.offset+r.compLength);if(r.compLength!=r.origLength){var o=new Uint8Array(r.origLength);t(new Uint8Array(n,2),o)}else o=new Uint8Array(n);m.set(o,r.outOffset);var a=0;(d=r.outOffset+r.origLength)%4!=0&&(a=4-d%4),m.set(new Uint8Array(a).buffer,r.outOffset+r.origLength),v=d+a})),g.slice(0,v)}(t,e)}},function(e,t){var r={M:2,L:2,Q:4,C:6,Z:0};return function(n){var o=new Uint8Array(n,0,4),a=e._bin.readASCII(o,0,4);if("wOFF"===a)n=t(n);else if("wOF2"===a)throw new Error("woff2 fonts not supported");return function(t){var n=Object.create(null),o={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph:function(a,i,s,c){var u=0,l=1/o.unitsPerEm*i,h=e.U.stringToGlyphs(t,a),d=0;return h.forEach((function(o){if(-1!==o){var h=n[o];if(!h){var f,p,v,m,g=e.U.glyphToPath(t,o),y=g.cmds,b=g.crds;if(b.length){f=p=1/0,v=m=-1/0;for(var M=0,A=b.length;M<A;M+=2){var I=b[M],w=b[M+1];I<f&&(f=I),w<p&&(p=w),I>v&&(v=I),w>m&&(m=w)}}else f=v=p=m=0;h=n[o]={index:o,advanceWidth:t.hmtx.aWidth[o],xMin:f,yMin:p,xMax:v,yMax:m,pathCommandCount:y.length,forEachPathCommand:function(e){for(var t=0,n=[],o=0,a=y.length;o<a;o++){var i=r[y[o]];n.length=1+i,n[0]=y[o];for(var s=1;s<=i;s++)n[s]=b[t++];e.apply(null,n)}}}}c.call(null,h,u,d),h.advanceWidth&&(u+=h.advanceWidth*l),s&&(u+=s*i)}d+=a.codePointAt(d)>65535?2:1})),u}};return o}(e.parse(n)[0])}}],init:function(e,t,r){return r(e(),t())}}),L={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048};Object.create(null);var N=Object(I.b)({name:"FontProcessor",dependencies:[L,V,function(){var e=!1,t=[];function r(){e&&(t.sort((function(e,t){return e.maxX-t.maxX})),e=!1)}function n(e,t,r,n,o,a){var i=o-r,s=a-n,c=i*i+s*s,u=c?Math.max(0,Math.min(1,((e-r)*i+(t-n)*s)/c)):0,l=e-(r+u*i),h=t-(n+u*s);return l*l+h*h}return{addLineSegment:function(r,n,o,a){var i={x0:r,y0:n,x1:o,y1:a,minX:Math.min(r,o),minY:Math.min(n,a),maxX:Math.max(r,o),maxY:Math.max(n,a)};t.push(i),e=!0},findNearestSignedDistance:function(e,o){r();for(var a=1/0,i=1/0,s=t.length;s--;){var c=t[s];if(c.maxX+i<=e)break;if(e+i>c.minX&&o-i<c.maxY&&o+i>c.minY){var u=n(e,o,c.x0,c.y0,c.x1,c.y1);u<a&&(a=u,i=Math.sqrt(a))}}return function(e,n){r();for(var o=!1,a=t.length;a--;){var i=t[a];if(i.maxX<=e)break;if(i.minY<n&&i.maxY>n)i.y0>n!==i.y1>n&&e<(i.x1-i.x0)*(n-i.y0)/(i.y1-i.y0)+i.x0&&(o=!o)}return o}(e,o)&&(i=-i),i}}},function(e,t){var r=t.sdfExponent,n=t.sdfMargin;function o(e,t,r,n,o,a,i){var s=1-i;return{x:s*s*e+2*s*i*r+i*i*o,y:s*s*t+2*s*i*n+i*i*a}}function a(e,t,r,n,o,a,i,s,c){var u=1-c;return{x:u*u*u*e+3*u*u*c*r+3*u*c*c*o+c*c*c*i,y:u*u*u*t+3*u*u*c*n+3*u*c*c*a+c*c*c*s}}return function(t,i){var s=new Uint8Array(i*i),c=t.xMax-t.xMin,u=t.yMax-t.yMin,l=Math.max(c,u),h=Math.max(c,u)/i*(n*i+.5),d=t.xMin-h,f=t.yMin-h,p=t.xMax+h,v=t.yMax+h,m=p-d,g=v-f,y=Math.max(m,g);function b(e){return f+g*e/i}if(t.pathCommandCount){var M,A,I,w,D=e(t);t.forEachPathCommand((function(e,t,r,n,i,s,c){switch(e){case"M":I=M=t,w=A=r;break;case"L":t===I&&r===w||D.addLineSegment(I,w,I=t,w=r);break;case"Q":for(var u={x:I,y:w},l=1;l<16;l++){var h=o(I,w,t,r,n,i,l/15);D.addLineSegment(u.x,u.y,h.x,h.y),u=h}I=n,w=i;break;case"C":for(var d={x:I,y:w},f=1;f<16;f++){var p=a(I,w,t,r,n,i,s,c,f/15);D.addLineSegment(d.x,d.y,p.x,p.y),d=p}I=s,w=c;break;case"Z":I===M&&w===A||D.addLineSegment(I,w,M,A)}}));for(var x=0;x<i;x++)for(var T=0;T<i;T++){var S=D.findNearestSignedDistance(d+m*(x+.5)/i,b(T+.5),l),R=Math.pow(1-Math.abs(S)/y,r)/2;S<0&&(R=1-R),R=Math.max(0,Math.min(255,Math.round(255*R))),s[T*i+x]=R}}return{textureData:s,renderingBounds:[d,f,p,v]}}},function(e,t,r){var n=r.defaultFontURL,o=Object.create(null),a=Object.create(null),i=1/0;function s(t,r){t||(t=n);var o=a[t];o?o.pending?o.pending.push(r):r(o):(a[t]={pending:[r]},function(t,r){!function o(){var a=function(e){console.error("Failure loading font ".concat(t).concat(t===n?"":"; trying fallback"),e),t!==n&&(t=n,o())};try{var i=new XMLHttpRequest;i.open("get",t,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)a(new Error(i.statusText));else if(i.status>0)try{var t=e(i.response);r(t)}catch(n){a(n)}},i.onerror=a,i.send()}catch(s){a(s)}}()}(t,(function(e){var r=a[t].pending;a[t]=e,r.forEach((function(t){return t(e)}))})))}function c(e,t,r){e||(e=n);var a="".concat(e,"@").concat(t),i=o[a];i?r(i):s(e,(function(e){i=o[a]||(o[a]={fontObj:e,glyphs:{},glyphCount:0}),r(i)}))}function u(e,r){var o=e.text,a=void 0===o?"":o,s=e.font,u=void 0===s?n:s,l=e.sdfGlyphSize,p=void 0===l?64:l,v=e.fontSize,m=void 0===v?1:v,g=e.letterSpacing,y=void 0===g?0:g,b=e.lineHeight,M=void 0===b?"normal":b,A=e.maxWidth,I=void 0===A?i:A,w=e.textAlign,D=void 0===w?"left":w,x=e.textIndent,T=void 0===x?0:x,S=e.whiteSpace,R=void 0===S?"normal":S,G=e.overflowWrap,E=void 0===G?"normal":G,O=e.anchorX,P=void 0===O?0:O,F=e.anchorY,_=void 0===F?0:F,k=e.includeCaretPositions,U=void 0!==k&&k,V=e.chunkedBoundsSize,L=void 0===V?8192:V,N=e.colorRanges,j=void 0===N?null:N,C=arguments.length>2&&void 0!==arguments[2]&&arguments[2],X=d(),H={total:0,fontLoad:0,layout:0,sdf:{},sdfTotal:0};a.indexOf("\r")>-1&&(console.warn("FontProcessor.process: got text with \\r chars; normalizing to \\n"),a=a.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),m=+m,y=+y,I=+I,M=M||"normal",T=+T,c(u,p,(function(e){var n=e.fontObj,o=isFinite(I),s=null,c=null,u=null,l=null,v=null,g=null,b=null,A=0,w=0,x="nowrap"!==R,S=n.ascender,G=n.descender,O=n.unitsPerEm;H.fontLoad=d()-X;var F=d(),k=m/O;"normal"===M&&(M=(S-G)/O);var V=((M*=m)-(S-G)*k)/2,N=-(S*k+V),B=Math.min(M,(S-G)*k),z=(S+G)/2*k-B/2,Q=T,W=new f,Y=[W];n.forEachGlyph(a,m,y,(function(e,t,r){var n,i=a.charAt(r),s=e.advanceWidth*k,c=W.count;if("isEmpty"in e||(e.isWhitespace=!!i&&/\s/.test(i),e.isEmpty=e.xMin===e.xMax||e.yMin===e.yMax),e.isWhitespace||e.isEmpty||w++,x&&o&&!e.isWhitespace&&t+s+Q>I&&c){if(W.glyphAt(c-1).glyphObj.isWhitespace)n=new f,Q=-t;else for(var u=c;u--;){if(0===u&&"break-word"===E){n=new f,Q=-t;break}if(W.glyphAt(u).glyphObj.isWhitespace){var l=(n=W.splitAt(u+1)).glyphAt(0).x;Q-=l;for(var h=n.count;h--;)n.glyphAt(h).x-=l;break}}n&&(W.isSoftWrapped=!0,W=n,Y.push(W),A=I)}var d=W.glyphAt(W.count);d.glyphObj=e,d.x=t+Q,d.width=s,d.charIndex=r,"\n"===i&&(W=new f,Y.push(W),Q=-(t+s+y*m)+T)})),Y.forEach((function(e){for(var t=e.count;t--;){var r=e.glyphAt(t),n=r.glyphObj,o=r.x,a=r.width;if(!n.isWhitespace)return e.width=o+a,void(e.width>A&&(A=e.width))}}));var q=0,Z=0;if(P&&("number"===typeof P?q=-P:"string"===typeof P&&(q=-A*("left"===P?0:"center"===P?.5:"right"===P?1:h(P)))),_)if("number"===typeof _)Z=-_;else if("string"===typeof _){var K=Y.length*M;Z="top"===_?0:"top-baseline"===_?-N:"middle"===_?K/2:"bottom"===_?K:"bottom-baseline"===_?K-V+G*k:h(_)*K}if(!C){c=new Float32Array(4*w),u=new Float32Array(w),g=[i,i,-1/0,-1/0],b=[];var $=N;U&&(v=new Float32Array(3*a.length)),j&&(l=new Uint8Array(3*w));var J,ee,te=0,re=-1,ne=-1;Y.forEach((function(r){var n=r.count,o=r.width;if(n>0){var h=0,f=0;if("center"===D)h=(A-o)/2;else if("right"===D)h=A-o;else if("justify"===D&&r.isSoftWrapped){for(var m=0,y=n;y--;)if(!r.glyphAt(y).glyphObj.isWhitespace){for(;y--;)r.glyphAt(y).glyphObj,r.glyphAt(y).glyphObj.isWhitespace&&m++;break}f=(A-o)/m}for(var I=0;I<n;I++){var w=r.glyphAt(I),x=w.glyphObj;if(h&&(w.x+=h),0!==f&&x.isWhitespace&&(h+=f,w.width+=f),U){var T=w.charIndex;for(v[3*T]=w.x+q,v[3*T+1]=w.x+w.width+q,v[3*T+2]=$+z+Z;T-re>1;)v[3*(re+1)]=v[3*re+1],v[3*(re+1)+1]=v[3*re+1],v[3*(re+1)+2]=v[3*re+2],re++;re=T}if(j)for(var S=w.charIndex;S>ne;)ne++,j.hasOwnProperty(ne)&&(ee=j[ne]);if(!x.isWhitespace&&!x.isEmpty){var R=te++,G=e.glyphs[x.index];if(!G){var E=d(),O=t(x,p);H.sdf[a.charAt(w.charIndex)]=d()-E,O.atlasIndex=e.glyphCount++,s||(s=[]),s.push(O),G=e.glyphs[x.index]={atlasIndex:O.atlasIndex,glyphObj:x,renderingBounds:O.renderingBounds}}var P=G.renderingBounds,F=4*R,_=w.x+q,V=$+Z;c[F]=_+P[0]*k,c[F+1]=V+P[1]*k,c[F+2]=_+P[2]*k,c[F+3]=V+P[3]*k;var N=_+x.xMin*k,C=V+x.yMin*k,X=_+x.xMax*k,B=V+x.yMax*k;N<g[0]&&(g[0]=N),C<g[1]&&(g[1]=C),X>g[2]&&(g[2]=X),B>g[3]&&(g[3]=B),R%L===0&&(J={start:R,end:R,rect:[i,i,-1/0,-1/0]},b.push(J)),J.end++;var Q=J.rect;if(N<Q[0]&&(Q[0]=N),C<Q[1]&&(Q[1]=C),X>Q[2]&&(Q[2]=X),B>Q[3]&&(Q[3]=B),u[R]=G.atlasIndex,j){var W=3*R;l[W]=ee>>16&255,l[W+1]=ee>>8&255,l[W+2]=255&ee}}}}$-=M}))}for(var oe in H.sdf)H.sdfTotal+=H.sdf[oe];H.layout=d()-F-H.sdfTotal,H.total=d()-X,r({glyphBounds:c,glyphAtlasIndices:u,caretPositions:v,caretHeight:B,glyphColors:l,chunkedBounds:b,ascender:S*k,descender:G*k,lineHeight:M,topBaseline:N,blockBounds:[q,Z-Y.length*M,q+A,Z],visibleBounds:g,newGlyphSDFs:s,timings:H})}))}function h(e){var t=e.match(/^([\d.]+)%$/),r=t?parseFloat(t[1]):NaN;return isNaN(r)?0:r/100}function d(){return(self.performance||Date).now()}function f(){this.data=[]}return f.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/4)},glyphAt:function(e){var t=f.flyweight;return t.data=this.data,t.index=e,t},splitAt:function(e){var t=new f;return t.data=this.data.splice(4*e),t}},f.flyweight=["glyphObj","x","width","charIndex"].reduce((function(e,t,r,n){return Object.defineProperty(e,t,{get:function(){return this.data[4*this.index+r]},set:function(e){this.data[4*this.index+r]=e}}),e}),{data:null,index:0}),{process:u,measure:function(e,t){u(e,(function(e){var r=Object(l.a)(e.blockBounds,4),n=r[0],o=r[1],a=r[2],i=r[3];t({width:a-n,height:i-o})}),{metricsOnly:!0})},loadFont:s}}],init:function(e,t,r,n,o){var a=e.sdfExponent,i=e.sdfMargin,s=e.defaultFontURL;return o(t,n(r,{sdfExponent:a,sdfMargin:i}),{defaultFontURL:s})}});I.a,"\nvec4 bounds = aTroikaGlyphBounds;\nvec4 outlineBounds = vec4(bounds.xy - uTroikaDistanceOffset, bounds.zw + uTroikaDistanceOffset);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n".concat("\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerGlyph = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerGlyph * vec2(\n  mod(aTroikaGlyphIndex, txCols),\n  floor(aTroikaGlyphIndex / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerGlyph);\n"),"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of encoding in SDFGenerator.js\n  ".concat("\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  return texture2D(uTroikaSDFTexture, textureUV).r;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetTextAlpha(float distanceOffset) {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n    \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ","\n  \n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n  ","\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  float aaDist = length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  float aaDist = vTroikaGlyphDimensions.x / 64.0;\n  #endif\n  \n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n  \n  return alpha;\n}\n");new WeakMap;new WeakMap;var j=function(e){m.DataTextureLoader.call(this,e),this.type=m.UnsignedByteType};j.prototype=Object.assign(Object.create(m.DataTextureLoader.prototype),{constructor:j,parse:function(e){var t=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;for(var n=e.pos,o=-1,a=0,i="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));0>(o=s.indexOf("\n"))&&a<t&&n<e.byteLength;)i+=s,a+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<o&&(!1!==r&&(e.pos+=a+o+1),i+s.slice(0,o))},n=function(e,t,r,n){var o=e[t+3],a=Math.pow(2,o-128)/255;r[n+0]=e[t+0]*a,r[n+1]=e[t+1]*a,r[n+2]=e[t+2]*a},o=function(){var e=new Float32Array(1),t=new Int32Array(e.buffer);function r(r){e[0]=r;var n=t[0],o=n>>16&32768,a=n>>12&2047,i=n>>23&255;return i<103?o:i>142?(o|=31744,o|=(255==i?0:1)&&8388607&n):i<113?o|=((a|=2048)>>114-i)+(a>>113-i&1):(o|=i-112<<10|a>>1,o+=1&a)}return function(e,t,n,o){var a=e[t+3],i=Math.pow(2,a-128)/255;n[o+0]=r(e[t+0]*i),n[o+1]=r(e[t+1]*i),n[o+2]=r(e[t+2]*i)}}(),a=new Uint8Array(e);a.pos=0;var i=function(e){var n,o,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,c=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(n=r(e)))return t(1,"no header found");if(!(o=n.match(/^#\?(\S+)$/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=o[1],u.string+=n+"\n";!1!==(n=r(e));)if(u.string+=n+"\n","#"!==n.charAt(0)){if((o=n.match(a))&&(u.gamma=parseFloat(o[1],10)),(o=n.match(i))&&(u.exposure=parseFloat(o[1],10)),(o=n.match(s))&&(u.valid|=2,u.format=o[1]),(o=n.match(c))&&(u.valid|=4,u.height=parseInt(o[1],10),u.width=parseInt(o[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=n+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(a);if(-1!==i){var s=i.width,c=i.height,u=function(e,r,n){var o,a,i,s,c,u,l,h,d,f,p,v,m,g=r,y=n;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(o=new Uint8Array(4*r*n)).length)return t(4,"unable to allocate buffer space");for(a=0,i=0,h=4*g,m=new Uint8Array(4),u=new Uint8Array(h);y>0&&i<e.byteLength;){if(i+4>e.byteLength)return t(1);if(m[0]=e[i++],m[1]=e[i++],m[2]=e[i++],m[3]=e[i++],2!=m[0]||2!=m[1]||(m[2]<<8|m[3])!=g)return t(3,"bad rgbe scanline format");for(l=0;l<h&&i<e.byteLength;){if((v=(s=e[i++])>128)&&(s-=128),0===s||l+s>h)return t(3,"bad scanline data");if(v)for(c=e[i++],d=0;d<s;d++)u[l++]=c;else u.set(e.subarray(i,i+s),l),l+=s,i+=s}for(f=g,d=0;d<f;d++)p=0,o[a]=u[d+p],p+=g,o[a+1]=u[d+p],p+=g,o[a+2]=u[d+p],p+=g,o[a+3]=u[d+p],a+=4;y--}return o}(a.subarray(a.pos),s,c);if(-1!==u){switch(this.type){case m.UnsignedByteType:var l=u,h=m.RGBEFormat,d=m.UnsignedByteType;break;case m.FloatType:for(var f=u.length/4*3,p=new Float32Array(f),v=0;v<f;v++)n(u,4*v,p,3*v);l=p,h=m.RGBFormat,d=m.FloatType;break;case m.HalfFloatType:f=u.length/4*3;var g=new Uint16Array(f);for(v=0;v<f;v++)o(u,4*v,g,3*v);l=g,h=m.RGBFormat,d=m.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:c,data:l,header:i.string,gamma:i.gamma,exposure:i.exposure,format:h,type:d}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,t,r,n){return m.DataTextureLoader.prototype.load.call(this,e,(function(e,r){switch(e.type){case m.UnsignedByteType:e.encoding=m.RGBEEncoding,e.minFilter=m.NearestFilter,e.magFilter=m.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case m.FloatType:case m.HalfFloatType:e.encoding=m.LinearEncoding,e.minFilter=m.LinearFilter,e.magFilter=m.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)}),r,n)}});var C={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function X(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(X.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),X.FullScreenQuad=function(){var e=new m.OrthographicCamera(-1,1,1,-1,0,1),t=new m.PlaneBufferGeometry(2,2),r=function(e){this._mesh=new m.Mesh(t,e)};return Object.defineProperty(r.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(r.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),r}();var H=function(e,t){X.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof m.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=m.UniformsUtils.clone(e.uniforms),this.material=new m.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new X.FullScreenQuad(this.material)};H.prototype=Object.assign(Object.create(X.prototype),{constructor:H,render:function(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var B=function(e,t){X.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};B.prototype=Object.assign(Object.create(X.prototype),{constructor:B,render:function(e,t,r){var n,o,a=e.getContext(),i=e.state;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(n=0,o=1):(n=1,o=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),i.buffers.stencil.setFunc(a.ALWAYS,n,4294967295),i.buffers.stencil.setClear(o),i.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(a.EQUAL,1,4294967295),i.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),i.buffers.stencil.setLocked(!0)}});var z=function(){X.call(this),this.needsSwap=!1};z.prototype=Object.create(X.prototype),Object.assign(z.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var Q=function(e,t){if(this.renderer=e,void 0===t){var r={minFilter:m.LinearFilter,magFilter:m.LinearFilter,format:m.RGBAFormat},n=e.getSize(new m.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,(t=new m.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,r)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===C&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===H&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new H(C),this.clock=new m.Clock};Object.assign(Q.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,r,n=this.renderer.getRenderTarget(),o=!1,a=this.passes.length;for(r=0;r<a;r++)if(!1!==(t=this.passes[r]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,o),t.needsSwap){if(o){var i=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(i.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(i.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==B&&(t instanceof B?o=!0:t instanceof z&&(o=!1))}this.renderer.setRenderTarget(n)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new m.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var r=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(r,n),this.renderTarget2.setSize(r,n);for(var o=0;o<this.passes.length;o++)this.passes[o].setSize(r,n)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var W=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(W.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),W.FullScreenQuad=function(){var e=new m.OrthographicCamera(-1,1,1,-1,0,1),t=new m.PlaneBufferGeometry(2,2),r=function(e){this._mesh=new m.Mesh(t,e)};return Object.defineProperty(r.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(r.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),r}();var Y=function(e,t,r,n,o){X.call(this),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};Y.prototype=Object.assign(Object.create(X.prototype),{constructor:Y,render:function(e,t,r){var n,o,a,i=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(n=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(n,o),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=a),e.autoClear=i}});["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 tex = texture2D( tDiffuse, vUv );","\tgl_FragColor = LinearTosRGB( tex );","}"].join("\n");var q=function(e){var t=this,r={type:"change"};this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n=function(e){t.deviceOrientation=e},o=function(){t.screenOrientation=window.orientation||0},a=function(){var e=new m.Vector3(0,0,1),t=new m.Euler,r=new m.Quaternion,n=new m.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(o,a,i,s,c){t.set(i,a,-s,"YXZ"),o.setFromEuler(t),o.multiply(n),o.multiply(r.setFromAxisAngle(e,-c))}}();this.connect=function(){o(),void 0!==window.DeviceOrientationEvent&&"function"===typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then((function(e){"granted"==e&&(window.addEventListener("orientationchange",o,!1),window.addEventListener("deviceorientation",n,!1))})).catch((function(e){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",e)})):(window.addEventListener("orientationchange",o,!1),window.addEventListener("deviceorientation",n,!1)),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",o,!1),window.removeEventListener("deviceorientation",n,!1),t.enabled=!1},this.update=function(){var e=new m.Quaternion;return function(){if(!1!==t.enabled){var n=t.deviceOrientation;if(n){var o=n.alpha?m.MathUtils.degToRad(n.alpha)+t.alphaOffset:0,i=n.beta?m.MathUtils.degToRad(n.beta):0,s=n.gamma?m.MathUtils.degToRad(n.gamma):0,c=t.screenOrientation?m.MathUtils.degToRad(t.screenOrientation):0;a(t.object.quaternion,o,i,s,c),8*(1-e.dot(t.object.quaternion))>1e-6&&(e.copy(t.object.quaternion),t.dispatchEvent(r))}}}}(),this.dispose=function(){t.disconnect()},this.connect()};(q.prototype=Object.create(m.EventDispatcher.prototype)).constructor=q;var Z=function(e,t){void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,t&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;var r=this,n={type:"change"},o=1e-6;function a(e,t){return function(){t.apply(e,arguments)}}function i(e){e.preventDefault()}this.tmpQuaternion=new m.Quaternion,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new m.Vector3(0,0,0),this.rotationVector=new m.Vector3(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(e){if(!this.dragToLook||this.mouseStatus>0){var t=this.getContainerDimensions(),r=t.size[0]/2,n=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-r)/r,this.moveState.pitchDown=(e.pageY-t.offset[1]-n)/n,this.updateRotationVector()}},this.mouseup=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(){var e=new m.Quaternion,t=new m.Vector3;return function(a){var i=a*r.movementSpeed,s=a*r.rollSpeed;r.object.translateX(r.moveVector.x*i),r.object.translateY(r.moveVector.y*i),r.object.translateZ(r.moveVector.z*i),r.tmpQuaternion.set(r.rotationVector.x*s,r.rotationVector.y*s,r.rotationVector.z*s,1).normalize(),r.object.quaternion.multiply(r.tmpQuaternion),(t.distanceToSquared(r.object.position)>o||8*(1-e.dot(r.object.quaternion))>o)&&(r.dispatchEvent(n),e.copy(r.object.quaternion),t.copy(r.object.position))}}(),this.updateMovementVector=function(){var e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",i,!1),this.domElement.removeEventListener("mousedown",c,!1),this.domElement.removeEventListener("mousemove",s,!1),this.domElement.removeEventListener("mouseup",u,!1),window.removeEventListener("keydown",l,!1),window.removeEventListener("keyup",h,!1)};var s=a(this,this.mousemove),c=a(this,this.mousedown),u=a(this,this.mouseup),l=a(this,this.keydown),h=a(this,this.keyup);this.domElement.addEventListener("contextmenu",i,!1),this.domElement.addEventListener("mousemove",s,!1),this.domElement.addEventListener("mousedown",c,!1),this.domElement.addEventListener("mouseup",u,!1),window.addEventListener("keydown",l,!1),window.addEventListener("keyup",h,!1),this.updateMovementVector(),this.updateRotationVector()};(Z.prototype=Object.create(m.EventDispatcher.prototype)).constructor=Z;var K=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new m.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:m.MOUSE.ROTATE,MIDDLE:m.MOUSE.DOLLY,RIGHT:m.MOUSE.PAN},this.touches={ONE:m.TOUCH.ROTATE,TWO:m.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(n),r.update(),s=i.NONE},this.update=function(){var t=new m.Vector3,o=(new m.Quaternion).setFromUnitVectors(e.up,new m.Vector3(0,1,0)),a=o.clone().inverse(),p=new m.Vector3,v=new m.Quaternion,g=2*Math.PI;return function(){var e=r.object.position;t.copy(e).sub(r.target),t.applyQuaternion(o),u.setFromVector3(t),r.autoRotate&&s===i.NONE&&x(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(u.theta+=l.theta*r.dampingFactor,u.phi+=l.phi*r.dampingFactor):(u.theta+=l.theta,u.phi+=l.phi);var m=r.minAzimuthAngle,y=r.maxAzimuthAngle;return isFinite(m)&&isFinite(y)&&(m<-Math.PI?m+=g:m>Math.PI&&(m-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),u.theta=m<y?Math.max(m,Math.min(y,u.theta)):u.theta>(m+y)/2?Math.max(m,u.theta):Math.min(y,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(r.minDistance,Math.min(r.maxDistance,u.radius)),!0===r.enableDamping?r.target.addScaledVector(d,r.dampingFactor):r.target.add(d),t.setFromSpherical(u),t.applyQuaternion(a),e.copy(r.target).add(t),r.object.lookAt(r.target),!0===r.enableDamping?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,d.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),h=1,!!(f||p.distanceToSquared(r.object.position)>c||8*(1-v.dot(r.object.quaternion))>c)&&(r.dispatchEvent(n),p.copy(r.object.position),v.copy(r.object.quaternion),f=!1,!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Y,!1),r.domElement.removeEventListener("pointerdown",j,!1),r.domElement.removeEventListener("wheel",H,!1),r.domElement.removeEventListener("touchstart",z,!1),r.domElement.removeEventListener("touchend",W,!1),r.domElement.removeEventListener("touchmove",Q,!1),r.domElement.ownerDocument.removeEventListener("pointermove",C,!1),r.domElement.ownerDocument.removeEventListener("pointerup",X,!1),r.domElement.removeEventListener("keydown",B,!1)};var r=this,n={type:"change"},o={type:"start"},a={type:"end"},i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=i.NONE,c=1e-6,u=new m.Spherical,l=new m.Spherical,h=1,d=new m.Vector3,f=!1,p=new m.Vector2,v=new m.Vector2,g=new m.Vector2,y=new m.Vector2,b=new m.Vector2,M=new m.Vector2,A=new m.Vector2,I=new m.Vector2,w=new m.Vector2;function D(){return Math.pow(.95,r.zoomSpeed)}function x(e){l.theta-=e}function T(e){l.phi-=e}var S=function(){var e=new m.Vector3;return function(t,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-t),d.add(e)}}(),R=function(){var e=new m.Vector3;return function(t,n){!0===r.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),G=function(){var e=new m.Vector3;return function(t,n){var o=r.domElement;if(r.object.isPerspectiveCamera){var a=r.object.position;e.copy(a).sub(r.target);var i=e.length();i*=Math.tan(r.object.fov/2*Math.PI/180),S(2*t*i/o.clientHeight,r.object.matrix),R(2*n*i/o.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(S(t*(r.object.right-r.object.left)/r.object.zoom/o.clientWidth,r.object.matrix),R(n*(r.object.top-r.object.bottom)/r.object.zoom/o.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function E(e){r.object.isPerspectiveCamera?h/=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*e)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function O(e){r.object.isPerspectiveCamera?h*=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/e)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function P(e){p.set(e.clientX,e.clientY)}function F(e){y.set(e.clientX,e.clientY)}function _(e){if(1==e.touches.length)p.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);p.set(t,r)}}function k(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,r)}}function U(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);A.set(0,n)}function V(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,n)}g.subVectors(v,p).multiplyScalar(r.rotateSpeed);var o=r.domElement;x(2*Math.PI*g.x/o.clientHeight),T(2*Math.PI*g.y/o.clientHeight),p.copy(v)}function L(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,n)}M.subVectors(b,y).multiplyScalar(r.panSpeed),G(M.x,M.y),y.copy(b)}function N(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);I.set(0,o),w.set(0,Math.pow(I.y/A.y,r.zoomSpeed)),E(w.y),A.copy(I)}function j(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),r.domElement.focus?r.domElement.focus():window.focus(),e.button){case 0:t=r.mouseButtons.LEFT;break;case 1:t=r.mouseButtons.MIDDLE;break;case 2:t=r.mouseButtons.RIGHT;break;default:t=-1}switch(t){case m.MOUSE.DOLLY:if(!1===r.enableZoom)return;!function(e){A.set(e.clientX,e.clientY)}(e),s=i.DOLLY;break;case m.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;F(e),s=i.PAN}else{if(!1===r.enableRotate)return;P(e),s=i.ROTATE}break;case m.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;P(e),s=i.ROTATE}else{if(!1===r.enablePan)return;F(e),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&(r.domElement.ownerDocument.addEventListener("pointermove",C,!1),r.domElement.ownerDocument.addEventListener("pointerup",X,!1),r.dispatchEvent(o))}(e)}}function C(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===r.enabled)return;switch(e.preventDefault(),s){case i.ROTATE:if(!1===r.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),g.subVectors(v,p).multiplyScalar(r.rotateSpeed);var t=r.domElement;x(2*Math.PI*g.x/t.clientHeight),T(2*Math.PI*g.y/t.clientHeight),p.copy(v),r.update()}(e);break;case i.DOLLY:if(!1===r.enableZoom)return;!function(e){I.set(e.clientX,e.clientY),w.subVectors(I,A),w.y>0?E(D()):w.y<0&&O(D()),A.copy(I),r.update()}(e);break;case i.PAN:if(!1===r.enablePan)return;!function(e){b.set(e.clientX,e.clientY),M.subVectors(b,y).multiplyScalar(r.panSpeed),G(M.x,M.y),y.copy(b),r.update()}(e)}}(e)}}function X(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===r.enabled)return;r.domElement.ownerDocument.removeEventListener("pointermove",C,!1),r.domElement.ownerDocument.removeEventListener("pointerup",X,!1),r.dispatchEvent(a),s=i.NONE}()}}function H(e){!1===r.enabled||!1===r.enableZoom||s!==i.NONE&&s!==i.ROTATE||(e.preventDefault(),e.stopPropagation(),r.dispatchEvent(o),function(e){e.deltaY<0?O(D()):e.deltaY>0&&E(D()),r.update()}(e),r.dispatchEvent(a))}function B(e){!1!==r.enabled&&!1!==r.enableKeys&&!1!==r.enablePan&&function(e){var t=!1;switch(e.keyCode){case r.keys.UP:G(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:G(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:G(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:G(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}(e)}function z(e){if(!1!==r.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(r.touches.ONE){case m.TOUCH.ROTATE:if(!1===r.enableRotate)return;_(e),s=i.TOUCH_ROTATE;break;case m.TOUCH.PAN:if(!1===r.enablePan)return;k(e),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case m.TOUCH.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(e){r.enableZoom&&U(e),r.enablePan&&k(e)}(e),s=i.TOUCH_DOLLY_PAN;break;case m.TOUCH.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(e){r.enableZoom&&U(e),r.enableRotate&&_(e)}(e),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(o)}}function Q(e){if(!1!==r.enabled)switch(e.preventDefault(),e.stopPropagation(),s){case i.TOUCH_ROTATE:if(!1===r.enableRotate)return;V(e),r.update();break;case i.TOUCH_PAN:if(!1===r.enablePan)return;L(e),r.update();break;case i.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(e){r.enableZoom&&N(e),r.enablePan&&L(e)}(e),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(e){r.enableZoom&&N(e),r.enableRotate&&V(e)}(e),r.update();break;default:s=i.NONE}}function W(e){!1!==r.enabled&&(r.dispatchEvent(a),s=i.NONE)}function Y(e){!1!==r.enabled&&e.preventDefault()}r.domElement.addEventListener("contextmenu",Y,!1),r.domElement.addEventListener("pointerdown",j,!1),r.domElement.addEventListener("wheel",H,!1),r.domElement.addEventListener("touchstart",z,!1),r.domElement.addEventListener("touchend",W,!1),r.domElement.addEventListener("touchmove",Q,!1),r.domElement.addEventListener("keydown",B,!1),-1===r.domElement.tabIndex&&(r.domElement.tabIndex=0),this.update()};(K.prototype=Object.create(m.EventDispatcher.prototype)).constructor=K;var $=function(e,t){K.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=m.MOUSE.PAN,this.mouseButtons.RIGHT=m.MOUSE.ROTATE,this.touches.ONE=m.TOUCH.PAN,this.touches.TWO=m.TOUCH.DOLLY_ROTATE};($.prototype=Object.create(m.EventDispatcher.prototype)).constructor=$;var J=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var r=this,n=-1,o=0,a=1,i=2,s=3,c=4;this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:m.MOUSE.ROTATE,MIDDLE:m.MOUSE.ZOOM,RIGHT:m.MOUSE.PAN},this.target=new m.Vector3;var u=1e-6,l=new m.Vector3,h=1,d=n,f=n,p=new m.Vector3,v=new m.Vector2,g=new m.Vector2,y=new m.Vector3,b=0,M=new m.Vector2,A=new m.Vector2,I=0,w=0,D=new m.Vector2,x=new m.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var T={type:"change"},S={type:"start"},R={type:"end"};this.handleResize=function(){var e=r.domElement.getBoundingClientRect(),t=r.domElement.ownerDocument.documentElement;r.screen.left=e.left+window.pageXOffset-t.clientLeft,r.screen.top=e.top+window.pageYOffset-t.clientTop,r.screen.width=e.width,r.screen.height=e.height};var G=function(){var e=new m.Vector2;return function(t,n){return e.set((t-r.screen.left)/r.screen.width,(n-r.screen.top)/r.screen.height),e}}(),E=function(){var e=new m.Vector2;return function(t,n){return e.set((t-.5*r.screen.width-r.screen.left)/(.5*r.screen.width),(r.screen.height+2*(r.screen.top-n))/r.screen.width),e}}();function O(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(e.preventDefault(),e.stopPropagation(),d===n)switch(e.button){case r.mouseButtons.LEFT:d=o;break;case r.mouseButtons.MIDDLE:d=a;break;case r.mouseButtons.RIGHT:d=i;break;default:d=n}var t=f!==n?f:d;t!==o||r.noRotate?t!==a||r.noZoom?t!==i||r.noPan||(D.copy(G(e.pageX,e.pageY)),x.copy(D)):(M.copy(G(e.pageX,e.pageY)),A.copy(M)):(g.copy(E(e.pageX,e.pageY)),v.copy(g));r.domElement.ownerDocument.addEventListener("pointermove",P,!1),r.domElement.ownerDocument.addEventListener("pointerup",F,!1),r.dispatchEvent(S)}(e)}}function P(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===r.enabled)return;e.preventDefault(),e.stopPropagation();var t=f!==n?f:d;t!==o||r.noRotate?t!==a||r.noZoom?t!==i||r.noPan||x.copy(G(e.pageX,e.pageY)):A.copy(G(e.pageX,e.pageY)):(v.copy(g),g.copy(E(e.pageX,e.pageY)))}(e)}}function F(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===r.enabled)return;e.preventDefault(),e.stopPropagation(),d=n,r.domElement.ownerDocument.removeEventListener("pointermove",P),r.domElement.ownerDocument.removeEventListener("pointerup",F),r.dispatchEvent(R)}(e)}}function _(e){!1!==r.enabled&&(window.removeEventListener("keydown",_),f===n&&(e.keyCode!==r.keys[o]||r.noRotate?e.keyCode!==r.keys[a]||r.noZoom?e.keyCode!==r.keys[i]||r.noPan||(f=i):f=a:f=o))}function k(){!1!==r.enabled&&(f=n,window.addEventListener("keydown",_,!1))}function U(e){if(!1!==r.enabled&&!0!==r.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:M.y-=.025*e.deltaY;break;case 1:M.y-=.01*e.deltaY;break;default:M.y-=25e-5*e.deltaY}r.dispatchEvent(S),r.dispatchEvent(R)}}function V(e){if(!1!==r.enabled){switch(e.preventDefault(),e.touches.length){case 1:d=s,g.copy(E(e.touches[0].pageX,e.touches[0].pageY)),v.copy(g);break;default:d=c;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;w=I=Math.sqrt(t*t+n*n);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;D.copy(G(o,a)),x.copy(D)}r.dispatchEvent(S)}}function L(e){if(!1!==r.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:v.copy(g),g.copy(E(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;w=Math.sqrt(t*t+n*n);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;x.copy(G(o,a))}}function N(e){if(!1!==r.enabled){switch(e.touches.length){case 0:d=n;break;case 1:d=s,g.copy(E(e.touches[0].pageX,e.touches[0].pageY)),v.copy(g)}r.dispatchEvent(R)}}function j(e){!1!==r.enabled&&e.preventDefault()}this.rotateCamera=function(){var e,t=new m.Vector3,n=new m.Quaternion,o=new m.Vector3,a=new m.Vector3,i=new m.Vector3,s=new m.Vector3;return function(){s.set(g.x-v.x,g.y-v.y,0),(e=s.length())?(p.copy(r.object.position).sub(r.target),o.copy(p).normalize(),a.copy(r.object.up).normalize(),i.crossVectors(a,o).normalize(),a.setLength(g.y-v.y),i.setLength(g.x-v.x),s.copy(a.add(i)),t.crossVectors(s,p).normalize(),e*=r.rotateSpeed,n.setFromAxisAngle(t,e),p.applyQuaternion(n),r.object.up.applyQuaternion(n),y.copy(t),b=e):!r.staticMoving&&b&&(b*=Math.sqrt(1-r.dynamicDampingFactor),p.copy(r.object.position).sub(r.target),n.setFromAxisAngle(y,b),p.applyQuaternion(n),r.object.up.applyQuaternion(n)),v.copy(g)}}(),this.zoomCamera=function(){var e;d===c?(e=I/w,I=w,r.object.isPerspectiveCamera?p.multiplyScalar(e):r.object.isOrthographicCamera?(r.object.zoom*=e,r.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(A.y-M.y)*r.zoomSpeed)&&e>0&&(r.object.isPerspectiveCamera?p.multiplyScalar(e):r.object.isOrthographicCamera?(r.object.zoom/=e,r.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),r.staticMoving?M.copy(A):M.y+=(A.y-M.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new m.Vector2,t=new m.Vector3,n=new m.Vector3;return function(){if(e.copy(x).sub(D),e.lengthSq()){if(r.object.isOrthographicCamera){var o=(r.object.right-r.object.left)/r.object.zoom/r.domElement.clientWidth,a=(r.object.top-r.object.bottom)/r.object.zoom/r.domElement.clientWidth;e.x*=o,e.y*=a}e.multiplyScalar(p.length()*r.panSpeed),n.copy(p).cross(r.object.up).setLength(e.x),n.add(t.copy(r.object.up).setLength(e.y)),r.object.position.add(n),r.target.add(n),r.staticMoving?D.copy(x):D.add(e.subVectors(x,D).multiplyScalar(r.dynamicDampingFactor))}}}(),this.checkDistances=function(){r.noZoom&&r.noPan||(p.lengthSq()>r.maxDistance*r.maxDistance&&(r.object.position.addVectors(r.target,p.setLength(r.maxDistance)),M.copy(A)),p.lengthSq()<r.minDistance*r.minDistance&&(r.object.position.addVectors(r.target,p.setLength(r.minDistance)),M.copy(A)))},this.update=function(){p.subVectors(r.object.position,r.target),r.noRotate||r.rotateCamera(),r.noZoom||r.zoomCamera(),r.noPan||r.panCamera(),r.object.position.addVectors(r.target,p),r.object.isPerspectiveCamera?(r.checkDistances(),r.object.lookAt(r.target),l.distanceToSquared(r.object.position)>u&&(r.dispatchEvent(T),l.copy(r.object.position))):r.object.isOrthographicCamera?(r.object.lookAt(r.target),(l.distanceToSquared(r.object.position)>u||h!==r.object.zoom)&&(r.dispatchEvent(T),l.copy(r.object.position),h=r.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){d=n,f=n,r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.up.copy(r.up0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),p.subVectors(r.object.position,r.target),r.object.lookAt(r.target),r.dispatchEvent(T),l.copy(r.object.position),h=r.object.zoom},this.dispose=function(){r.domElement.removeEventListener("contextmenu",j,!1),r.domElement.removeEventListener("pointerdown",O,!1),r.domElement.removeEventListener("wheel",U,!1),r.domElement.removeEventListener("touchstart",V,!1),r.domElement.removeEventListener("touchend",N,!1),r.domElement.removeEventListener("touchmove",L,!1),r.domElement.ownerDocument.removeEventListener("pointermove",P,!1),r.domElement.ownerDocument.removeEventListener("pointerup",F,!1),window.removeEventListener("keydown",_,!1),window.removeEventListener("keyup",k,!1)},this.domElement.addEventListener("contextmenu",j,!1),this.domElement.addEventListener("pointerdown",O,!1),this.domElement.addEventListener("wheel",U,!1),this.domElement.addEventListener("touchstart",V,!1),this.domElement.addEventListener("touchend",N,!1),this.domElement.addEventListener("touchmove",L,!1),this.domElement.ownerDocument.addEventListener("pointermove",P,!1),this.domElement.ownerDocument.addEventListener("pointerup",F,!1),window.addEventListener("keydown",_,!1),window.addEventListener("keyup",k,!1),this.handleResize(),this.update()};(J.prototype=Object.create(m.EventDispatcher.prototype)).constructor=J;var ee=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),m.Object3D.call(this),this.visible=!1,this.domElement=t;var r=new te;this.add(r);var n=new re;this.add(n);var o=this;C("camera",e),C("object",void 0),C("enabled",!0),C("axis",null),C("mode","translate"),C("translationSnap",null),C("rotationSnap",null),C("scaleSnap",null),C("space","world"),C("size",1),C("dragging",!1),C("showX",!0),C("showY",!0),C("showZ",!0);var a={type:"change"},i={type:"mouseDown"},s={type:"mouseUp",mode:o.mode},c={type:"objectChange"},u=new m.Raycaster;function l(e,t,r){for(var n=t.intersectObject(e,!0),o=0;o<n.length;o++)if(n[o].object.visible||r)return n[o];return!1}var h=new m.Vector3,d=new m.Vector3,f=new m.Quaternion,p={X:new m.Vector3(1,0,0),Y:new m.Vector3(0,1,0),Z:new m.Vector3(0,0,1)},v=new m.Vector3,g=new m.Vector3,y=new m.Vector3,b=new m.Vector3,M=new m.Vector3,A=new m.Vector3,I=0,w=new m.Vector3,D=new m.Quaternion,x=new m.Vector3,T=new m.Vector3,S=new m.Quaternion,R=new m.Quaternion,G=new m.Vector3,E=new m.Vector3,O=new m.Quaternion,P=new m.Vector3,F=new m.Vector3,_=new m.Quaternion,k=new m.Quaternion,U=new m.Vector3,V=new m.Vector3,L=new m.Vector3,N=new m.Quaternion,j=new m.Vector3;function C(e,t){var i=t;Object.defineProperty(o,e,{get:function(){return void 0!==i?i:t},set:function(t){i!==t&&(i=t,n[e]=t,r[e]=t,o.dispatchEvent({type:e+"-changed",value:t}),o.dispatchEvent(a))}}),o[e]=t,n[e]=t,r[e]=t}function X(e){if(o.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var r=e.changedTouches?e.changedTouches[0]:e,n=t.getBoundingClientRect();return{x:(r.clientX-n.left)/n.width*2-1,y:-(r.clientY-n.top)/n.height*2+1,button:e.button}}function H(e){if(o.enabled)switch(e.pointerType){case"mouse":case"pen":o.pointerHover(X(e))}}function B(e){o.enabled&&(o.domElement.style.touchAction="none",o.domElement.ownerDocument.addEventListener("pointermove",z,!1),o.pointerHover(X(e)),o.pointerDown(X(e)))}function z(e){o.enabled&&o.pointerMove(X(e))}function Q(e){o.enabled&&(o.domElement.style.touchAction="",o.domElement.ownerDocument.removeEventListener("pointermove",z,!1),o.pointerUp(X(e)))}C("worldPosition",F),C("worldPositionStart",E),C("worldQuaternion",_),C("worldQuaternionStart",O),C("cameraPosition",w),C("cameraQuaternion",D),C("pointStart",v),C("pointEnd",g),C("rotationAxis",b),C("rotationAngle",I),C("eye",V),t.addEventListener("pointerdown",B,!1),t.addEventListener("pointermove",H,!1),o.domElement.ownerDocument.addEventListener("pointerup",Q,!1),this.dispose=function(){t.removeEventListener("pointerdown",B),t.removeEventListener("pointermove",H),o.domElement.ownerDocument.removeEventListener("pointermove",z),o.domElement.ownerDocument.removeEventListener("pointerup",Q),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(T,S,G),this.object.matrixWorld.decompose(F,_,U),R.copy(S).inverse(),k.copy(_).inverse()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(w,D,x),V.copy(w).sub(F).normalize(),m.Object3D.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){u.setFromCamera(e,this.camera);var t=l(r.picker[this.mode],u);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){u.setFromCamera(e,this.camera);var t=l(n,u,!0);if(t){var r=this.space;if("scale"===this.mode?r="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(r="world"),"local"===r&&"rotate"===this.mode){var o=this.rotationSnap;"X"===this.axis&&o&&(this.object.rotation.x=Math.round(this.object.rotation.x/o)*o),"Y"===this.axis&&o&&(this.object.rotation.y=Math.round(this.object.rotation.y/o)*o),"Z"===this.axis&&o&&(this.object.rotation.z=Math.round(this.object.rotation.z/o)*o)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),L.copy(this.object.position),N.copy(this.object.quaternion),j.copy(this.object.scale),this.object.matrixWorld.decompose(E,O,P),v.copy(t.point).sub(E)}this.dragging=!0,i.mode=this.mode,this.dispatchEvent(i)}},this.pointerMove=function(e){var t=this.axis,r=this.mode,o=this.object,i=this.space;if("scale"===r?i="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(i="world"),void 0!==o&&null!==t&&!1!==this.dragging&&-1===e.button){u.setFromCamera(e,this.camera);var s=l(n,u,!0);if(s){if(g.copy(s.point).sub(E),"translate"===r)y.copy(g).sub(v),"local"===i&&"XYZ"!==t&&y.applyQuaternion(k),-1===t.indexOf("X")&&(y.x=0),-1===t.indexOf("Y")&&(y.y=0),-1===t.indexOf("Z")&&(y.z=0),"local"===i&&"XYZ"!==t?y.applyQuaternion(N).divide(G):y.applyQuaternion(R).divide(G),o.position.copy(y).add(L),this.translationSnap&&("local"===i&&(o.position.applyQuaternion(f.copy(N).inverse()),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(N)),"world"===i&&(o.parent&&o.position.add(h.setFromMatrixPosition(o.parent.matrixWorld)),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(h.setFromMatrixPosition(o.parent.matrixWorld))));else if("scale"===r){if(-1!==t.search("XYZ")){var m=g.length()/v.length();g.dot(v)<0&&(m*=-1),d.set(m,m,m)}else h.copy(v),d.copy(g),h.applyQuaternion(k),d.applyQuaternion(k),d.divide(h),-1===t.search("X")&&(d.x=1),-1===t.search("Y")&&(d.y=1),-1===t.search("Z")&&(d.z=1);o.scale.copy(j).multiply(d),this.scaleSnap&&(-1!==t.search("X")&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===r){y.copy(g).sub(v);var w=20/F.distanceTo(h.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(b.copy(V),I=g.angleTo(v),M.copy(v).normalize(),A.copy(g).normalize(),I*=A.cross(M).dot(V)<0?1:-1):"XYZE"===t?(b.copy(y).cross(V).normalize(),I=y.dot(h.copy(b).cross(this.eye))*w):"X"!==t&&"Y"!==t&&"Z"!==t||(b.copy(p[t]),h.copy(p[t]),"local"===i&&h.applyQuaternion(_),I=y.dot(h.cross(V).normalize())*w),this.rotationSnap&&(I=Math.round(I/this.rotationSnap)*this.rotationSnap),this.rotationAngle=I,"local"===i&&"E"!==t&&"XYZE"!==t?(o.quaternion.copy(N),o.quaternion.multiply(f.setFromAxisAngle(b,I)).normalize()):(b.applyQuaternion(R),o.quaternion.copy(f.setFromAxisAngle(b,I)),o.quaternion.multiply(N).normalize())}this.dispatchEvent(a),this.dispatchEvent(c)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(s.mode=this.mode,this.dispatchEvent(s)),this.dragging=!1,this.axis=null)},this.getMode=function(){return o.mode},this.setMode=function(e){o.mode=e},this.setTranslationSnap=function(e){o.translationSnap=e},this.setRotationSnap=function(e){o.rotationSnap=e},this.setScaleSnap=function(e){o.scaleSnap=e},this.setSize=function(e){o.size=e},this.setSpace=function(e){o.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};ee.prototype=Object.assign(Object.create(m.Object3D.prototype),{constructor:ee,isTransformControls:!0});var te=function(){m.Object3D.call(this),this.type="TransformControlsGizmo";var e=new m.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:m.DoubleSide,fog:!1,toneMapped:!1}),t=new m.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),r=e.clone();r.opacity=.15;var n=e.clone();n.opacity=.33;var o=e.clone();o.color.set(16711680);var a=e.clone();a.color.set(65280);var i=e.clone();i.color.set(255);var s=e.clone();s.opacity=.25;var c=s.clone();c.color.set(16776960);var u=s.clone();u.color.set(65535);var l=s.clone();l.color.set(16711935),e.clone().color.set(16776960);var h=t.clone();h.color.set(16711680);var d=t.clone();d.color.set(65280);var f=t.clone();f.color.set(255);var p=t.clone();p.color.set(65535);var v=t.clone();v.color.set(16711935);var g=t.clone();g.color.set(16776960);var y=t.clone();y.color.set(7895160);var b=g.clone();b.opacity=.25;var M=new m.CylinderBufferGeometry(0,.05,.2,12,1,!1),A=new m.BoxBufferGeometry(.125,.125,.125),I=new m.BufferGeometry;I.setAttribute("position",new m.Float32BufferAttribute([0,0,0,1,0,0],3));var w=function(e,t){for(var r=new m.BufferGeometry,n=[],o=0;o<=64*t;++o)n.push(0,Math.cos(o/32*Math.PI)*e,Math.sin(o/32*Math.PI)*e);return r.setAttribute("position",new m.Float32BufferAttribute(n,3)),r},D={X:[[new m.Mesh(M,o),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new m.Mesh(M,o),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new m.Line(I,h)]],Y:[[new m.Mesh(M,a),[0,1,0],null,null,"fwd"],[new m.Mesh(M,a),[0,1,0],[Math.PI,0,0],null,"bwd"],[new m.Line(I,d),null,[0,0,Math.PI/2]]],Z:[[new m.Mesh(M,i),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new m.Mesh(M,i),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new m.Line(I,f),null,[0,-Math.PI/2,0]]],XYZ:[[new m.Mesh(new m.OctahedronBufferGeometry(.1,0),s.clone()),[0,0,0],[0,0,0]]],XY:[[new m.Mesh(new m.PlaneBufferGeometry(.295,.295),c.clone()),[.15,.15,0]],[new m.Line(I,g),[.18,.3,0],null,[.125,1,1]],[new m.Line(I,g),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new m.Mesh(new m.PlaneBufferGeometry(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new m.Line(I,p),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new m.Line(I,p),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new m.Mesh(new m.PlaneBufferGeometry(.295,.295),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new m.Line(I,v),[.18,0,.3],null,[.125,1,1]],[new m.Line(I,v),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},x={X:[[new m.Mesh(new m.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new m.Mesh(new m.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[0,.6,0]]],Z:[[new m.Mesh(new m.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new m.Mesh(new m.OctahedronBufferGeometry(.2,0),r)]],XY:[[new m.Mesh(new m.PlaneBufferGeometry(.4,.4),r),[.2,.2,0]]],YZ:[[new m.Mesh(new m.PlaneBufferGeometry(.4,.4),r),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new m.Mesh(new m.PlaneBufferGeometry(.4,.4),r),[.2,0,.2],[-Math.PI/2,0,0]]]},T={START:[[new m.Mesh(new m.OctahedronBufferGeometry(.01,2),n),null,null,null,"helper"]],END:[[new m.Mesh(new m.OctahedronBufferGeometry(.01,2),n),null,null,null,"helper"]],DELTA:[[new m.Line(function(){var e=new m.BufferGeometry;return e.setAttribute("position",new m.Float32BufferAttribute([0,0,0,1,1,1],3)),e}(),n),null,null,null,"helper"]],X:[[new m.Line(I,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new m.Line(I,n.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new m.Line(I,n.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},S={X:[[new m.Line(w(1,.5),h)],[new m.Mesh(new m.OctahedronBufferGeometry(.04,0),o),[0,0,.99],null,[1,3,1]]],Y:[[new m.Line(w(1,.5),d),null,[0,0,-Math.PI/2]],[new m.Mesh(new m.OctahedronBufferGeometry(.04,0),a),[0,0,.99],null,[3,1,1]]],Z:[[new m.Line(w(1,.5),f),null,[0,Math.PI/2,0]],[new m.Mesh(new m.OctahedronBufferGeometry(.04,0),i),[.99,0,0],null,[1,3,1]]],E:[[new m.Line(w(1.25,1),b),null,[0,Math.PI/2,0]],[new m.Mesh(new m.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new m.Mesh(new m.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new m.Mesh(new m.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new m.Mesh(new m.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new m.Line(w(1,1),y),null,[0,Math.PI/2,0]]]},R={AXIS:[[new m.Line(I,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},G={X:[[new m.Mesh(new m.TorusBufferGeometry(1,.1,4,24),r),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new m.Mesh(new m.TorusBufferGeometry(1,.1,4,24),r),[0,0,0],[Math.PI/2,0,0]]],Z:[[new m.Mesh(new m.TorusBufferGeometry(1,.1,4,24),r),[0,0,0],[0,0,-Math.PI/2]]],E:[[new m.Mesh(new m.TorusBufferGeometry(1.25,.1,2,24),r)]],XYZE:[[new m.Mesh(new m.SphereBufferGeometry(.7,10,8),r)]]},E={X:[[new m.Mesh(A,o),[.8,0,0],[0,0,-Math.PI/2]],[new m.Line(I,h),null,null,[.8,1,1]]],Y:[[new m.Mesh(A,a),[0,.8,0]],[new m.Line(I,d),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new m.Mesh(A,i),[0,0,.8],[Math.PI/2,0,0]],[new m.Line(I,f),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new m.Mesh(A,c),[.85,.85,0],null,[2,2,.2]],[new m.Line(I,g),[.855,.98,0],null,[.125,1,1]],[new m.Line(I,g),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new m.Mesh(A,u),[0,.85,.85],null,[.2,2,2]],[new m.Line(I,p),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new m.Line(I,p),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new m.Mesh(A,l),[.85,0,.85],null,[2,.2,2]],[new m.Line(I,v),[.855,0,.98],null,[.125,1,1]],[new m.Line(I,v),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new m.Mesh(new m.BoxBufferGeometry(.125,.125,.125),s.clone()),[1.1,0,0]]],XYZY:[[new m.Mesh(new m.BoxBufferGeometry(.125,.125,.125),s.clone()),[0,1.1,0]]],XYZZ:[[new m.Mesh(new m.BoxBufferGeometry(.125,.125,.125),s.clone()),[0,0,1.1]]]},O={X:[[new m.Mesh(new m.CylinderBufferGeometry(.2,0,.8,4,1,!1),r),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new m.Mesh(new m.CylinderBufferGeometry(.2,0,.8,4,1,!1),r),[0,.5,0]]],Z:[[new m.Mesh(new m.CylinderBufferGeometry(.2,0,.8,4,1,!1),r),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new m.Mesh(A,r),[.85,.85,0],null,[3,3,.2]]],YZ:[[new m.Mesh(A,r),[0,.85,.85],null,[.2,3,3]]],XZ:[[new m.Mesh(A,r),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new m.Mesh(new m.BoxBufferGeometry(.2,.2,.2),r),[1.1,0,0]]],XYZY:[[new m.Mesh(new m.BoxBufferGeometry(.2,.2,.2),r),[0,1.1,0]]],XYZZ:[[new m.Mesh(new m.BoxBufferGeometry(.2,.2,.2),r),[0,0,1.1]]]},P={X:[[new m.Line(I,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new m.Line(I,n.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new m.Line(I,n.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},F=function(e){var t=new m.Object3D;for(var r in e)for(var n=e[r].length;n--;){var o=e[r][n][0].clone(),a=e[r][n][1],i=e[r][n][2],s=e[r][n][3],c=e[r][n][4];o.name=r,o.tag=c,a&&o.position.set(a[0],a[1],a[2]),i&&o.rotation.set(i[0],i[1],i[2]),s&&o.scale.set(s[0],s[1],s[2]),o.updateMatrix();var u=o.geometry.clone();u.applyMatrix4(o.matrix),o.geometry=u,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),t.add(o)}return t},_=new m.Vector3(0,0,0),k=new m.Euler,U=new m.Vector3(0,1,0),V=new m.Vector3(0,0,0),L=new m.Matrix4,N=new m.Quaternion,j=new m.Quaternion,C=new m.Quaternion,X=new m.Vector3(1,0,0),H=new m.Vector3(0,1,0),B=new m.Vector3(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=F(D)),this.add(this.gizmo.rotate=F(S)),this.add(this.gizmo.scale=F(E)),this.add(this.picker.translate=F(x)),this.add(this.picker.rotate=F(G)),this.add(this.picker.scale=F(O)),this.add(this.helper.translate=F(T)),this.add(this.helper.rotate=F(R)),this.add(this.helper.scale=F(P)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:C;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var r=[];r=(r=(r=r.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var n=0;n<r.length;n++){var o,a=r[n];if(a.visible=!0,a.rotation.set(0,0,0),a.position.copy(this.worldPosition),o=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),a.scale.set(1,1,1).multiplyScalar(o*this.size/7),"helper"!==a.tag){if(a.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){var i=.99;"X"!==a.name&&"XYZX"!==a.name||Math.abs(U.copy(X).applyQuaternion(t).dot(this.eye))>i&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Y"!==a.name&&"XYZY"!==a.name||Math.abs(U.copy(H).applyQuaternion(t).dot(this.eye))>i&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Z"!==a.name&&"XYZZ"!==a.name||Math.abs(U.copy(B).applyQuaternion(t).dot(this.eye))>i&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XY"===a.name&&Math.abs(U.copy(B).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"YZ"===a.name&&Math.abs(U.copy(X).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XZ"===a.name&&Math.abs(U.copy(H).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),-1!==a.name.search("X")&&(U.copy(X).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.x*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Y")&&(U.copy(H).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.y*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Z")&&(U.copy(B).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.z*=-1:"bwd"===a.tag&&(a.visible=!1))}else"rotate"===this.mode&&(j.copy(t),U.copy(this.eye).applyQuaternion(N.copy(t).inverse()),-1!==a.name.search("E")&&a.quaternion.setFromRotationMatrix(L.lookAt(this.eye,V,H)),"X"===a.name&&(N.setFromAxisAngle(X,Math.atan2(-U.y,U.z)),N.multiplyQuaternions(j,N),a.quaternion.copy(N)),"Y"===a.name&&(N.setFromAxisAngle(H,Math.atan2(U.x,U.z)),N.multiplyQuaternions(j,N),a.quaternion.copy(N)),"Z"===a.name&&(N.setFromAxisAngle(B,Math.atan2(U.y,U.x)),N.multiplyQuaternions(j,N),a.quaternion.copy(N)));a.visible=a.visible&&(-1===a.name.indexOf("X")||this.showX),a.visible=a.visible&&(-1===a.name.indexOf("Y")||this.showY),a.visible=a.visible&&(-1===a.name.indexOf("Z")||this.showZ),a.visible=a.visible&&(-1===a.name.indexOf("E")||this.showX&&this.showY&&this.showZ),a.material._opacity=a.material._opacity||a.material.opacity,a.material._color=a.material._color||a.material.color.clone(),a.material.color.copy(a.material._color),a.material.opacity=a.material._opacity,this.enabled?this.axis&&(a.name===this.axis||this.axis.split("").some((function(e){return a.name===e}))?(a.material.opacity=1,a.material.color.lerp(new m.Color(1,1,1),.5)):(a.material.opacity*=.25,a.material.color.lerp(new m.Color(1,1,1),.5))):(a.material.opacity*=.5,a.material.color.lerp(new m.Color(1,1,1),.5))}else a.visible=!1,"AXIS"===a.name?(a.position.copy(this.worldPositionStart),a.visible=!!this.axis,"X"===this.axis&&(N.setFromEuler(k.set(0,0,0)),a.quaternion.copy(t).multiply(N),Math.abs(U.copy(X).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Y"===this.axis&&(N.setFromEuler(k.set(0,0,Math.PI/2)),a.quaternion.copy(t).multiply(N),Math.abs(U.copy(H).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Z"===this.axis&&(N.setFromEuler(k.set(0,Math.PI/2,0)),a.quaternion.copy(t).multiply(N),Math.abs(U.copy(B).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"XYZE"===this.axis&&(N.setFromEuler(k.set(0,Math.PI/2,0)),U.copy(this.rotationAxis),a.quaternion.setFromRotationMatrix(L.lookAt(V,U,H)),a.quaternion.multiply(N),a.visible=this.dragging),"E"===this.axis&&(a.visible=!1)):"START"===a.name?(a.position.copy(this.worldPositionStart),a.visible=this.dragging):"END"===a.name?(a.position.copy(this.worldPosition),a.visible=this.dragging):"DELTA"===a.name?(a.position.copy(this.worldPositionStart),a.quaternion.copy(this.worldQuaternionStart),_.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),_.applyQuaternion(this.worldQuaternionStart.clone().inverse()),a.scale.copy(_),a.visible=this.dragging):(a.quaternion.copy(t),this.dragging?a.position.copy(this.worldPositionStart):a.position.copy(this.worldPosition),this.axis&&(a.visible=-1!==this.axis.search(a.name)))}m.Object3D.prototype.updateMatrixWorld.call(this)}};te.prototype=Object.assign(Object.create(m.Object3D.prototype),{constructor:te,isTransformControlsGizmo:!0});var re=function(){m.Mesh.call(this,new m.PlaneBufferGeometry(1e5,1e5,2,2),new m.MeshBasicMaterial({visible:!1,wireframe:!0,side:m.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new m.Vector3(1,0,0),t=new m.Vector3(0,1,0),r=new m.Vector3(0,0,1),n=new m.Vector3,o=new m.Vector3,a=new m.Vector3,i=new m.Matrix4,s=new m.Quaternion;this.updateMatrixWorld=function(){var c=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(c="local"),e.set(1,0,0).applyQuaternion("local"===c?this.worldQuaternion:s),t.set(0,1,0).applyQuaternion("local"===c?this.worldQuaternion:s),r.set(0,0,1).applyQuaternion("local"===c?this.worldQuaternion:s),a.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":a.copy(this.eye).cross(e),o.copy(e).cross(a);break;case"Y":a.copy(this.eye).cross(t),o.copy(t).cross(a);break;case"Z":a.copy(this.eye).cross(r),o.copy(r).cross(a);break;case"XY":o.copy(r);break;case"YZ":o.copy(e);break;case"XZ":a.copy(r),o.copy(t);break;case"XYZ":case"E":o.set(0,0,0)}break;case"rotate":default:o.set(0,0,0)}0===o.length()?this.quaternion.copy(this.cameraQuaternion):(i.lookAt(n.set(0,0,0),o,a),this.quaternion.setFromRotationMatrix(i)),m.Object3D.prototype.updateMatrixWorld.call(this)}};re.prototype=Object.assign(Object.create(m.Mesh.prototype),{constructor:re,isTransformControlsPlane:!0});r(158),r(159);var ne=function(e,t){void 0===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI;var r=this,n={type:"change"},o={type:"lock"},a={type:"unlock"},i=new m.Euler(0,0,0,"YXZ"),s=Math.PI/2,c=new m.Vector3;function u(t){if(!1!==r.isLocked){var o=t.movementX||t.mozMovementX||t.webkitMovementX||0,a=t.movementY||t.mozMovementY||t.webkitMovementY||0;i.setFromQuaternion(e.quaternion),i.y-=.002*o,i.x-=.002*a,i.x=Math.max(s-r.maxPolarAngle,Math.min(s-r.minPolarAngle,i.x)),e.quaternion.setFromEuler(i),r.dispatchEvent(n)}}function l(){r.domElement.ownerDocument.pointerLockElement===r.domElement?(r.dispatchEvent(o),r.isLocked=!0):(r.dispatchEvent(a),r.isLocked=!1)}function h(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}this.connect=function(){r.domElement.ownerDocument.addEventListener("mousemove",u,!1),r.domElement.ownerDocument.addEventListener("pointerlockchange",l,!1),r.domElement.ownerDocument.addEventListener("pointerlockerror",h,!1)},this.disconnect=function(){r.domElement.ownerDocument.removeEventListener("mousemove",u,!1),r.domElement.ownerDocument.removeEventListener("pointerlockchange",l,!1),r.domElement.ownerDocument.removeEventListener("pointerlockerror",h,!1)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=function(){var t=new m.Vector3(0,0,-1);return function(r){return r.copy(t).applyQuaternion(e.quaternion)}}(),this.moveForward=function(t){c.setFromMatrixColumn(e.matrix,0),c.crossVectors(e.up,c),e.position.addScaledVector(c,t)},this.moveRight=function(t){c.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(c,t)},this.lock=function(){this.domElement.requestPointerLock()},this.unlock=function(){r.domElement.ownerDocument.exitPointerLock()},this.connect()};(ne.prototype=Object.create(m.EventDispatcher.prototype)).constructor=ne;var oe=r(105),ae=r.n(oe);function ie(e){var t,r=new Set,n=function(e,n){var o="function"===typeof e?e(t):e;o!==t&&(t=n?o:Object.assign({},t,o),r.forEach((function(e){return e(t)})))},o=function(){return t},a={setState:n,getState:o,subscribe:function(e,n,a){return n||a?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is,i=n(t);function s(){try{var r=n(t);a(i,r)||e(i=r)}catch(o){e(null,o)}}return r.add(s),function(){return r.delete(s)}}(e,n,a):(r.add(e),function(){return r.delete(e)})},destroy:function(){return r.clear()}};return t=e(n,o,a),a}var se="undefined"===typeof window?f.useEffect:f.useLayoutEffect;var ce=function(e){var t="function"===typeof e?ie(e):e,r=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,o=Object(f.useReducer)((function(e){return e+1}),0),a=Object(l.a)(o,2),i=a[1],s=t.getState(),c=Object(f.useRef)(s),u=Object(f.useRef)(r),h=Object(f.useRef)(n),d=Object(f.useRef)(!1),p=Object(f.useRef)();void 0===p.current&&(p.current=r(s));var v=!1;(c.current!==s||u.current!==r||h.current!==n||d.current)&&(e=r(s),v=!n(p.current,e)),se((function(){v&&(p.current=e),c.current=s,u.current=r,h.current=n,d.current=!1}));var m=Object(f.useRef)(s);return Object(f.useEffect)((function(){var e=function(){try{var e=t.getState(),r=u.current(e);h.current(p.current,r)||(c.current=e,p.current=r,i())}catch(n){d.current=!0,i()}},r=t.subscribe(e);return t.getState()!==m.current&&e(),r}),[]),v?e:p.current};return Object.assign(r,t),r[Symbol.iterator]=ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("[useStore, api] = create() is deprecated and will be removed in v4"),e.next=3,r;case 3:return e.next=5,t;case 5:case"end":return e.stop()}}),e)})),r},ue=(r(77),r(171),{}),le=void 0,he=ue;function de(e,t){var r,n=e.split("."),o=he;!(n[0]in o)&&o.execScript&&o.execScript("var "+n[0]);for(;n.length&&(r=n.shift());)n.length||t===le?o=o[r]?o[r]:o[r]={}:o[r]=t}var fe="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&"undefined"!==typeof DataView;function pe(e){var t,r,n,o,a,i,s,c,u,l,h=e.length,d=0,f=Number.POSITIVE_INFINITY;for(c=0;c<h;++c)e[c]>d&&(d=e[c]),e[c]<f&&(f=e[c]);for(t=1<<d,r=new(fe?Uint32Array:Array)(t),n=1,o=0,a=2;n<=d;){for(c=0;c<h;++c)if(e[c]===n){for(i=0,s=o,u=0;u<n;++u)i=i<<1|1&s,s>>=1;for(l=n<<16|c,u=i;u<t;u+=a)r[u]=l;++o}++n,o<<=1,a<<=1}return[r,d,f]}function ve(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=fe?new Uint8Array(e):e,this.m=!1,this.i=ge,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case me:this.b=32768,this.c=new(fe?Uint8Array:Array)(32768+this.h+258);break;case ge:this.b=0,this.c=new(fe?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var me=0,ge=1,ye={t:me,s:ge};ve.prototype.k=function(){for(;!this.m;){var e=Ve(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,r=this.a,n=this.c,o=this.b,a=t.length,i=le,s=n.length,c=le;if(this.d=this.f=0,r+1>=a)throw Error("invalid uncompressed block header: LEN");if(i=t[r++]|t[r++]<<8,r+1>=a)throw Error("invalid uncompressed block header: NLEN");if(i===~(t[r++]|t[r++]<<8))throw Error("invalid uncompressed block header: length verify");if(r+i>t.length)throw Error("input buffer is broken");switch(this.i){case me:for(;o+i>n.length;){if(i-=c=s-o,fe)n.set(t.subarray(r,r+c),o),o+=c,r+=c;else for(;c--;)n[o++]=t[r++];this.b=o,n=this.e(),o=this.b}break;case ge:for(;o+i>n.length;)n=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(fe)n.set(t.subarray(r,r+i),o),o+=i,r+=i;else for(;i--;)n[o++]=t[r++];this.a=r,this.b=o,this.c=n;break;case 1:this.j(_e,Ue);break;case 2:var u,l,h,d,f=Ve(this,5)+257,p=Ve(this,5)+1,v=Ve(this,4)+4,m=new(fe?Uint8Array:Array)(Ie.length),g=le,y=le,b=le,M=le,A=le;for(A=0;A<v;++A)m[Ie[A]]=Ve(this,3);if(!fe)for(A=v,v=m.length;A<v;++A)m[Ie[A]]=0;for(u=pe(m),g=new(fe?Uint8Array:Array)(f+p),A=0,d=f+p;A<d;)switch(y=Le(this,u)){case 16:for(M=3+Ve(this,2);M--;)g[A++]=b;break;case 17:for(M=3+Ve(this,3);M--;)g[A++]=0;b=0;break;case 18:for(M=11+Ve(this,7);M--;)g[A++]=0;b=0;break;default:b=g[A++]=y}l=pe(fe?g.subarray(0,f):g.slice(0,f)),h=pe(fe?g.subarray(f):g.slice(f)),this.j(l,h);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var be,Me,Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ie=fe?new Uint16Array(Ae):Ae,we=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],De=fe?new Uint16Array(we):we,xe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],Te=fe?new Uint8Array(xe):xe,Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Re=fe?new Uint16Array(Se):Se,Ge=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ee=fe?new Uint8Array(Ge):Ge,Oe=new(fe?Uint8Array:Array)(288);for(be=0,Me=Oe.length;be<Me;++be)Oe[be]=143>=be?8:255>=be?9:279>=be?7:8;var Pe,Fe,_e=pe(Oe),ke=new(fe?Uint8Array:Array)(30);for(Pe=0,Fe=ke.length;Pe<Fe;++Pe)ke[Pe]=5;var Ue=pe(ke);function Ve(e,t){for(var r,n=e.f,o=e.d,a=e.input,i=e.a,s=a.length;o<t;){if(i>=s)throw Error("input buffer is broken");n|=a[i++]<<o,o+=8}return r=n&(1<<t)-1,e.f=n>>>t,e.d=o-t,e.a=i,r}function Le(e,t){for(var r,n,o=e.f,a=e.d,i=e.input,s=e.a,c=i.length,u=t[0],l=t[1];a<l&&!(s>=c);)o|=i[s++]<<a,a+=8;if((n=(r=u[o&(1<<l)-1])>>>16)>a)throw Error("invalid code length: "+n);return e.f=o>>n,e.d=a-n,e.a=s,65535&r}function Ne(e,t){var r,n;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),r=e[this.a++],n=e[this.a++],15&r){case je:this.method=je;break;default:throw Error("unsupported compression method")}if(0!==((r<<8)+n)%31)throw Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.q=new ve(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}ve.prototype.j=function(e,t){var r=this.c,n=this.b;this.o=e;for(var o,a,i,s,c=r.length-258;256!==(o=Le(this,e));)if(256>o)n>=c&&(this.b=n,r=this.e(),n=this.b),r[n++]=o;else for(s=De[a=o-257],0<Te[a]&&(s+=Ve(this,Te[a])),o=Le(this,t),i=Re[o],0<Ee[o]&&(i+=Ve(this,Ee[o])),n>=c&&(this.b=n,r=this.e(),n=this.b);s--;)r[n]=r[n++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},ve.prototype.w=function(e,t){var r=this.c,n=this.b;this.o=e;for(var o,a,i,s,c=r.length;256!==(o=Le(this,e));)if(256>o)n>=c&&(c=(r=this.e()).length),r[n++]=o;else for(s=De[a=o-257],0<Te[a]&&(s+=Ve(this,Te[a])),o=Le(this,t),i=Re[o],0<Ee[o]&&(i+=Ve(this,Ee[o])),n+s>c&&(c=(r=this.e()).length);s--;)r[n]=r[n++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},ve.prototype.e=function(){var e,t,r=new(fe?Uint8Array:Array)(this.b-32768),n=this.b-32768,o=this.c;if(fe)r.set(o.subarray(32768,r.length));else for(e=0,t=r.length;e<t;++e)r[e]=o[e+32768];if(this.g.push(r),this.l+=r.length,fe)o.set(o.subarray(n,n+32768));else for(e=0;32768>e;++e)o[e]=o[n+e];return this.b=32768,o},ve.prototype.z=function(e){var t,r,n,o=this.input.length/this.a+1|0,a=this.input,i=this.c;return e&&("number"===typeof e.p&&(o=e.p),"number"===typeof e.u&&(o+=e.u)),2>o?r=(n=(a.length-this.a)/this.o[2]/2*258|0)<i.length?i.length+n:i.length<<1:r=i.length*o,fe?(t=new Uint8Array(r)).set(i):t=i,this.c=t},ve.prototype.n=function(){var e,t,r,n,o,a=0,i=this.c,s=this.g,c=new(fe?Uint8Array:Array)(this.l+(this.b-32768));if(0===s.length)return fe?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,r=s.length;t<r;++t)for(n=0,o=(e=s[t]).length;n<o;++n)c[a++]=e[n];for(t=32768,r=this.b;t<r;++t)c[a++]=i[t];return this.g=[],this.buffer=c},ve.prototype.v=function(){var e,t=this.b;return fe?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},Ne.prototype.k=function(){var e,t,r=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(r[this.a++]<<24|r[this.a++]<<16|r[this.a++]<<8|r[this.a++])>>>0;var n=e;if("string"===typeof n){var o,a,i=n.split("");for(o=0,a=i.length;o<a;o++)i[o]=(255&i[o].charCodeAt(0))>>>0;n=i}for(var s,c=1,u=0,l=n.length,h=0;0<l;){l-=s=1024<l?1024:l;do{u+=c+=n[h++]}while(--s);c%=65521,u%=65521}if(t!==(u<<16|c)>>>0)throw Error("invalid adler-32 checksum")}return e};var je=8;de("Zlib.Inflate",Ne),de("Zlib.Inflate.prototype.decompress",Ne.prototype.k);var Ce,Xe,He,Be,ze={ADAPTIVE:ye.s,BLOCK:ye.t};if(Object.keys)Ce=Object.keys(ze);else for(Xe in Ce=[],He=0,ze)Ce[He++]=Xe;for(He=0,Be=Ce.length;He<Be;++He)de("Zlib.Inflate.BufferType."+(Xe=Ce[He]),ze[Xe]);var Qe=ue.Zlib.Inflate,We={findSpan:function(e,t,r){var n=r.length-e-1;if(t>=r[n])return n-1;if(t<=r[e])return e;for(var o=e,a=n,i=Math.floor((o+a)/2);t<r[i]||t>=r[i+1];)t<r[i]?a=i:o=i,i=Math.floor((o+a)/2);return i},calcBasisFunctions:function(e,t,r,n){var o=[],a=[],i=[];o[0]=1;for(var s=1;s<=r;++s){a[s]=t-n[e+1-s],i[s]=n[e+s]-t;for(var c=0,u=0;u<s;++u){var l=i[u+1],h=a[s-u],d=o[u]/(l+h);o[u]=c+l*d,c=h*d}o[s]=c}return o},calcBSplinePoint:function(e,t,r,n){for(var o=this.findSpan(e,n,t),a=this.calcBasisFunctions(o,n,e,t),i=new m.Vector4(0,0,0,0),s=0;s<=e;++s){var c=r[o-e+s],u=a[s],l=c.w*u;i.x+=c.x*l,i.y+=c.y*l,i.z+=c.z*l,i.w+=c.w*u}return i},calcBasisFunctionDerivatives:function(e,t,r,n,o){for(var a=[],i=0;i<=r;++i)a[i]=0;var s=[];for(i=0;i<=n;++i)s[i]=a.slice(0);var c=[];for(i=0;i<=r;++i)c[i]=a.slice(0);c[0][0]=1;for(var u=a.slice(0),l=a.slice(0),h=1;h<=r;++h){u[h]=t-o[e+1-h],l[h]=o[e+h]-t;for(var d=0,f=0;f<h;++f){var p=l[f+1],v=u[h-f];c[h][f]=p+v;var m=c[f][h-1]/c[h][f];c[f][h]=d+p*m,d=v*m}c[h][h]=d}for(h=0;h<=r;++h)s[0][h]=c[h][r];for(f=0;f<=r;++f){var g=0,y=1,b=[];for(i=0;i<=r;++i)b[i]=a.slice(0);b[0][0]=1;for(var M=1;M<=n;++M){var A=0,I=f-M,w=r-M;f>=M&&(b[y][0]=b[g][0]/c[w+1][I],A=b[y][0]*c[I][w]);var D=f-1<=w?M-1:r-f;for(h=I>=-1?1:-I;h<=D;++h)b[y][h]=(b[g][h]-b[g][h-1])/c[w+1][I+h],A+=b[y][h]*c[I+h][w];f<=w&&(b[y][M]=-b[g][M-1]/c[w+1][f],A+=b[y][M]*c[f][w]),s[M][f]=A;h=g;g=y,y=h}}for(f=r,M=1;M<=n;++M){for(h=0;h<=r;++h)s[M][h]*=f;f*=r-M}return s},calcBSplineDerivatives:function(e,t,r,n,o){for(var a=o<e?o:e,i=[],s=this.findSpan(e,n,t),c=this.calcBasisFunctionDerivatives(s,n,e,a,t),u=[],l=0;l<r.length;++l){var h=(f=r[l].clone()).w;f.x*=h,f.y*=h,f.z*=h,u[l]=f}for(var d=0;d<=a;++d){for(var f=u[s-e].clone().multiplyScalar(c[d][0]),p=1;p<=e;++p)f.add(u[s-e+p].clone().multiplyScalar(c[d][p]));i[d]=f}for(d=a+1;d<=o+1;++d)i[d]=new m.Vector4(0,0,0);return i},calcKoverI:function(e,t){for(var r=1,n=2;n<=e;++n)r*=n;var o=1;for(n=2;n<=t;++n)o*=n;for(n=2;n<=e-t;++n)o*=n;return r/o},calcRationalCurveDerivatives:function(e){for(var t=e.length,r=[],n=[],o=0;o<t;++o){var a=e[o];r[o]=new m.Vector3(a.x,a.y,a.z),n[o]=a.w}for(var i=[],s=0;s<t;++s){var c=r[s].clone();for(o=1;o<=s;++o)c.sub(i[s-o].clone().multiplyScalar(this.calcKoverI(s,o)*n[o]));i[s]=c.divideScalar(n[0])}return i},calcNURBSDerivatives:function(e,t,r,n,o){var a=this.calcBSplineDerivatives(e,t,r,n,o);return this.calcRationalCurveDerivatives(a)},calcSurfacePoint:function(e,t,r,n,o,a,i,s){for(var c=this.findSpan(e,a,r),u=this.findSpan(t,i,n),l=this.calcBasisFunctions(c,a,e,r),h=this.calcBasisFunctions(u,i,t,n),d=[],f=0;f<=t;++f){d[f]=new m.Vector4(0,0,0,0);for(var p=0;p<=e;++p){var v=o[c-e+p][u-t+f].clone(),g=v.w;v.x*=g,v.y*=g,v.z*=g,d[f].add(v.multiplyScalar(l[p]))}}var y=new m.Vector4(0,0,0,0);for(f=0;f<=t;++f)y.add(d[f].multiplyScalar(h[f]));y.divideScalar(y.w),s.set(y.x,y.y,y.z)}},Ye=function(e,t,r,n,o){m.Curve.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=n||0,this.endKnot=o||this.knots.length-1;for(var a=0;a<r.length;++a){var i=r[a];this.controlPoints[a]=new m.Vector4(i.x,i.y,i.z,i.w)}};(Ye.prototype=Object.create(m.Curve.prototype)).constructor=Ye,Ye.prototype.getPoint=function(e,t){var r=t||new m.Vector3,n=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=We.calcBSplinePoint(this.degree,this.knots,this.controlPoints,n);return 1!=o.w&&o.divideScalar(o.w),r.set(o.x,o.y,o.z)},Ye.prototype.getTangent=function(e,t){var r=t||new m.Vector3,n=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=We.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,n,1);return r.copy(o[1]).normalize(),r};(function(){var e,t,r;function n(e){m.Loader.call(this,e)}function o(e,t){this.textureLoader=e,this.manager=t}function a(){}function i(){}function s(){}function c(){}function u(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function l(){}function h(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function d(e){return e/46186158e3}n.prototype=Object.assign(Object.create(m.Loader.prototype),{constructor:n,load:function(e,t,r,n){var o=this,a=""===o.path?m.LoaderUtils.extractUrlBase(e):o.path,i=new m.FileLoader(this.manager);i.setPath(o.path),i.setResponseType("arraybuffer"),i.setRequestHeader(o.requestHeader),i.setWithCredentials(o.withCredentials),i.load(e,(function(r){try{t(o.parse(r,a))}catch(i){n?n(i):console.error(i),o.manager.itemError(e)}}),r,n)},parse:function(t,r){if(function(e){var t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===A(e,0,t.length)}(t))e=(new c).parse(t);else{var n=A(t);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;function n(t){var n=e[t-1];return e=e.slice(r+t),r++,n}for(var o=0;o<t.length;++o){if(n(1)===t[o])return!1}return!0}(n))throw new Error("THREE.FBXLoader: Unknown format.");if(h(n)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+h(n));e=(new s).parse(n)}return new o(new m.TextureLoader(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin),this.manager).parse(e)}}),o.prototype={constructor:o,parse:function(){t=this.parseConnections();var e=this.parseImages(),n=this.parseTextures(e),o=this.parseMaterials(n),i=this.parseDeformers(),s=(new a).parse(i);return this.parseScene(i,s,o),r},parseConnections:function(){var t=new Map;"Connections"in e&&e.Connections.connections.forEach((function(e){var r=e[0],n=e[1],o=e[2];t.has(r)||t.set(r,{parents:[],children:[]});var a={ID:n,relationship:o};t.get(r).parents.push(a),t.has(n)||t.set(n,{parents:[],children:[]});var i={ID:r,relationship:o};t.get(n).children.push(i)}));return t},parseImages:function(){var t={},r={};if("Video"in e.Objects){var n=e.Objects.Video;for(var o in n){var a=n[o];if(t[u=parseInt(o)]=a.RelativeFilename||a.Filename,"Content"in a){var i=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,s="string"===typeof a.Content&&""!==a.Content;if(i||s){var c=this.parseImage(n[o]);r[a.RelativeFilename||a.Filename]=c}}}}for(var u in t){var l=t[u];void 0!==r[l]?t[u]=r[l]:t[u]=t[u].split("\\").pop()}return t},parseImage:function(e){var t,r=e.Content,n=e.RelativeFilename||e.Filename,o=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(o){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+o+'" is not supported.')}if("string"===typeof r)return"data:"+t+";base64,"+r;var a=new Uint8Array(r);return window.URL.createObjectURL(new Blob([a],{type:t}))},parseTextures:function(t){var r=new Map;if("Texture"in e.Objects){var n=e.Objects.Texture;for(var o in n){var a=this.parseTexture(n[o],t);r.set(parseInt(o),a)}}return r},parseTexture:function(e,t){var r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;var n=e.WrapModeU,o=e.WrapModeV,a=void 0!==n?n.value:0,i=void 0!==o?o.value:0;if(r.wrapS=0===a?m.RepeatWrapping:m.ClampToEdgeWrapping,r.wrapT=0===i?m.RepeatWrapping:m.ClampToEdgeWrapping,"Scaling"in e){var s=e.Scaling.value;r.repeat.x=s[0],r.repeat.y=s[1]}return r},loadTexture:function(e,r){var n,o,a=this.textureLoader.path,i=t.get(e.id).children;void 0!==i&&i.length>0&&void 0!==r[i[0].ID]&&(0!==(n=r[i[0].ID]).indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));var s=e.FileName.slice(-3).toLowerCase();if("tga"===s){var c=this.manager.getHandler(".tga");null===c?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new m.Texture):o=c.load(n)}else"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new m.Texture):o=this.textureLoader.load(n);return this.textureLoader.setPath(a),o},parseMaterials:function(t){var r=new Map;if("Material"in e.Objects){var n=e.Objects.Material;for(var o in n){var a=this.parseMaterial(n[o],t);null!==a&&r.set(parseInt(o),a)}}return r},parseMaterial:function(e,r){var n=e.id,o=e.attrName,a=e.ShadingModel;if("object"===typeof a&&(a=a.value),!t.has(n))return null;var i,s=this.parseParameters(e,r,n);switch(a.toLowerCase()){case"phong":i=new m.MeshPhongMaterial;break;case"lambert":i=new m.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),i=new m.MeshPhongMaterial}return i.setValues(s),i.name=o,i},parseParameters:function(e,r,n){var o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=(new m.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(o.color=(new m.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=(new m.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(o.emissive=(new m.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=(new m.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(o.specular=(new m.Color).fromArray(e.SpecularColor.value));var a=this;return t.get(n).children.forEach((function(e){var t=e.relationship;switch(t){case"Bump":o.bumpMap=a.getTexture(r,e.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(r,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(r,e.ID),o.map.encoding=m.sRGBEncoding;break;case"DisplacementColor":o.displacementMap=a.getTexture(r,e.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(r,e.ID),o.emissiveMap.encoding=m.sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(r,e.ID);break;case"ReflectionColor":o.envMap=a.getTexture(r,e.ID),o.envMap.mapping=m.EquirectangularReflectionMapping,o.envMap.encoding=m.sRGBEncoding;break;case"SpecularColor":o.specularMap=a.getTexture(r,e.ID),o.specularMap.encoding=m.sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=a.getTexture(r,e.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t)}})),o},getTexture:function(r,n){return"LayeredTexture"in e.Objects&&n in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=t.get(n).children[0].ID),r.get(n)},parseDeformers:function(){var r={},n={};if("Deformer"in e.Objects){var o=e.Objects.Deformer;for(var a in o){var i=o[a],s=t.get(parseInt(a));if("Skin"===i.attrType){var c=this.parseSkeleton(s,o);c.ID=a,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=s.parents[0].ID,r[a]=c}else if("BlendShape"===i.attrType){var u={id:a};u.rawTargets=this.parseMorphTargets(s,o),u.id=a,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[a]=u}}}return{skeletons:r,morphTargets:n}},parseSkeleton:function(e,t){var r=[];return e.children.forEach((function(e){var n=t[e.ID];if("Cluster"===n.attrType){var o={ID:e.ID,indices:[],weights:[],transformLink:(new m.Matrix4).fromArray(n.TransformLink.a)};"Indexes"in n&&(o.indices=n.Indexes.a,o.weights=n.Weights.a),r.push(o)}})),{rawBones:r,bones:[]}},parseMorphTargets:function(e,r){for(var n=[],o=0;o<e.children.length;o++){var a=e.children[o],i=r[a.ID],s={name:i.attrName,initialWeight:i.DeformPercent,id:i.id,fullWeights:i.FullWeights.a};if("BlendShapeChannel"!==i.attrType)return;s.geoID=t.get(parseInt(a.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(s)}return n},parseScene:function(n,o,a){r=new m.Group;var s=this.parseModels(n.skeletons,o,a),c=e.Objects.Model,u=this;s.forEach((function(e){var n=c[e.ID];u.setLookAtProperties(e,n),t.get(e.ID).parents.forEach((function(t){var r=s.get(t.ID);void 0!==r&&r.add(e)})),null===e.parent&&r.add(e)})),this.bindSkeleton(n.skeletons,o,s),this.createAmbientLight(),this.setupMorphMaterials(),r.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=y(e.userData.transformData);e.applyMatrix4(t)}}));var l=(new i).parse();1===r.children.length&&r.children[0].isGroup&&(r.children[0].animations=l,r=r.children[0]),r.animations=l},parseModels:function(r,n,o){var a=new Map,i=e.Objects.Model;for(var s in i){var c=parseInt(s),u=i[s],l=t.get(c),h=this.buildSkeleton(l,r,c,u.attrName);if(!h){switch(u.attrType){case"Camera":h=this.createCamera(l);break;case"Light":h=this.createLight(l);break;case"Mesh":h=this.createMesh(l,n,o);break;case"NurbsCurve":h=this.createCurve(l,n);break;case"LimbNode":case"Root":h=new m.Bone;break;case"Null":default:h=new m.Group}h.name=u.attrName?m.PropertyBinding.sanitizeNodeName(u.attrName):"",h.ID=c}this.getTransformData(h,u),a.set(c,h)}return a},buildSkeleton:function(e,t,r,n){var o=null;return e.parents.forEach((function(e){for(var a in t){var i=t[a];i.rawBones.forEach((function(t,a){if(t.ID===e.ID){var s=o;(o=new m.Bone).matrixWorld.copy(t.transformLink),o.name=n?m.PropertyBinding.sanitizeNodeName(n):"",o.ID=r,i.bones[a]=o,null!==s&&o.add(s)}}))}})),o},createCamera:function(t){var r,n;if(t.children.forEach((function(t){var r=e.Objects.NodeAttribute[t.ID];void 0!==r&&(n=r)})),void 0===n)r=new m.Object3D;else{var o=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(o=1);var a=1;void 0!==n.NearPlane&&(a=n.NearPlane.value/1e3);var i=1e3;void 0!==n.FarPlane&&(i=n.FarPlane.value/1e3);var s=window.innerWidth,c=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(s=n.AspectWidth.value,c=n.AspectHeight.value);var u=s/c,l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);var h=n.FocalLength?n.FocalLength.value:null;switch(o){case 0:r=new m.PerspectiveCamera(l,u,a,i),null!==h&&r.setFocalLength(h);break;case 1:r=new m.OrthographicCamera(-s/2,s/2,c/2,-c/2,a,i);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),r=new m.Object3D}}return r},createLight:function(t){var r,n;if(t.children.forEach((function(t){var r=e.Objects.NodeAttribute[t.ID];void 0!==r&&(n=r)})),void 0===n)r=new m.Object3D;else{var o;o=void 0===n.LightType?0:n.LightType.value;var a=16777215;void 0!==n.Color&&(a=(new m.Color).fromArray(n.Color.value));var i=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(i=0);var s=0;void 0!==n.FarAttenuationEnd&&(s=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);switch(o){case 0:r=new m.PointLight(a,i,s,1);break;case 1:r=new m.DirectionalLight(a,i);break;case 2:var c=Math.PI/3;void 0!==n.InnerAngle&&(c=m.MathUtils.degToRad(n.InnerAngle.value));var u=0;void 0!==n.OuterAngle&&(u=m.MathUtils.degToRad(n.OuterAngle.value),u=Math.max(u,1)),r=new m.SpotLight(a,i,s,c,u,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),r=new m.PointLight(a,i)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(r.castShadow=!0)}return r},createMesh:function(e,t,r){var n,o=null,a=null,i=[];return e.children.forEach((function(e){t.has(e.ID)&&(o=t.get(e.ID)),r.has(e.ID)&&i.push(r.get(e.ID))})),i.length>1?a=i:i.length>0?a=i[0]:(a=new m.MeshPhongMaterial({color:13421772}),i.push(a)),"color"in o.attributes&&i.forEach((function(e){e.vertexColors=!0})),o.FBX_Deformer?(i.forEach((function(e){e.skinning=!0})),(n=new m.SkinnedMesh(o,a)).normalizeSkinWeights()):n=new m.Mesh(o,a),n},createCurve:function(e,t){var r=e.children.reduce((function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e}),null),n=new m.LineBasicMaterial({color:3342591,linewidth:1});return new m.Line(r,n)},getTransformData:function(e,t){var r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),r.eulerOrder="RotationOrder"in t?b(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r},setLookAtProperties:function(n,o){"LookAtProperty"in o&&t.get(n.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var o=e.Objects.Model[t.ID];if("Lcl_Translation"in o){var a=o.Lcl_Translation.value;void 0!==n.target?(n.target.position.fromArray(a),r.add(n.target)):n.lookAt((new m.Vector3).fromArray(a))}}}))},bindSkeleton:function(e,r,n){var o=this.parsePoseNodes();for(var a in e){var i=e[a];t.get(parseInt(i.ID)).parents.forEach((function(e){if(r.has(e.ID)){var a=e.ID;t.get(a).parents.forEach((function(e){n.has(e.ID)&&n.get(e.ID).bind(new m.Skeleton(i.bones),o[e.ID])}))}}))}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var r=e.Objects.Pose;for(var n in r)if("BindPose"===r[n].attrType){var o=r[n].PoseNode;Array.isArray(o)?o.forEach((function(e){t[e.Node]=(new m.Matrix4).fromArray(e.Matrix.a)})):t[o.Node]=(new m.Matrix4).fromArray(o.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,n=t[0],o=t[1],a=t[2];if(0!==n||0!==o||0!==a){var i=new m.Color(n,o,a);r.add(new m.AmbientLight(i,1))}}},setupMorphMaterials:function(){var e=this;r.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(r,n){e.setupMorphMaterial(t,r,n)})):e.setupMorphMaterial(t,t.material))}))},setupMorphMaterial:function(e,t,n){var o=e.uuid,a=t.uuid,i=!1;if(r.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===a&&e.uuid!==o&&(i=!0)})):e.material.uuid===a&&e.uuid!==o&&(i=!0))})),!0===i){var s=t.clone();s.morphTargets=!0,void 0===n?e.material=s:e.material[n]=s}else t.morphTargets=!0}},a.prototype={constructor:a,parse:function(r){var n=new Map;if("Geometry"in e.Objects){var o=e.Objects.Geometry;for(var a in o){var i=t.get(parseInt(a)),s=this.parseGeometry(i,o[a],r);n.set(parseInt(a),s)}}return n},parseGeometry:function(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,r,n){var o=n.skeletons,a=[],i=t.parents.map((function(t){return e.Objects.Model[t.ID]}));if(0!==i.length){var s=t.children.reduce((function(e,t){return void 0!==o[t.ID]&&(e=o[t.ID]),e}),null);t.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&a.push(n.morphTargets[e.ID])}));var c=i[0],u={};"RotationOrder"in c&&(u.eulerOrder=b(c.RotationOrder.value)),"InheritType"in c&&(u.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);var l=y(u);return this.genGeometry(r,s,a,l)}},genGeometry:function(e,t,r,n){var o=new m.BufferGeometry;e.attrName&&(o.name=e.attrName);var a=this.parseGeoNode(e,t),i=this.genBuffers(a),s=new m.Float32BufferAttribute(i.vertex,3);if(s.applyMatrix4(n),o.setAttribute("position",s),i.colors.length>0&&o.setAttribute("color",new m.Float32BufferAttribute(i.colors,3)),t&&(o.setAttribute("skinIndex",new m.Uint16BufferAttribute(i.weightsIndices,4)),o.setAttribute("skinWeight",new m.Float32BufferAttribute(i.vertexWeights,4)),o.FBX_Deformer=t),i.normal.length>0){var c=(new m.Matrix3).getNormalMatrix(n),u=new m.Float32BufferAttribute(i.normal,3);u.applyNormalMatrix(c),o.setAttribute("normal",u)}if(i.uvs.forEach((function(e,t){var r="uv"+(t+1).toString();0===t&&(r="uv"),o.setAttribute(r,new m.Float32BufferAttribute(i.uvs[t],2))})),a.material&&"AllSame"!==a.material.mappingType){var l=i.materialIndex[0],h=0;if(i.materialIndex.forEach((function(e,t){e!==l&&(o.addGroup(h,t-h,l),l=e,h=t)})),o.groups.length>0){var d=o.groups[o.groups.length-1],f=d.start+d.count;f!==i.materialIndex.length&&o.addGroup(f,i.materialIndex.length-f,l)}0===o.groups.length&&o.addGroup(0,i.materialIndex.length,i.materialIndex[0])}return this.addMorphTargets(o,e,r,n),o},parseGeoNode:function(e,t){var r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];for(var n=0;e.LayerElementUV[n];)e.LayerElementUV[n].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[n])),n++}return r.weightTable={},null!==t&&(r.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(n,o){void 0===r.weightTable[n]&&(r.weightTable[n]=[]),r.weightTable[n].push({id:t,weight:e.weights[o]})}))}))),r},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,n=0,o=!1,a=[],i=[],s=[],c=[],u=[],l=[],h=this;return e.vertexIndices.forEach((function(d,f){var v=!1;d<0&&(d^=-1,v=!0);var m=[],g=[];if(a.push(3*d,3*d+1,3*d+2),e.color){var y=p(f,r,d,e.color);s.push(y[0],y[1],y[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){g.push(e.weight),m.push(e.id)})),g.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);var b=[0,0,0,0],M=[0,0,0,0];g.forEach((function(e,t){var r=e,n=m[t];M.forEach((function(e,t,o){if(r>e){o[t]=r,r=e;var a=b[t];b[t]=n,n=a}}))})),m=b,g=M}for(;g.length<4;)g.push(0),m.push(0);for(var A=0;A<4;++A)u.push(g[A]),l.push(m[A])}if(e.normal){y=p(f,r,d,e.normal);i.push(y[0],y[1],y[2])}if(e.material&&"AllSame"!==e.material.mappingType)var I=p(f,r,d,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var n=p(f,r,d,e);void 0===c[t]&&(c[t]=[]),c[t].push(n[0]),c[t].push(n[1])})),n++,v&&(h.genFace(t,e,a,I,i,s,c,u,l,n),r++,n=0,a=[],i=[],s=[],c=[],u=[],l=[])})),t},genFace:function(e,t,r,n,o,a,i,s,c,u){for(var l=2;l<u;l++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[3*(l-1)]]),e.vertex.push(t.vertexPositions[r[3*(l-1)+1]]),e.vertex.push(t.vertexPositions[r[3*(l-1)+2]]),e.vertex.push(t.vertexPositions[r[3*l]]),e.vertex.push(t.vertexPositions[r[3*l+1]]),e.vertex.push(t.vertexPositions[r[3*l+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(l-1)]),e.vertexWeights.push(s[4*(l-1)+1]),e.vertexWeights.push(s[4*(l-1)+2]),e.vertexWeights.push(s[4*(l-1)+3]),e.vertexWeights.push(s[4*l]),e.vertexWeights.push(s[4*l+1]),e.vertexWeights.push(s[4*l+2]),e.vertexWeights.push(s[4*l+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[4*(l-1)]),e.weightsIndices.push(c[4*(l-1)+1]),e.weightsIndices.push(c[4*(l-1)+2]),e.weightsIndices.push(c[4*(l-1)+3]),e.weightsIndices.push(c[4*l]),e.weightsIndices.push(c[4*l+1]),e.weightsIndices.push(c[4*l+2]),e.weightsIndices.push(c[4*l+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[3*(l-1)]),e.colors.push(a[3*(l-1)+1]),e.colors.push(a[3*(l-1)+2]),e.colors.push(a[3*l]),e.colors.push(a[3*l+1]),e.colors.push(a[3*l+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(o[0]),e.normal.push(o[1]),e.normal.push(o[2]),e.normal.push(o[3*(l-1)]),e.normal.push(o[3*(l-1)+1]),e.normal.push(o[3*(l-1)+2]),e.normal.push(o[3*l]),e.normal.push(o[3*l+1]),e.normal.push(o[3*l+2])),t.uv&&t.uv.forEach((function(t,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(i[r][0]),e.uvs[r].push(i[r][1]),e.uvs[r].push(i[r][2*(l-1)]),e.uvs[r].push(i[r][2*(l-1)+1]),e.uvs[r].push(i[r][2*l]),e.uvs[r].push(i[r][2*l+1])}))},addMorphTargets:function(t,r,n,o){if(0!==n.length){t.morphTargetsRelative=!0,t.morphAttributes.position=[];var a=this;n.forEach((function(n){n.rawTargets.forEach((function(n){var i=e.Objects.Geometry[n.geoID];void 0!==i&&a.genMorphGeometry(t,r,i,o,n.name)}))}))}},genMorphGeometry:function(e,t,r,n,o){for(var a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],i=void 0!==r.Vertices?r.Vertices.a:[],s=void 0!==r.Indexes?r.Indexes.a:[],c=3*e.attributes.position.count,u=new Float32Array(c),l=0;l<s.length;l++){var h=3*s[l];u[h]=i[3*l],u[h+1]=i[3*l+1],u[h+2]=i[3*l+2]}var d={vertexIndices:a,vertexPositions:u},f=this.genBuffers(d),p=new m.Float32BufferAttribute(f.vertex,3);p.name=o||r.attrName,p.applyMatrix4(n),e.morphAttributes.position.push(p)},parseNormals:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Normals.a,o=[];return"IndexToDirect"===r&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:o,mappingType:t,referenceType:r}},parseUVs:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.UV.a,o=[];return"IndexToDirect"===r&&(o=e.UVIndex.a),{dataSize:2,buffer:n,indices:o,mappingType:t,referenceType:r}},parseVertexColors:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Colors.a,o=[];return"IndexToDirect"===r&&(o=e.ColorIndex.a),{dataSize:4,buffer:n,indices:o,mappingType:t,referenceType:r}},parseMaterialIndices:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};for(var n=e.Materials.a,o=[],a=0;a<n.length;++a)o.push(a);return{dataSize:1,buffer:n,indices:o,mappingType:t,referenceType:r}},parseNurbsGeometry:function(e){if(void 0===Ye)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new m.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new m.BufferGeometry;for(var r,n,o=t-1,a=e.KnotVector.a,i=[],s=e.Points.a,c=0,u=s.length;c<u;c+=4)i.push((new m.Vector4).fromArray(s,c));if("Closed"===e.Form)i.push(i[0]);else if("Periodic"===e.Form){r=o,n=a.length-1-r;for(c=0;c<o;++c)i.push(i[c])}var l=new Ye(o,a,i,r,n).getPoints(7*i.length),h=new Float32Array(3*l.length);l.forEach((function(e,t){e.toArray(h,3*t)}));var d=new m.BufferGeometry;return d.setAttribute("position",new m.BufferAttribute(h,3)),d}},i.prototype={constructor:i,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var r in t){var n=t[r],o=this.addClip(n);e.push(o)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var r=this.parseAnimationLayers(t);return this.parseAnimStacks(r)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,r=new Map;for(var n in t){var o=t[n];if(null!==o.attrName.match(/S|R|T|DeformPercent/)){var a={id:o.id,attr:o.attrName,curves:{}};r.set(a.id,a)}}return r},parseAnimationCurves:function(r){var n=e.Objects.AnimationCurve;for(var o in n){var a={id:n[o].id,times:n[o].KeyTime.a.map(d),values:n[o].KeyValueFloat.a},i=t.get(a.id);if(void 0!==i){var s=i.parents[0].ID,c=i.parents[0].relationship;c.match(/X/)?r.get(s).curves.x=a:c.match(/Y/)?r.get(s).curves.y=a:c.match(/Z/)?r.get(s).curves.z=a:c.match(/d|DeformPercent/)&&r.has(s)&&(r.get(s).curves.morph=a)}}},parseAnimationLayers:function(n){var o=e.Objects.AnimationLayer,a=new Map;for(var i in o){var s=[],c=t.get(parseInt(i));if(void 0!==c)c.children.forEach((function(o,a){if(n.has(o.ID)){var i=n.get(o.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===s[a])if(void 0!==(f=t.get(o.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID)){if(void 0===(u=e.Objects.Model[f.toString()]))return void console.warn("THREE.FBXLoader: Encountered a unused curve.",o);var c={modelName:u.attrName?m.PropertyBinding.sanitizeNodeName(u.attrName):"",ID:u.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};r.traverse((function(e){e.ID===u.id&&(c.transform=e.matrix,e.userData.transformData&&(c.eulerOrder=e.userData.transformData.eulerOrder))})),c.transform||(c.transform=new m.Matrix4),"PreRotation"in u&&(c.preRotation=u.PreRotation.value),"PostRotation"in u&&(c.postRotation=u.PostRotation.value),s[a]=c}s[a]&&(s[a][i.attr]=i)}else if(void 0!==i.curves.morph){if(void 0===s[a]){var u,l=t.get(o.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,h=t.get(l).parents[0].ID,d=t.get(h).parents[0].ID,f=t.get(d).parents[0].ID;c={modelName:(u=e.Objects.Model[f]).attrName?m.PropertyBinding.sanitizeNodeName(u.attrName):"",morphName:e.Objects.Deformer[l].attrName};s[a]=c}s[a][i.attr]=i}}})),a.set(parseInt(i),s)}return a},parseAnimStacks:function(r){var n=e.Objects.AnimationStack,o={};for(var a in n){var i=t.get(parseInt(a)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=r.get(i[0].ID);o[a]={name:n[a].attrName,layer:s}}return o},addClip:function(e){var t=[],r=this;return e.layer.forEach((function(e){t=t.concat(r.generateTracks(e))})),new m.AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],r=new m.Vector3,n=new m.Quaternion,o=new m.Vector3;if(e.transform&&e.transform.decompose(r,n,o),r=r.toArray(),n=(new m.Euler).setFromQuaternion(n,e.eulerOrder).toArray(),o=o.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==a&&t.push(a)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var i=this.generateRotationTrack(e.modelName,e.R.curves,n,e.preRotation,e.postRotation,e.eulerOrder);void 0!==i&&t.push(i)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");void 0!==s&&t.push(s)}if(void 0!==e.DeformPercent){var c=this.generateMorphTrack(e);void 0!==c&&t.push(c)}return t},generateVectorTrack:function(e,t,r,n){var o=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(o,t,r);return new m.VectorKeyframeTrack(e+"."+n,o,a)},generateRotationTrack:function(e,t,r,n,o,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(m.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(m.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(m.MathUtils.degToRad));var i=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(i,t,r);void 0!==n&&((n=n.map(m.MathUtils.degToRad)).push(a),n=(new m.Euler).fromArray(n),n=(new m.Quaternion).setFromEuler(n)),void 0!==o&&((o=o.map(m.MathUtils.degToRad)).push(a),o=(new m.Euler).fromArray(o),o=(new m.Quaternion).setFromEuler(o).inverse());for(var c=new m.Quaternion,u=new m.Euler,l=[],h=0;h<s.length;h+=3)u.set(s[h],s[h+1],s[h+2],a),c.setFromEuler(u),void 0!==n&&c.premultiply(n),void 0!==o&&c.multiply(o),c.toArray(l,h/3*4);return new m.QuaternionKeyframeTrack(e+".quaternion",i,l)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),o=r.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new m.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+o+"]",t.times,n)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})).filter((function(e,t,r){return r.indexOf(e)==t}))},getKeyframeTrackValues:function(e,t,r){var n=r,o=[],a=-1,i=-1,s=-1;return e.forEach((function(e){if(t.x&&(a=t.x.times.indexOf(e)),t.y&&(i=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==a){var r=t.x.values[a];o.push(r),n[0]=r}else o.push(n[0]);if(-1!==i){var c=t.y.values[i];o.push(c),n[1]=c}else o.push(n[1]);if(-1!==s){var u=t.z.values[s];o.push(u),n[2]=u}else o.push(n[2])})),o},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var r=e.values[t-1],n=e.values[t]-r,o=Math.abs(n);if(o>=180){for(var a=o/180,i=n/a,s=r+i,c=e.times[t-1],u=(e.times[t]-c)/a,l=c+u,h=[],d=[];l<e.times[t];)h.push(l),l+=u,d.push(s),s+=i;e.times=I(e.times,t,h),e.values=I(e.values,t,d)}}}},s.prototype={constructor:s,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new l,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,r=e.split(/[\r\n]+/);return r.forEach((function(e,n){var o=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(!o&&!a){var i=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(t.currentIndent-1)+"}}");i?t.parseNodeBegin(e,i):s?t.parseNodeProperty(e,s,r[++n]):c?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var r=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),o={name:r},a=this.parseNodeAttr(n),i=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,o):r in i?("PoseNode"===r?i.PoseNode.push(o):void 0!==i[r].id&&(i[r]={},i[r][i[r].id]=i[r]),""!==a.id&&(i[r][a.id]=o)):"number"===typeof a.id?(i[r]={},i[r][a.id]=o):"Properties70"!==r&&(i[r]="PoseNode"===r?[o]:o),"number"===typeof a.id&&(o.id=a.id),""!==a.name&&(o.attrName=a.name),""!==a.type&&(o.attrType=a.type),this.pushStack(o)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var r="",n="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:r,type:n}},parseNodeProperty:function(e,t,r){var n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===o&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());var a=this.getCurrentNode();if("Properties70"!==a.name){if("C"===n){var i=o.split(",").slice(1),s=parseInt(i[0]),c=parseInt(i[1]),u=o.split(",").slice(3);n="connections",function(e,t){for(var r=0,n=e.length,o=t.length;r<o;r++,n++)e[n]=t[r]}(o=[s,c],u=u.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===a[n]&&(a[n]=[])}"Node"===n&&(a.id=o),n in a&&Array.isArray(a[n])?a[n].push(o):"a"!==n?a[n]=o:a.a=o,this.setCurrentProp(a,n),"a"===n&&","!==o.slice(-1)&&(a.a=M(o))}else this.parseNodeSpecialProperty(e,n,o)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=M(t.a))},parseNodeSpecialProperty:function(e,t,r){var n=r.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),o=n[0],a=n[1],i=n[2],s=n[3],c=n[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=M(c)}this.getPrevNode()[o]={type:a,type2:i,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),o)}},c.prototype={constructor:c,parse:function(e){var t=new u(e);t.skip(23);var r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);for(var n=new l;!this.endOfContent(t);){var o=this.parseNode(t,r);null!==o&&n.add(o.name,o)}return n},endOfContent:function(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var r={},n=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();var a=e.getUint8(),i=e.getString(a);if(0===n)return null;for(var s=[],c=0;c<o;c++)s.push(this.parseProperty(e));var u=s.length>0?s[0]:"",l=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(r.singleProperty=1===o&&e.getOffset()===n;n>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(i,r,d)}return r.propertyList=s,"number"===typeof u&&(r.id=u),""!==l&&(r.attrName=l),""!==h&&(r.attrType=h),""!==i&&(r.name=i),r},parseSubNode:function(e,t,r){if(!0===r.singleProperty){var n=r.propertyList[0];Array.isArray(n)?(t[r.name]=r,r.a=n):t[r.name]=n}else if("Connections"===e&&"C"===r.name){var o=[];r.propertyList.forEach((function(e,t){0!==t&&o.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(o)}else if("Properties70"===r.name){Object.keys(r).forEach((function(e){t[e]=r[e]}))}else if("Properties70"===e&&"P"===r.name){var a,i=r.propertyList[0],s=r.propertyList[1],c=r.propertyList[2],u=r.propertyList[3];0===i.indexOf("Lcl ")&&(i=i.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),a="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],t[i]={type:s,type2:c,flag:u,value:a}}else void 0===t[r.name]?"number"===typeof r.id?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:"PoseNode"===r.name?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):void 0===t[r.name][r.id]&&(t[r.name][r.id]=r)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var r=e.getUint32();return e.getArrayBuffer(r);case"S":r=e.getUint32();return e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(0===o)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}"undefined"===typeof Qe&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var i=new u(new Qe(new Uint8Array(e.getArrayBuffer(a))).decompress().buffer);switch(t){case"b":case"c":return i.getBooleanArray(n);case"d":return i.getFloat64Array(n);case"f":return i.getFloat32Array(n);case"i":return i.getInt32Array(n);case"l":return i.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},u.prototype={constructor:u,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1===(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],r=0;r<e;r++)t[r]=this.getUint8();var n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),m.LoaderUtils.decodeText(new Uint8Array(t))}},l.prototype={constructor:l,add:function(e,t){this[e]=t}};var f=[];function p(e,t,r,n){var o;switch(n.mappingType){case"ByPolygonVertex":o=e;break;case"ByPolygon":o=t;break;case"ByVertice":o=r;break;case"AllSame":o=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(o=n.indices[o]);var a=o*n.dataSize,i=a+n.dataSize;return function(e,t,r,n){for(var o=r,a=0;o<n;o++,a++)e[a]=t[o];return e}(f,n.buffer,a,i)}var v=new m.Euler,g=new m.Vector3;function y(e){var t,r=new m.Matrix4,n=new m.Matrix4,o=new m.Matrix4,a=new m.Matrix4,i=new m.Matrix4,s=new m.Matrix4,c=new m.Matrix4,u=new m.Matrix4,l=new m.Matrix4,h=new m.Matrix4,d=new m.Matrix4,f=e.inheritType?e.inheritType:0;(e.translation&&r.setPosition(g.fromArray(e.translation)),e.preRotation)&&((t=e.preRotation.map(m.MathUtils.degToRad)).push(e.eulerOrder),n.makeRotationFromEuler(v.fromArray(t)));e.rotation&&((t=e.rotation.map(m.MathUtils.degToRad)).push(e.eulerOrder),o.makeRotationFromEuler(v.fromArray(t)));e.postRotation&&((t=e.postRotation.map(m.MathUtils.degToRad)).push(e.eulerOrder),a.makeRotationFromEuler(v.fromArray(t)));e.scale&&i.scale(g.fromArray(e.scale)),e.scalingOffset&&c.setPosition(g.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(g.fromArray(e.scalingPivot)),e.rotationOffset&&u.setPosition(g.fromArray(e.rotationOffset)),e.rotationPivot&&l.setPosition(g.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(h=e.parentMatrixWorld);var p=n.multiply(o).multiply(a),y=new m.Matrix4;h.extractRotation(y),(new m.Matrix4).copyPosition(h);var b=new m.Matrix4;b.getInverse(y).multiply(h);var M=new m.Matrix4;if(0===f)M.copy(y).multiply(p).multiply(b).multiply(i);else if(1===f)M.copy(y).multiply(b).multiply(p).multiply(i);else{var A=(new m.Matrix4).getInverse(i),I=(new m.Matrix4).multiply(b).multiply(A);M.copy(y).multiply(p).multiply(I).multiply(i)}var w=(new m.Matrix4).getInverse(l),D=(new m.Matrix4).getInverse(s),x=new m.Matrix4;x.copy(r).multiply(u).multiply(l).multiply(n).multiply(o).multiply(a).multiply(w).multiply(c).multiply(s).multiply(i).multiply(D);var T=(new m.Matrix4).copyPosition(x),S=(new m.Matrix4).copy(h).multiply(T);return d.copyPosition(S),x=(new m.Matrix4).multiply(d).multiply(M)}function b(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function M(e){return e.split(",").map((function(e){return parseFloat(e)}))}function A(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),m.LoaderUtils.decodeText(new Uint8Array(e,t,r))}function I(e,t,r){return e.slice(0,t).concat(r).concat(e.slice(t))}})(),function(){function e(e){m.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new i(e)})),this.register((function(e){return new c(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new s(e)})),this.register((function(e){return new o(e)})),this.register((function(e){return new l(e)}))}function t(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(m.Loader.prototype),{constructor:e,load:function(e,t,r,n){var o,a=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:m.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);var i=function(t){n?n(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new m.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(r){try{a.parse(r,o,(function(r){t(r),a.manager.itemEnd(e)}),i)}catch(n){i(n)}}),r,i)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,t,o,i){var s,c={},u={};if("string"===typeof e)s=e;else if(m.LoaderUtils.decodeText(new Uint8Array(e,0,4))===h){try{c[r.KHR_BINARY_GLTF]=new p(e)}catch(w){return void(i&&i(w))}s=c[r.KHR_BINARY_GLTF].content}else s=m.LoaderUtils.decodeText(new Uint8Array(e));var l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var d=new z(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(var f=0;f<this.pluginCallbacks.length;f++){var y=this.pluginCallbacks[f](d);u[y.name]=y,c[y.name]=!0}if(l.extensionsUsed)for(f=0;f<l.extensionsUsed.length;++f){var A=l.extensionsUsed[f],I=l.extensionsRequired||[];switch(A){case r.KHR_MATERIALS_UNLIT:c[A]=new a;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:c[A]=new b;break;case r.KHR_DRACO_MESH_COMPRESSION:c[A]=new v(l,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:c[A]=new n(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:c[A]=new g;break;case r.KHR_MESH_QUANTIZATION:c[A]=new M;break;default:I.indexOf(A)>=0&&void 0===u[A]&&console.warn('THREE.GLTFLoader: Unknown extension "'+A+'".')}}d.setExtensions(c),d.setPlugins(u),d.parse(o,i)}}});var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=e}function o(e){this.parser=e,this.name=r.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function a(){this.name=r.KHR_MATERIALS_UNLIT}function i(e){this.parser=e,this.name=r.KHR_MATERIALS_CLEARCOAT}function s(e){this.parser=e,this.name=r.KHR_MATERIALS_TRANSMISSION}function c(e){this.parser=e,this.name=r.KHR_TEXTURE_BASISU}function u(e){this.parser=e,this.name=r.EXT_TEXTURE_WEBP,this.isSupported=null}function l(e){this.name=r.EXT_MESHOPT_COMPRESSION,this.parser=e}o.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],r=0,n=t.length;r<n;r++){var o=t[r];o.extensions&&o.extensions[this.name]&&void 0!==o.extensions[this.name].light&&e._addNodeRef(this.cache,o.extensions[this.name].light)}},o.prototype._loadLight=function(e){var t=this.parser,r="light:"+e,n=t.cache.get(r);if(n)return n;var o,a=t.json,i=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new m.Color(16777215);void 0!==i.color&&s.fromArray(i.color);var c=void 0!==i.range?i.range:0;switch(i.type){case"directional":(o=new m.DirectionalLight(s)).target.position.set(0,0,-1),o.add(o.target);break;case"point":(o=new m.PointLight(s)).distance=c;break;case"spot":(o=new m.SpotLight(s)).distance=c,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,o.angle=i.spot.outerConeAngle,o.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return o.position.set(0,0,0),o.decay=2,void 0!==i.intensity&&(o.intensity=i.intensity),o.name=t.createUniqueName(i.name||"light_"+e),n=Promise.resolve(o),t.cache.add(r,n),n},o.prototype.createNodeAttachment=function(e){var t=this,r=this.parser,n=r.json.nodes[e],o=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then((function(e){return r._getNodeRef(t.cache,o,e)}))},a.prototype.getMaterialType=function(){return m.MeshBasicMaterial},a.prototype.extendParams=function(e,t,r){var n=[];e.color=new m.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==o.baseColorTexture&&n.push(r.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(n)},i.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.MeshPhysicalMaterial:null},i.prototype.extendMaterialParams=function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var o=[],a=n.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(r.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(r.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(r.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var i=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new m.Vector2(i,i)}return Promise.all(o)},s.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.MeshPhysicalMaterial:null},s.prototype.extendMaterialParams=function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var o=[],a=n.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&o.push(r.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(o)},c.prototype.loadTexture=function(e){var t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;var o=n.extensions[this.name],a=r.images[o.source],i=t.options.ktx2Loader;if(!i){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,i)},u.prototype.loadTexture=function(e){var t=this.name,r=this.parser,n=r.json,o=n.textures[e];if(!o.extensions||!o.extensions[t])return null;var a=o.extensions[t],i=n.images[a.source],s=i.uri?r.options.manager.getHandler(i.uri):r.textureLoader;return this.detectSupport().then((function(o){if(o)return r.loadTextureImage(e,i,s);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)}))},u.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported},l.prototype.loadBufferView=function(e){var t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){var n=r.extensions[this.name],o=this.parser.getDependency("buffer",n.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([o,a.ready]).then((function(e){var t=n.byteOffset||0,r=n.byteLength||0,o=n.count,i=n.byteStride,s=new ArrayBuffer(o*i),c=new Uint8Array(e[0],t,r);return a.decodeGltfBuffer(new Uint8Array(s),o,i,c,n.mode,n.filter),s}))}return null};var h="glTF",d=1313821514,f=5130562;function p(e){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:m.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==h)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var n=new DataView(e,12),o=0;o<n.byteLength;){var a=n.getUint32(o,!0);o+=4;var i=n.getUint32(o,!0);if(o+=4,i===d){var s=new Uint8Array(e,12+o,a);this.content=m.LoaderUtils.decodeText(s)}else if(i===f){var c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function v(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function g(){this.name=r.KHR_TEXTURE_TRANSFORM}function y(e){m.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),i={specular:{value:(new m.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=i,this.onBeforeCompile=function(e){for(var s in i)e.uniforms[s]=i[s];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return i.specular.value},set:function(e){i.specular.value=e}},specularMap:{get:function(){return i.specularMap.value},set:function(e){i.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return i.glossiness.value},set:function(e){i.glossiness.value=e}},glossinessMap:{get:function(){return i.glossinessMap.value},set:function(e){i.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function b(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return y},extendParams:function(e,t,r){var n=t.extensions[this.name];e.color=new m.Color(1,1,1),e.opacity=1;var o=[];if(Array.isArray(n.diffuseFactor)){var a=n.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==n.diffuseTexture&&o.push(r.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new m.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new m.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var i=n.specularGlossinessTexture;o.push(r.assignTexture(e,"glossinessMap",i)),o.push(r.assignTexture(e,"specularMap",i))}return Promise.all(o)},createMaterial:function(e){var t=new y(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=m.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function M(){this.name=r.KHR_MESH_QUANTIZATION}function A(e,t,r,n){m.Interpolant.call(this,e,t,r,n)}v.prototype.decodePrimitive=function(e,t){var r=this.json,n=this.dracoLoader,o=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,i={},s={},c={};for(var u in a){var l=F[u]||u.toLowerCase();i[l]=a[u]}for(u in e.attributes){l=F[u]||u.toLowerCase();if(void 0!==a[u]){var h=r.accessors[e.attributes[u]],d=G[h.componentType];c[l]=d,s[l]=!0===h.normalized}}return t.getDependency("bufferView",o).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var r in e.attributes){var n=e.attributes[r],o=s[r];void 0!==o&&(n.normalized=o)}t(e)}),i,c)}))}))},g.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},y.prototype=Object.create(m.MeshStandardMaterial.prototype),y.prototype.constructor=y,y.prototype.copy=function(e){return m.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},A.prototype=Object.create(m.Interpolant.prototype),A.prototype.constructor=A,A.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,o=e*n*3+n,a=0;a!==n;a++)t[a]=r[o+a];return t},A.prototype.beforeStart_=A.prototype.copySampleValue_,A.prototype.afterEnd_=A.prototype.copySampleValue_,A.prototype.interpolate_=function(e,t,r,n){for(var o=this.resultBuffer,a=this.sampleValues,i=this.valueSize,s=2*i,c=3*i,u=n-t,l=(r-t)/u,h=l*l,d=h*l,f=e*c,p=f-c,v=-2*d+3*h,m=d-h,g=1-v,y=m-h+l,b=0;b!==i;b++){var M=a[p+b+i],A=a[p+b+s]*u,I=a[f+b+i],w=a[f+b]*u;o[b]=g*M+y*A+v*I+m*w}return o};var I=0,w=1,D=2,x=3,T=4,S=5,R=6,G={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E={9728:m.NearestFilter,9729:m.LinearFilter,9984:m.NearestMipmapNearestFilter,9985:m.LinearMipmapNearestFilter,9986:m.NearestMipmapLinearFilter,9987:m.LinearMipmapLinearFilter},O={33071:m.ClampToEdgeWrapping,33648:m.MirroredRepeatWrapping,10497:m.RepeatWrapping},P={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},F={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},k={CUBICSPLINE:void 0,LINEAR:m.InterpolateLinear,STEP:m.InterpolateDiscrete},U="OPAQUE",V="MASK",L="BLEND";function N(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function j(e,t,r){for(var n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function C(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function X(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){var o=t.extras.targetNames;if(e.morphTargetInfluences.length===o.length){e.morphTargetDictionary={};for(r=0,n=o.length;r<n;r++)e.morphTargetDictionary[o[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function H(e){var t=e.extensions&&e.extensions[r.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+B(t.attributes):e.indices+":"+B(e.attributes)+":"+e.mode}function B(e){for(var t="",r=Object.keys(e).sort(),n=0,o=r.length;n<o;n++)t+=r[n]+":"+e[r[n]]+";";return t}function z(e,r){this.json=e||{},this.extensions={},this.plugins={},this.options=r||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new m.ImageBitmapLoader(this.options.manager):this.textureLoader=new m.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new m.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function Q(e,t,r){var n=t.attributes,o=[];function a(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var i in n){var s=F[i]||i.toLowerCase();s in e.attributes||o.push(a(n[i],s))}if(void 0!==t.indices&&!e.index){var c=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(c)}return C(e,t),function(e,t,r){var n=t.attributes,o=new m.Box3;if(void 0!==n.POSITION){var a=(d=r.json.accessors[n.POSITION]).min,i=d.max;if(void 0!==a&&void 0!==i){o.set(new m.Vector3(a[0],a[1],a[2]),new m.Vector3(i[0],i[1],i[2]));var s=t.targets;if(void 0!==s){for(var c=new m.Vector3,u=new m.Vector3,l=0,h=s.length;l<h;l++){var d,f=s[l];if(void 0!==f.POSITION)a=(d=r.json.accessors[f.POSITION]).min,i=d.max,void 0!==a&&void 0!==i?(u.setX(Math.max(Math.abs(a[0]),Math.abs(i[0]))),u.setY(Math.max(Math.abs(a[1]),Math.abs(i[1]))),u.setZ(Math.max(Math.abs(a[2]),Math.abs(i[2]))),c.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}o.expandByVector(c)}e.boundingBox=o;var p=new m.Sphere;o.getCenter(p.center),p.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=p}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,r),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,r){for(var n=!1,o=!1,a=0,i=t.length;a<i&&(void 0!==(u=t[a]).POSITION&&(n=!0),void 0!==u.NORMAL&&(o=!0),!n||!o);a++);if(!n&&!o)return Promise.resolve(e);var s=[],c=[];for(a=0,i=t.length;a<i;a++){var u=t[a];if(n){var l=void 0!==u.POSITION?r.getDependency("accessor",u.POSITION):e.attributes.position;s.push(l)}o&&(l=void 0!==u.NORMAL?r.getDependency("accessor",u.NORMAL):e.attributes.normal,c.push(l))}return Promise.all([Promise.all(s),Promise.all(c)]).then((function(t){var r=t[0],a=t[1];return n&&(e.morphAttributes.position=r),o&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}function W(e,t){var r=e.getIndex();if(null===r){var n=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<o.count;a++)n.push(a);e.setIndex(n),r=e.getIndex()}var i=r.count-2,s=[];if(t===m.TriangleFanDrawMode)for(a=1;a<=i;a++)s.push(r.getX(0)),s.push(r.getX(a)),s.push(r.getX(a+1));else for(a=0;a<i;a++)a%2===0?(s.push(r.getX(a)),s.push(r.getX(a+1)),s.push(r.getX(a+2))):(s.push(r.getX(a+2)),s.push(r.getX(a+1)),s.push(r.getX(a)));s.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}z.prototype.setExtensions=function(e){this.extensions=e},z.prototype.setPlugins=function(e){this.plugins=e},z.prototype.parse=function(e,t){var r=this,n=this.json,o=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var a={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};j(o,a,n),C(a,n),e(a)})).catch(t)},z.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n=0,o=t.length;n<o;n++)for(var a=t[n].joints,i=0,s=a.length;i<s;i++)e[a[i]].isBone=!0;for(var c=0,u=e.length;c<u;c++){var l=e[c];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(r[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}},z.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},z.prototype._getNodeRef=function(e,t,r){if(e.refs[t]<=1)return r;var n=r.clone();return n.name+="_instance_"+e.uses[t]++,n},z.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var r=0;r<t.length;r++){var n=e(t[r]);if(n)return n}},z.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var r=[],n=0;n<t.length;n++){var o=e(t[n]);o&&r.push(o)}return r},z.prototype.getDependency=function(e,t){var r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n},z.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t},z.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var o=this.options;return new Promise((function(e,r){n.load(N(t.uri,o.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},z.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))},z.prototype.loadAccessor=function(e){var t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);var o=[];return void 0!==n.bufferView?o.push(this.getDependency("bufferView",n.bufferView)):o.push(null),void 0!==n.sparse&&(o.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(o).then((function(e){var o,a,i=e[0],s=P[n.type],c=G[n.componentType],u=c.BYTES_PER_ELEMENT,l=u*s,h=n.byteOffset||0,d=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,f=!0===n.normalized;if(d&&d!==l){var p=Math.floor(h/d),v="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+p+":"+n.count,g=t.cache.get(v);g||(o=new c(i,p*d,n.count*d/u),g=new m.InterleavedBuffer(o,d/u),t.cache.add(v,g)),a=new m.InterleavedBufferAttribute(g,s,h%d/u,f)}else o=null===i?new c(n.count*s):new c(i,h,n.count*s),a=new m.BufferAttribute(o,s,f);if(void 0!==n.sparse){var y=P.SCALAR,b=G[n.sparse.indices.componentType],M=n.sparse.indices.byteOffset||0,A=n.sparse.values.byteOffset||0,I=new b(e[1],M,n.sparse.count*y),w=new c(e[2],A,n.sparse.count*s);null!==i&&(a=new m.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var D=0,x=I.length;D<x;D++){var T=I[D];if(a.setX(T,w[D*s]),s>=2&&a.setY(T,w[D*s+1]),s>=3&&a.setZ(T,w[D*s+2]),s>=4&&a.setW(T,w[D*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},z.prototype.loadTexture=function(e){var t,n,o=this.json,a=this.options,i=o.textures[e],s=i.extensions||{};return(t=s[r.MSFT_TEXTURE_DDS]?o.images[s[r.MSFT_TEXTURE_DDS].source]:o.images[i.source]).uri&&(n=a.manager.getHandler(t.uri)),n||(n=s[r.MSFT_TEXTURE_DDS]?this.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,n)},z.prototype.loadTextureImage=function(e,t,r){var n=this,o=this.json,a=this.options,i=o.textures[e],s=self.URL||self.webkitURL,c=t.uri,u=!1,l=!0;return"image/jpeg"===t.mimeType&&(l=!1),void 0!==t.bufferView&&(c=n.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){var r=new DataView(e,25,1).getUint8(0,!1);l=6===r||4===r||3===r}u=!0;var n=new Blob([e],{type:t.mimeType});return c=s.createObjectURL(n)}))),Promise.resolve(c).then((function(e){return new Promise((function(t,n){var o=t;!0===r.isImageBitmapLoader&&(o=function(e){t(new m.CanvasTexture(e))}),r.load(N(e,a.path),o,void 0,n)}))})).then((function(t){!0===u&&s.revokeObjectURL(c),t.flipY=!1,i.name&&(t.name=i.name),l||(t.format=m.RGBFormat);var r=(o.samplers||{})[i.sampler]||{};return t.magFilter=E[r.magFilter]||m.LinearFilter,t.minFilter=E[r.minFilter]||m.LinearMipmapLinearFilter,t.wrapS=O[r.wrapS]||m.RepeatWrapping,t.wrapT=O[r.wrapT]||m.RepeatWrapping,n.associations.set(t,{type:"textures",index:e}),t}))},z.prototype.assignTexture=function(e,t,n){var o=this;return this.getDependency("texture",n.index).then((function(a){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),o.extensions[r.KHR_TEXTURE_TRANSFORM]){var i=void 0!==n.extensions?n.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;if(i){var s=o.associations.get(a);a=o.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(a,i),o.associations.set(a,s)}}e[t]=a}))},z.prototype.assignFinalMaterial=function(e){var t=e.geometry,r=e.material,n=void 0!==t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal,i=!0===e.isSkinnedMesh,s=Object.keys(t.morphAttributes).length>0,c=s&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+r.uuid,l=this.cache.get(u);l||(l=new m.PointsMaterial,m.Material.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(u,l)),r=l}else if(e.isLine){u="LineBasicMaterial:"+r.uuid;var h=this.cache.get(u);h||(h=new m.LineBasicMaterial,m.Material.prototype.copy.call(h,r),h.color.copy(r.color),this.cache.add(u,h)),r=h}if(n||o||a||i||s){u="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),i&&(u+="skinning:"),n&&(u+="vertex-tangents:"),o&&(u+="vertex-colors:"),a&&(u+="flat-shading:"),s&&(u+="morph-targets:"),c&&(u+="morph-normals:");var d=this.cache.get(u);d||(d=r.clone(),i&&(d.skinning=!0),n&&(d.vertexTangents=!0),o&&(d.vertexColors=!0),a&&(d.flatShading=!0),s&&(d.morphTargets=!0),c&&(d.morphNormals=!0),this.cache.add(u,d),this.associations.set(d,this.associations.get(r))),r=d}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),r.normalScale&&!n&&(r.normalScale.y=-r.normalScale.y),r.clearcoatNormalScale&&!n&&(r.clearcoatNormalScale.y=-r.clearcoatNormalScale.y),e.material=r},z.prototype.getMaterialType=function(){return m.MeshStandardMaterial},z.prototype.loadMaterial=function(e){var t,n=this,o=this.json,a=this.extensions,i=o.materials[e],s={},c=i.extensions||{},u=[];if(c[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(),u.push(l.extendParams(s,i,n))}else if(c[r.KHR_MATERIALS_UNLIT]){var h=a[r.KHR_MATERIALS_UNLIT];t=h.getMaterialType(),u.push(h.extendParams(s,i,n))}else{var d=i.pbrMetallicRoughness||{};if(s.color=new m.Color(1,1,1),s.opacity=1,Array.isArray(d.baseColorFactor)){var f=d.baseColorFactor;s.color.fromArray(f),s.opacity=f[3]}void 0!==d.baseColorTexture&&u.push(n.assignTexture(s,"map",d.baseColorTexture)),s.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,s.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(u.push(n.assignTexture(s,"metalnessMap",d.metallicRoughnessTexture)),u.push(n.assignTexture(s,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===i.doubleSided&&(s.side=m.DoubleSide);var p=i.alphaMode||U;return p===L?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,p===V&&(s.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&t!==m.MeshBasicMaterial&&(u.push(n.assignTexture(s,"normalMap",i.normalTexture)),s.normalScale=new m.Vector2(1,1),void 0!==i.normalTexture.scale&&s.normalScale.set(i.normalTexture.scale,i.normalTexture.scale)),void 0!==i.occlusionTexture&&t!==m.MeshBasicMaterial&&(u.push(n.assignTexture(s,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(s.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==m.MeshBasicMaterial&&(s.emissive=(new m.Color).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==m.MeshBasicMaterial&&u.push(n.assignTexture(s,"emissiveMap",i.emissiveTexture)),Promise.all(u).then((function(){var o;return o=t===y?a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),i.name&&(o.name=i.name),o.map&&(o.map.encoding=m.sRGBEncoding),o.emissiveMap&&(o.emissiveMap.encoding=m.sRGBEncoding),C(o,i),n.associations.set(o,{type:"materials",index:e}),i.extensions&&j(a,o,i),o}))},z.prototype.createUniqueName=function(e){for(var t=m.PropertyBinding.sanitizeNodeName(e||""),r=1;this.nodeNamesUsed[t];++r)t=e+"_"+r;return this.nodeNamesUsed[t]=!0,t},z.prototype.loadGeometries=function(e){var t=this,n=this.extensions,o=this.primitiveCache;function a(e){return n[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return Q(r,e,t)}))}for(var i=[],s=0,c=e.length;s<c;s++){var u,l=e[s],h=H(l),d=o[h];if(d)i.push(d.promise);else u=l.extensions&&l.extensions[r.KHR_DRACO_MESH_COMPRESSION]?a(l):Q(new m.BufferGeometry,l,t),o[h]={primitive:l,promise:u},i.push(u)}return Promise.all(i)},z.prototype.loadMesh=function(e){for(var t,r=this,n=this.json.meshes[e],o=n.primitives,a=[],i=0,s=o.length;i<s;i++){var c=void 0===o[i].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new m.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:m.FrontSide})),t.DefaultMaterial):this.getDependency("material",o[i].material);a.push(c)}return a.push(r.loadGeometries(o)),Promise.all(a).then((function(t){for(var a=t.slice(0,t.length-1),i=t[t.length-1],s=[],c=0,u=i.length;c<u;c++){var l,h=i[c],d=o[c],f=a[c];if(d.mode===T||d.mode===S||d.mode===R||void 0===d.mode)!0!==(l=!0===n.isSkinnedMesh?new m.SkinnedMesh(h,f):new m.Mesh(h,f)).isSkinnedMesh||l.geometry.attributes.skinWeight.normalized||l.normalizeSkinWeights(),d.mode===S?l.geometry=W(l.geometry,m.TriangleStripDrawMode):d.mode===R&&(l.geometry=W(l.geometry,m.TriangleFanDrawMode));else if(d.mode===w)l=new m.LineSegments(h,f);else if(d.mode===x)l=new m.Line(h,f);else if(d.mode===D)l=new m.LineLoop(h,f);else{if(d.mode!==I)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);l=new m.Points(h,f)}Object.keys(l.geometry.morphAttributes).length>0&&X(l,n),l.name=r.createUniqueName(n.name||"mesh_"+e),C(l,n),r.assignFinalMaterial(l),s.push(l)}if(1===s.length)return s[0];var p=new m.Group;for(c=0,u=s.length;c<u;c++)p.add(s[c]);return p}))},z.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],n=r[r.type];if(n)return"perspective"===r.type?t=new m.PerspectiveCamera(m.MathUtils.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new m.OrthographicCamera(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),C(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},z.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))},z.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],r=[],n=[],o=[],a=[],i=[],s=0,c=t.channels.length;s<c;s++){var u=t.channels[s],l=t.samplers[u.sampler],h=u.target,d=void 0!==h.node?h.node:h.id,f=void 0!==t.parameters?t.parameters[l.input]:l.input,p=void 0!==t.parameters?t.parameters[l.output]:l.output;r.push(this.getDependency("node",d)),n.push(this.getDependency("accessor",f)),o.push(this.getDependency("accessor",p)),a.push(l),i.push(h)}return Promise.all([Promise.all(r),Promise.all(n),Promise.all(o),Promise.all(a),Promise.all(i)]).then((function(r){for(var n=r[0],o=r[1],a=r[2],i=r[3],s=r[4],c=[],u=0,l=n.length;u<l;u++){var h=n[u],d=o[u],f=a[u],p=i[u],v=s[u];if(void 0!==h){var g;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,_[v.path]){case _.weights:g=m.NumberKeyframeTrack;break;case _.rotation:g=m.QuaternionKeyframeTrack;break;case _.position:case _.scale:default:g=m.VectorKeyframeTrack}var y=h.name?h.name:h.uuid,b=void 0!==p.interpolation?k[p.interpolation]:m.InterpolateLinear,M=[];_[v.path]===_.weights?h.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&M.push(e.name?e.name:e.uuid)})):M.push(y);var I=f.array;if(f.normalized){var w;if(I.constructor===Int8Array)w=1/127;else if(I.constructor===Uint8Array)w=1/255;else if(I.constructor==Int16Array)w=1/32767;else{if(I.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");w=1/65535}for(var D=new Float32Array(I.length),x=0,T=I.length;x<T;x++)D[x]=I[x]*w;I=D}for(x=0,T=M.length;x<T;x++){var S=new g(M[x]+"."+_[v.path],d.array,I,b);"CUBICSPLINE"===p.interpolation&&(S.createInterpolant=function(e){return new A(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(S)}}}var R=t.name?t.name:"animation_"+e;return new m.AnimationClip(R,void 0,c)}))},z.prototype.loadNode=function(e){var t=this.json,r=this.extensions,n=this,o=t.nodes[e],a=o.name?n.createUniqueName(o.name):"";return function(){var t=[];return void 0!==o.mesh&&t.push(n.getDependency("mesh",o.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,o.mesh,e);return void 0!==o.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,r=o.weights.length;t<r;t++)e.morphTargetInfluences[t]=o.weights[t]})),t}))),void 0!==o.camera&&t.push(n.getDependency("camera",o.camera).then((function(e){return n._getNodeRef(n.cameraCache,o.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var i;if((i=!0===o.isBone?new m.Bone:t.length>1?new m.Group:1===t.length?t[0]:new m.Object3D)!==t[0])for(var s=0,c=t.length;s<c;s++)i.add(t[s]);if(o.name&&(i.userData.name=o.name,i.name=a),C(i,o),o.extensions&&j(r,i,o),void 0!==o.matrix){var u=new m.Matrix4;u.fromArray(o.matrix),i.applyMatrix4(u)}else void 0!==o.translation&&i.position.fromArray(o.translation),void 0!==o.rotation&&i.quaternion.fromArray(o.rotation),void 0!==o.scale&&i.scale.fromArray(o.scale);return n.associations.set(i,{type:"nodes",index:e}),i}))},z.prototype.loadScene=function(){function e(t,r,n,o){var a=n.nodes[t];return o.getDependency("node",t).then((function(e){return void 0===a.skin?e:o.getDependency("skin",a.skin).then((function(e){for(var r=[],n=0,a=(t=e).joints.length;n<a;n++)r.push(o.getDependency("node",t.joints[n]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(e.isMesh){for(var n=[],o=[],a=0,i=r.length;a<i;a++){var s=r[a];if(s){n.push(s);var c=new m.Matrix4;void 0!==t.inverseBindMatrices&&c.fromArray(t.inverseBindMatrices.array,16*a),o.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new m.Skeleton(n,o),e.matrixWorld)}})),e}));var t})).then((function(t){r.add(t);var i=[];if(a.children)for(var s=a.children,c=0,u=s.length;c<u;c++){var l=s[c];i.push(e(l,t,n,o))}return Promise.all(i)}))}return function(t){var r=this.json,n=this.extensions,o=this.json.scenes[t],a=new m.Group;o.name&&(a.name=this.createUniqueName(o.name)),C(a,o),o.extensions&&j(n,a,o);for(var i=o.nodes||[],s=[],c=0,u=i.length;c<u;c++)s.push(e(i[c],a,r,this));return Promise.all(s).then((function(){return a}))}}()}();var qe=function(e){m.Loader.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};qe.prototype=Object.assign(Object.create(m.Loader.prototype),{constructor:qe,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,r,n){var o=this,a=new m.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){var r={attributeIDs:o.defaultAttributeIDs,attributeTypes:o.defaultAttributeTypes,useUniqueIDs:!1};o.decodeGeometry(e,r).then(t).catch(n)}),r,n)},decodeDracoFile:function(e,t,r,n){var o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,o).then(t)},decodeGeometry:function(e,t){var r=this;for(var n in t.attributeTypes){var o=t.attributeTypes[n];void 0!==o.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=o.name)}var a,i=JSON.stringify(t);if(qe.taskCache.has(e)){var s=qe.taskCache.get(e);if(s.key===i)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var c=this.workerNextTaskID++,u=e.byteLength,l=this._getWorker(c,u).then((function(r){return a=r,new Promise((function(r,n){a._callbacks[c]={resolve:r,reject:n},a.postMessage({type:"decode",id:c,taskConfig:t,buffer:e},[e])}))})).then((function(e){return r._createGeometry(e.geometry)}));return l.catch((function(){return!0})).then((function(){a&&c&&r._releaseTask(a,c)})),qe.taskCache.set(e,{key:i,promise:l}),l},_createGeometry:function(e){var t=new m.BufferGeometry;e.index&&t.setIndex(new m.BufferAttribute(e.index.array,1));for(var r=0;r<e.attributes.length;r++){var n=e.attributes[r],o=n.name,a=n.array,i=n.itemSize;t.setAttribute(o,new m.BufferAttribute(a,i))}return t},_loadLibrary:function(e,t){var r=new m.FileLoader(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((function(t,n){r.load(e,t,void 0,n)}))},preload:function(){return this._initDecoder(),this},_initDecoder:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then((function(r){var n=r[0];t||(e.decoderConfig.wasmBinary=r[1]);var o=qe.DRACOWorker.toString(),a=["/* draco decoder */",n,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending},_getWorker:function(e,t){var r=this;return this._initDecoder().then((function(){var n;r.workerPool.length<r.workerLimit?((n=new Worker(r.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:r.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},r.workerPool.push(n)):r.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(n=r.workerPool[r.workerPool.length-1])._taskCosts[e]=t,n._taskLoad+=t,n}))},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),qe.DRACOWorker=function(){var e,t;function r(e,t,r,n,o,a){var i=a.num_components(),s=r.num_points()*i,c=s*o.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,o),l=e._malloc(c);t.GetAttributeDataArrayForAllPoints(r,a,u,c,l);var h=new o(e.HEAPF32.buffer,l,s).slice();return e._free(l),{name:n,array:h,itemSize:i}}onmessage=function(n){var o=n.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=o.buffer,i=o.taskConfig;t.then((function(e){var t=e.draco,n=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var c=function(e,t,n,o){var a,i,s=o.attributeIDs,c=o.attributeTypes,u=t.GetEncodedGeometryType(n);if(u===e.TRIANGULAR_MESH)a=new e.Mesh,i=t.DecodeBufferToMesh(n,a);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,i=t.DecodeBufferToPointCloud(n,a)}if(!i.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+i.error_msg());var l={index:null,attributes:[]};for(var h in s){var d,f,p=self[c[h]];if(o.useUniqueIDs)f=s[h],d=t.GetAttributeByUniqueId(a,f);else{if(-1===(f=t.GetAttributeId(a,e[s[h]])))continue;d=t.GetAttribute(a,f)}l.attributes.push(r(e,t,a,h,p,d))}u===e.TRIANGULAR_MESH&&(l.index=function(e,t,r){var n=3*r.num_faces(),o=4*n,a=e._malloc(o);t.GetTrianglesUInt32Array(r,o,a);var i=new Uint32Array(e.HEAPF32.buffer,a,n).slice();return e._free(a),{array:i,itemSize:1}}(e,t,a));return e.destroy(a),l}(t,n,s,i),u=c.attributes.map((function(e){return e.array.buffer}));c.index&&u.push(c.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:c},u)}catch(l){console.error(l),self.postMessage({type:"error",id:o.id,error:l.message})}finally{t.destroy(s),t.destroy(n)}}))}}},qe.taskCache=new WeakMap,qe.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},qe.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},qe.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},qe.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};r(14);var Ze=function e(t,r){m.Mesh.call(this,t),this.type="Reflector";var n=this,o=void 0!==(r=r||{}).color?new m.Color(r.color):new m.Color(8355711),a=r.textureWidth||512,i=r.textureHeight||512,s=r.clipBias||0,c=r.shader||e.ReflectorShader,u=new m.Plane,l=new m.Vector3,h=new m.Vector3,d=new m.Vector3,f=new m.Matrix4,p=new m.Vector3(0,0,-1),v=new m.Vector4,g=new m.Vector3,y=new m.Vector3,b=new m.Vector4,M=new m.Matrix4,A=new m.PerspectiveCamera,I={minFilter:m.LinearFilter,magFilter:m.LinearFilter,format:m.RGBFormat},w=new m.WebGLRenderTarget(a,i,I);m.MathUtils.isPowerOfTwo(a)&&m.MathUtils.isPowerOfTwo(i)||(w.texture.generateMipmaps=!1);var D=new m.ShaderMaterial({uniforms:m.UniformsUtils.clone(c.uniforms),fragmentShader:c.fragmentShader,vertexShader:c.vertexShader});D.uniforms.tDiffuse.value=w.texture,D.uniforms.color.value=o,D.uniforms.textureMatrix.value=M,this.material=D,this.onBeforeRender=function(e,t,r){if(h.setFromMatrixPosition(n.matrixWorld),d.setFromMatrixPosition(r.matrixWorld),f.extractRotation(n.matrixWorld),l.set(0,0,1),l.applyMatrix4(f),g.subVectors(h,d),!(g.dot(l)>0)){g.reflect(l).negate(),g.add(h),f.extractRotation(r.matrixWorld),p.set(0,0,-1),p.applyMatrix4(f),p.add(d),y.subVectors(h,p),y.reflect(l).negate(),y.add(h),A.position.copy(g),A.up.set(0,1,0),A.up.applyMatrix4(f),A.up.reflect(l),A.lookAt(y),A.far=r.far,A.updateMatrixWorld(),A.projectionMatrix.copy(r.projectionMatrix),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(A.projectionMatrix),M.multiply(A.matrixWorldInverse),M.multiply(n.matrixWorld),u.setFromNormalAndCoplanarPoint(l,h),u.applyMatrix4(A.matrixWorldInverse),v.set(u.normal.x,u.normal.y,u.normal.z,u.constant);var o=A.projectionMatrix;b.x=(Math.sign(v.x)+o.elements[8])/o.elements[0],b.y=(Math.sign(v.y)+o.elements[9])/o.elements[5],b.z=-1,b.w=(1+o.elements[10])/o.elements[14],v.multiplyScalar(2/v.dot(b)),o.elements[2]=v.x,o.elements[6]=v.y,o.elements[10]=v.z+1-s,o.elements[14]=v.w,w.texture.encoding=e.outputEncoding,n.visible=!1;var a=e.getRenderTarget(),i=e.xr.enabled,c=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(w),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,A),e.xr.enabled=i,e.shadowMap.autoUpdate=c,e.setRenderTarget(a);var m=r.viewport;void 0!==m&&e.state.viewport(m),n.visible=!0}},this.getRenderTarget=function(){return w}};(Ze.prototype=Object.create(m.Mesh.prototype)).constructor=Ze,Ze.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};r(160),r(161);var Ke=function(){};!function(){var e=new m.Vector3,t=new m.Vector3;function r(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}function n(e,t){var r,n,o,a=t.position.distanceTo(e.position),i=0,s=[],c=e.faces.length;for(r=0;r<c;r++)(n=e.faces[r]).hasVertex(t)&&s.push(n);for(r=0;r<c;r++){var u=1;n=e.faces[r];for(var l=0;l<s.length;l++){o=s[l];var h=n.normal.dot(o.normal);u=Math.min(u,(1.001-h)/2)}i=Math.max(i,u)}return s.length<2&&(i=1),a*i+0}function o(e){if(0===e.neighbors.length)return e.collapseNeighbor=null,void(e.collapseCost=-.01);e.collapseCost=1e5,e.collapseNeighbor=null;for(var t=0;t<e.neighbors.length;t++){var r=n(e,e.neighbors[t]);e.collapseNeighbor||(e.collapseNeighbor=e.neighbors[t],e.collapseCost=r,e.minCost=r,e.totalCost=0,e.costCount=0),e.costCount++,e.totalCost+=r,r<e.minCost&&(e.collapseNeighbor=e.neighbors[t],e.minCost=r)}e.collapseCost=e.totalCost/e.costCount}function a(e,t){for(console.assert(0===e.faces.length);e.neighbors.length;){r(e.neighbors.pop().neighbors,e)}r(t,e)}function i(e,t){r(t,e),e.v1&&r(e.v1.faces,e),e.v2&&r(e.v2.faces,e),e.v3&&r(e.v3.faces,e);for(var n,o,a=[e.v1,e.v2,e.v3],i=0;i<3;i++)o=a[(i+1)%3],(n=a[i])&&o&&(n.removeIfNonNeighbor(o),o.removeIfNonNeighbor(n))}function s(e,t,r,n){if(n){var s,c=[];for(s=0;s<r.neighbors.length;s++)c.push(r.neighbors[s]);for(s=r.faces.length-1;s>=0;s--)r.faces[s].hasVertex(n)&&i(r.faces[s],t);for(s=r.faces.length-1;s>=0;s--)r.faces[s].replaceVertex(r,n);for(a(r,e),s=0;s<c.length;s++)o(c[s])}else a(r,e)}function c(e){for(var t=e[0],r=0;r<e.length;r++)e[r].collapseCost<t.collapseCost&&(t=e[r]);return t}function u(e,t,r,n,o,a){this.a=n,this.b=o,this.c=a,this.v1=e,this.v2=t,this.v3=r,this.normal=new m.Vector3,this.computeNormal(),e.faces.push(this),e.addUniqueNeighbor(t),e.addUniqueNeighbor(r),t.faces.push(this),t.addUniqueNeighbor(e),t.addUniqueNeighbor(r),r.faces.push(this),r.addUniqueNeighbor(e),r.addUniqueNeighbor(t)}function l(e,t){this.position=e,this.id=t,this.faces=[],this.neighbors=[],this.collapseCost=0,this.collapseNeighbor=null}u.prototype.computeNormal=function(){var r=this.v1.position,n=this.v2.position,o=this.v3.position;e.subVectors(o,n),t.subVectors(r,n),e.cross(t).normalize(),this.normal.copy(e)},u.prototype.hasVertex=function(e){return e===this.v1||e===this.v2||e===this.v3},u.prototype.replaceVertex=function(e,t){e===this.v1?this.v1=t:e===this.v2?this.v2=t:e===this.v3&&(this.v3=t),r(e.faces,this),t.faces.push(this),e.removeIfNonNeighbor(this.v1),this.v1.removeIfNonNeighbor(e),e.removeIfNonNeighbor(this.v2),this.v2.removeIfNonNeighbor(e),e.removeIfNonNeighbor(this.v3),this.v3.removeIfNonNeighbor(e),this.v1.addUniqueNeighbor(this.v2),this.v1.addUniqueNeighbor(this.v3),this.v2.addUniqueNeighbor(this.v1),this.v2.addUniqueNeighbor(this.v3),this.v3.addUniqueNeighbor(this.v1),this.v3.addUniqueNeighbor(this.v2),this.computeNormal()},l.prototype.addUniqueNeighbor=function(e){var t,r;t=this.neighbors,r=e,-1===t.indexOf(r)&&t.push(r)},l.prototype.removeIfNonNeighbor=function(e){var t=this.neighbors,r=this.faces,n=t.indexOf(e);if(-1!==n){for(var o=0;o<r.length;o++)if(r[o].hasVertex(e))return;t.splice(n,1)}},Ke.prototype.modify=function(e,t){e.isBufferGeometry&&(e=(new m.Geometry).fromBufferGeometry(e)),e.mergeVertices();var r,n,a,i=e.vertices,h=e.faces,d=[],f=[];for(r=0,n=i.length;r<n;r++){var p=new l(i[r],r);d.push(p)}for(r=0,n=h.length;r<n;r++){var v=(D=h[r]).a,g=D.b,y=D.c,b=new u(d[v],d[g],d[y],v,g,y);f.push(b)}for(r=0,n=d.length;r<n;r++)o(d[r]);for(var M=t;M--;){if(!(a=c(d))){console.log("THREE.SimplifyModifier: No next vertex");break}s(d,f,a,a.collapseNeighbor)}var A=new m.BufferGeometry,I=[],w=[];for(r=0;r<d.length;r++){p=d[r].position;I.push(p.x,p.y,p.z)}for(r=0;r<f.length;r++){var D=f[r];v=d.indexOf(D.v1),g=d.indexOf(D.v2),y=d.indexOf(D.v3);w.push(v,g,y)}return A.setAttribute("position",new m.Float32BufferAttribute(I,3)),A.setIndex(w),A}}();var $e=function(e){this.subdivisions=void 0===e?1:e};$e.prototype.modify=function(e){(e=e.isBufferGeometry?(new m.Geometry).fromBufferGeometry(e):e.clone()).mergeVertices();for(var t=this.subdivisions;t-- >0;)this.smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e},function(){var e=["a","b","c"];function t(e,t,r){return r[Math.min(e,t)+"_"+Math.max(e,t)]}function r(e,t,r,n,o,a){var i,s=Math.min(e,t),c=Math.max(e,t),u=s+"_"+c;u in n?i=n[u]:(i={a:r[s],b:r[c],newEdge:null,faces:[]},n[u]=i);i.faces.push(o),a[e].edges.push(i),a[t].edges.push(i)}function n(e,t,r,n,o){e.push(new m.Face3(t,r,n,void 0,void 0,o))}function o(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function a(e,t,r,n){e.push([t.clone(),r.clone(),n.clone()])}$e.prototype.smooth=function(i){var s,c,u,l,h,d,f,p,v,g,y,b,M,A=new m.Vector3,I=[];s=i.vertices,c=i.faces;var w,D,x,T,S,R,G,E,O,P,F,_,k,U,V=void 0!==(u=i.faceVertexUvs)[0]&&u[0].length>0;if(V)for(var L=0;L<u.length;L++)I.push([]);for(f in function(e,t,n,o){var a,i,s;for(a=0,i=e.length;a<i;a++)n[a]={edges:[]};for(a=0,i=t.length;a<i;a++)r((s=t[a]).a,s.b,e,o,s,n),r(s.b,s.c,e,o,s,n),r(s.c,s.a,e,o,s,n)}(s,c,g=new Array(s.length),y={}),b=[],y){for(D=y[f],x=new m.Vector3,S=3/8,R=1/8,2!=(G=D.faces.length)&&(S=.5,R=0),x.addVectors(D.a,D.b).multiplyScalar(S),A.set(0,0,0),L=0;L<G;L++){for(T=D.faces[L],v=0;v<3&&((w=s[T[e[v]]])===D.a||w===D.b);v++);A.add(w)}A.multiplyScalar(R),x.add(A),D.newEdge=b.length,b.push(x)}for(M=[],f=0,p=s.length;f<p;f++){for(k=s[f],3==(d=(_=g[f].edges).length)?E=3/16:d>3&&(E=3/(8*d)),O=1-d*E,P=E,d<=2&&2==d&&(O=3/4,P=1/8),U=k.clone().multiplyScalar(O),A.set(0,0,0),L=0;L<d;L++)w=(F=_[L]).a!==k?F.a:F.b,A.add(w);A.multiplyScalar(P),U.add(A),M.push(U)}l=M.concat(b);var N,j,C,X,H,B,z,Q=M.length;h=[];var W=new m.Vector2,Y=new m.Vector2,q=new m.Vector2;for(f=0,p=c.length;f<p;f++)if(n(h,N=t((T=c[f]).a,T.b,y).newEdge+Q,j=t(T.b,T.c,y).newEdge+Q,C=t(T.c,T.a,y).newEdge+Q,T.materialIndex),n(h,T.a,N,C,T.materialIndex),n(h,T.b,j,N,T.materialIndex),n(h,T.c,C,j,T.materialIndex),V)for(L=0;L<u.length;L++)H=(X=u[L][f])[0],B=X[1],z=X[2],W.set(o(H.x,B.x),o(H.y,B.y)),Y.set(o(B.x,z.x),o(B.y,z.y)),q.set(o(H.x,z.x),o(H.y,z.y)),a(I[L],W,Y,q),a(I[L],H,W,q),a(I[L],B,Y,W),a(I[L],z,q,Y);i.vertices=l,i.faces=h,V&&(i.faceVertexUvs=I)}}();var Je=function(e){this.maxEdgeLength=e};Je.prototype.modify=function(e){for(var t,r=[],n=[],o=this.maxEdgeLength*this.maxEdgeLength,a=0,i=e.faceVertexUvs.length;a<i;a++)n[a]=[];for(a=0,i=e.faces.length;a<i;a++){var s=e.faces[a];if(s instanceof m.Face3){var c=s.a,u=s.b,l=s.c,h=e.vertices[c],d=e.vertices[u],f=e.vertices[l],p=h.distanceToSquared(d),v=d.distanceToSquared(f),g=h.distanceToSquared(f);if(p>o||v>o||g>o){var y=e.vertices.length,b=s.clone(),M=s.clone();if(p>=v&&p>=g){if((A=h.clone()).lerp(d,.5),b.a=c,b.b=y,b.c=l,M.a=y,M.b=u,M.c=l,3===s.vertexNormals.length)(I=s.vertexNormals[0].clone()).lerp(s.vertexNormals[1],.5),b.vertexNormals[1].copy(I),M.vertexNormals[0].copy(I);if(3===s.vertexColors.length)(w=s.vertexColors[0].clone()).lerp(s.vertexColors[1],.5),b.vertexColors[1].copy(w),M.vertexColors[0].copy(w);t=0}else if(v>=p&&v>=g){if((A=d.clone()).lerp(f,.5),b.a=c,b.b=u,b.c=y,M.a=y,M.b=l,M.c=c,3===s.vertexNormals.length)(I=s.vertexNormals[1].clone()).lerp(s.vertexNormals[2],.5),b.vertexNormals[2].copy(I),M.vertexNormals[0].copy(I),M.vertexNormals[1].copy(s.vertexNormals[2]),M.vertexNormals[2].copy(s.vertexNormals[0]);if(3===s.vertexColors.length)(w=s.vertexColors[1].clone()).lerp(s.vertexColors[2],.5),b.vertexColors[2].copy(w),M.vertexColors[0].copy(w),M.vertexColors[1].copy(s.vertexColors[2]),M.vertexColors[2].copy(s.vertexColors[0]);t=1}else{var A,I,w;if((A=h.clone()).lerp(f,.5),b.a=c,b.b=u,b.c=y,M.a=y,M.b=u,M.c=l,3===s.vertexNormals.length)(I=s.vertexNormals[0].clone()).lerp(s.vertexNormals[2],.5),b.vertexNormals[2].copy(I),M.vertexNormals[0].copy(I);if(3===s.vertexColors.length)(w=s.vertexColors[0].clone()).lerp(s.vertexColors[2],.5),b.vertexColors[2].copy(w),M.vertexColors[0].copy(w);t=2}r.push(b,M),e.vertices.push(A);for(var D=0,x=e.faceVertexUvs.length;D<x;D++)if(e.faceVertexUvs[D].length){var T=e.faceVertexUvs[D][a],S=T[0],R=T[1],G=T[2];if(0===t){(P=S.clone()).lerp(R,.5);var E=[S.clone(),P.clone(),G.clone()],O=[P.clone(),R.clone(),G.clone()]}else if(1===t){(P=R.clone()).lerp(G,.5);E=[S.clone(),R.clone(),P.clone()],O=[P.clone(),G.clone(),S.clone()]}else{var P;(P=S.clone()).lerp(G,.5);E=[S.clone(),R.clone(),P.clone()],O=[P.clone(),R.clone(),G.clone()]}n[D].push(E,O)}}else{r.push(s);for(D=0,x=e.faceVertexUvs.length;D<x;D++)n[D].push(e.faceVertexUvs[D][a])}}}e.faces=r,e.faceVertexUvs=n};var et=function e(){var t=e.SkyShader,r=new m.ShaderMaterial({name:"SkyShader",fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:m.UniformsUtils.clone(t.uniforms),side:m.BackSide,depthWrite:!1});m.Mesh.call(this,new m.BoxBufferGeometry(1,1,1),r)};et.prototype=Object.create(m.Mesh.prototype),et.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new m.Vector3},up:{value:new m.Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join("\n")};["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["uniform sampler2D tDiffuse;","uniform float h;","varying vec2 vUv;","void main() {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","\tgl_FragColor = sum;","}"].join("\n"),["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["uniform sampler2D tDiffuse;","uniform float v;","varying vec2 vUv;","void main() {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","\tgl_FragColor = sum;","}"].join("\n");function tt(e){var t=e+"BufferGeometry";return Object(f.forwardRef)((function(e,r){var n=e.args,o=e.children,a=Object(d.a)(e,["args","children"]);return p.a.createElement("mesh",Object(h.a)({ref:r},a),p.a.createElement(t,{attach:"geometry",args:n}),o)}))}tt("box"),tt("circle"),tt("cone"),tt("cylinder"),tt("sphere"),tt("plane"),tt("tube"),tt("torus"),tt("torusKnot"),tt("tetrahedron"),tt("ring"),tt("polyhedron"),tt("icosahedron"),tt("octahedron"),tt("dodecahedron"),tt("extrude"),tt("lathe"),tt("parametric");Object(v.e)({EffectComposer:Q,RenderPass:Y,ShaderPass:H});function rt(e,t){"function"===typeof e?e(t):null!=e&&(e.current=t)}function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=Object(f.useState)(),o=Object(l.a)(n,2),a=o[0],i=o[1];return Object(f.useLayoutEffect)((function(){var t=e();return i(t),rt(r,t),function(){return rt(r,null)}}),t),a}var ot=Object(f.forwardRef)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enableDamping:!0},t=arguments.length>1?arguments[1]:void 0,r=Object(v.h)(),n=r.camera,o=r.gl,a=r.invalidate,i=nt((function(){return new K(n,o.domElement)}),[n,o],t);return Object(v.f)((function(){return null==i?void 0:i.update()})),Object(f.useEffect)((function(){return null==i||null==i.addEventListener||i.addEventListener("change",a),function(){return null==i||null==i.removeEventListener?void 0:i.removeEventListener("change",a)}}),[i,a]),i?p.a.createElement("primitive",Object(h.a)({dispose:void 0,object:i,enableDamping:!0},e)):null}));ce((function(e){return m.DefaultLoadingManager.onStart=function(t,r,n){return e({active:!0,item:t,loaded:r,total:n,progress:r/n*100})},m.DefaultLoadingManager.onLoad=function(){return e({active:!1})},m.DefaultLoadingManager.onError=function(t){return e((function(e){return{errors:[].concat(Object(u.a)(e.errors),[t])}}))},m.DefaultLoadingManager.onProgress=function(t,r,n){return e({item:t,loaded:r,total:n,progress:r/n*100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}}));function at(e){return Object(v.g)(m.TextureLoader,e)}at.preload=function(e){return v.g.preload(m.TextureLoader,e)};new m.Vector3,new m.Vector3,new m.Vector3;new m.Matrix4,new m.Ray,new m.Sphere,new m.Vector3;m.MeshPhysicalMaterial,m.MeshStandardMaterial;m.ShaderMaterial},77:function(e,t,r){"use strict";r.d(t,"useTransition",(function(){return _e}));var n=r(47),o=r(33),a=r(105),i=r.n(a),s=r(73),c=r(38),u=r(41),l=r(39),h=r(40),d=r(324),f=r(168),p=r(75),v=r(37),m=r(56),g=r(106),y=r(59),b=r(78),M=r(50),A=r(108),I=r(61),w=r(3),D=r(0),x=r(107),T=r(36),S=r(169),R=r(170),G=r(7),E=r(145);var O=Object(w.a)(Object(w.a)({},{tension:170,friction:26}),{},{mass:1,damping:1,easing:function(e){return e},clamp:!1}),P=function e(){Object(v.a)(this,e),this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,O)};function F(e,t){if(y.d.und(t.decay)){var r=!y.d.und(t.tension)||!y.d.und(t.friction);!r&&y.d.und(t.frequency)&&y.d.und(t.damping)&&y.d.und(t.mass)||(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}else e.duration=void 0}var _=[],k=function e(){Object(v.a)(this,e),this.changed=!1,this.values=_,this.toValues=null,this.fromValues=_,this.to=void 0,this.from=void 0,this.config=new P,this.immediate=!1,this.onStart=void 0,this.onChange=void 0,this.onRest=[]},U=function(e,t){return Object(S.b)(e,t||[{}])};function V(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return y.d.fun(e)?e.apply(void 0,r):e}var L=function(e,t){return!0===e||!!(t&&e&&(y.d.fun(e)?e(t):Object(y.h)(e).includes(t)))},N=function(e,t,r){return e&&(y.d.fun(e)?e(t,r):y.d.arr(e)?e[t]:Object(w.a)({},e))},j=function(e,t){return!0===e.default?e[t]:e.default?e.default[t]:void 0},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=X;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));var o,a=Object(p.a)(n);try{for(a.s();!(o=a.n()).done;){var i=o.value,s=e[i];y.d.und(s)||t.includes(i)||(r[i]=s)}}catch(c){a.e(c)}finally{a.f()}return r},X=["pause","cancel","config","immediate","onDelayEnd","onProps","onStart","onChange","onRest"],H={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onDelayEnd:1,onProps:1,onStart:1,onChange:1,onRest:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,keys:1,callId:1,parentId:1};function B(e){var t=function(e){var t={},r=0;if(Object(y.b)(e,(function(e,n){H[n]||(t[n]=e,r++)})),r)return t}(e);if(t){var r={to:t};return Object(y.b)(e,(function(e,n){return n in t||(r[n]=e)})),r}return Object(w.a)({},e)}function z(e){var t=Object(b.b)(e);return t?z(t.get()):y.d.arr(e)?e.map(z):Object(y.e)(e)?Object(T.createStringInterpolator)({range:[0,1],output:[e,e]})(1):e}function Q(e,t){var r=t.key,n=t.props,o=t.state,a=t.actions;return new Promise((function(t,i){var s,c,u=!1,l=L(n.cancel,r);function h(){o.resumeQueue.add(d),c.cancel(),s=c.time-M.Globals.now()}function d(){s>0?(o.pauseQueue.add(h),c=M.Globals.frameLoop.setTimeout(f,s)):f()}function f(){o.pauseQueue.delete(h),e<=(o.cancelId||0)&&(l=!0);try{a.start(Object(w.a)(Object(w.a)({},n),{},{callId:e,delay:s,cancel:l,pause:u}),t)}catch(r){i(r)}}l?f():(s=V(n.delay||0,r),(u=L(n.pause,r))?(o.resumeQueue.add(d),a.pause()):(a.resume(),d()))}))}var W=function(e,t){return 1==t.length?t[0]:t.some((function(e){return e.cancelled}))?Z(e):t.every((function(e){return e.noop}))?Y(e):q(e,t.every((function(e){return e.finished})))},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.get();return{value:t,noop:!0,finished:!0,target:e}},q=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.get();return{value:r,finished:t,target:e}},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.get();return{value:t,cancelled:!0,target:e}};function K(e,t,r,n){return $.apply(this,arguments)}function $(){return($=Object(f.a)(i.a.mark((function e(t,r,n,o){var a,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.pause){e.next=3;break}return e.next=3,new Promise((function(e){n.resumeQueue.add(e)}));case 3:if(a=r.callId,s=r.parentId,c=r.onRest,u=n.asyncTo,l=n.promise,s||t!==u||r.reset){e.next=7;break}return e.abrupt("return",l);case 7:return e.abrupt("return",n.promise=Object(f.a)(i.a.mark((function e(){var h,d,v,m,g,b,M,A;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.asyncId=a,n.asyncTo=t,h=C(r,["onRest"]),m=new Promise((function(e,t){return d=e,v=t})),g=function(e){var t=a<=(n.cancelId||0)&&Z(o)||a!==n.asyncId&&q(o,!1);if(t)throw e.result=t,e},b=function(e){return function(){var t=function(e){throw e instanceof ee&&v(e),e};try{return e.apply(void 0,arguments).catch(t)}catch(r){t(r)}}}((function(e,t){var r=new ee;g(r);var s=y.d.obj(e)?Object(w.a)({},e):Object(w.a)(Object(w.a)({},t),{},{to:e});return s.parentId=a,Object(y.b)(h,(function(e,t){y.d.und(s[t])&&(s[t]=e)})),o.start(s).then(function(){var e=Object(f.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(r),!o.is("PAUSED")){e.next=4;break}return e.next=4,new Promise((function(e){n.resumeQueue.add(e)}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),e.prev=7,y.d.arr(t)?A=function(){var e=Object(f.a)(i.a.mark((function e(t){var r,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(p.a)(t),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}return o=n.value,e.next=7,b(o);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()(t):y.d.fun(t)&&(A=Promise.resolve(t(b,o.stop.bind(o)))),e.next=11,Promise.all([A.then(d),m]);case 11:M=q(o,!0),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(7),!(e.t0 instanceof ee)){e.next=20;break}M=e.t0.result,e.next=21;break;case 20:throw e.t0;case 21:return e.prev=21,a==n.asyncId&&(n.asyncId=s,n.asyncTo=s?u:void 0,n.promise=s?l:void 0),e.finish(21);case 24:return y.d.fun(c)&&Object(T.batchedUpdates)((function(){c(M)})),e.abrupt("return",M);case 26:case"end":return e.stop()}}),e,null,[[7,14,21,24]])})))());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){e.cancelId=t,e.asyncId=e.asyncTo=e.promise=void 0}var ee=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){var e;return Object(v.a)(this,r),(e=t.call(this,"An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")).result=void 0,e}return r}(Object(d.a)(Error)),te=function(e){return e instanceof ne},re=1,ne=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(v.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).id=re++,e.key=void 0,e._priority=0,e._children=new Set,e}return Object(u.a)(r,[{key:"get",value:function(){var e=Object(x.f)(this);return e&&e.getValue()}},{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object(T.to)(this,t)}},{key:"interpolate",value:function(){Object(R.a)();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object(T.to)(this,t)}},{key:"addChild",value:function(e){this._children.size||this._attach(),this._children.add(e)}},{key:"removeChild",value:function(e){this._children.delete(e),this._children.size||this._detach()}},{key:"onParentChange",value:function(e){var t=e.type;this.idle?"start"==t&&(this._reset(),this._start()):"reset"==t&&this._reset()}},{key:"_attach",value:function(){}},{key:"_detach",value:function(){}},{key:"_reset",value:function(){this._emit({type:"reset",parent:this})}},{key:"_start",value:function(){this._emit({type:"start",parent:this})}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._emit({type:"change",parent:this,value:e,idle:t})}},{key:"_onPriorityChange",value:function(e){this.idle||T.frameLoop.start(this),this._emit({type:"priority",parent:this,priority:e})}},{key:"_emit",value:function(e){Object(y.b)(Array.from(this._children),(function(t){t.onParentChange(e)}))}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}}]),r}(b.a),oe="CREATED",ae="IDLE",ie="ACTIVE",se="PAUSED",ce="DISPOSED",ue=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e,n){var o;if(Object(v.a)(this,r),(o=t.call(this)).key=void 0,o.animation=new k,o.queue=void 0,o._phase=oe,o._state={pauseQueue:new Set,resumeQueue:new Set},o._defaultProps={},o._lastCallId=0,o._lastToId=0,!y.d.und(e)||!y.d.und(n)){var a=y.d.obj(e)?Object(w.a)({},e):Object(w.a)(Object(w.a)({},n),{},{from:e});a.default=!0,o.start(a)}return o}return Object(u.a)(r,[{key:"advance",value:function(e){var t=this,r=!0,n=!1,o=this.animation,a=o.config,i=o.toValues,s=Object(x.g)(o.to);if(!s){var c=Object(b.b)(o.to);c&&(i=Object(y.h)(c.get()))}return o.values.forEach((function(c,u){if(!c.done){var l=s?s[u].lastPosition:i[u],h=o.immediate,d=l;if(!h){if(d=c.lastPosition,a.tension<=0)return void(c.done=!0);var f,p=c.elapsedTime+=e,v=o.fromValues[u],m=null!=c.v0?c.v0:c.v0=y.d.arr(a.velocity)?a.velocity[u]:a.velocity;if(y.d.und(a.duration))if(a.decay){var g=!0===a.decay?.998:a.decay,b=Math.exp(-(1-g)*p);d=v+m/(1-g)*(1-b),h=Math.abs(c.lastPosition-d)<.1,f=m*b}else{f=null==c.lastVelocity?m:c.lastVelocity;for(var M=a.precision||(v==l?.005:Math.min(1,.001*Math.abs(l-v))),A=a.restVelocity||M/10,I=a.clamp?0:a.bounce,w=!y.d.und(I),D=v==l?c.v0>0:v<l,x=Math.ceil(e/1),T=0;T<x&&(Math.abs(f)>A||!(h=Math.abs(l-d)<=M));++T){w&&(d==l||d>l==D)&&(f=-f*I,d=l),d+=1*(f+=1*((1e-6*-a.tension*(d-l)+.001*-a.friction*f)/a.mass))}}else{var S=a.progress||0;a.duration<=0?S=1:S+=(1-S)*Math.min(1,p/a.duration),f=((d=v+a.easing(S)*(l-v))-c.lastPosition)/e,h=1==S}c.lastVelocity=f,Number.isNaN(d)&&(console.warn("Got NaN while animating:",t),h=!0)}s&&!s[u].done&&(h=!1),h?c.done=!0:r=!1,c.setValue(d,a.round)&&(n=!0)}})),r?this.finish():n&&this._onChange(this.get()),r}},{key:"is",value:function(e){return this._phase==e}},{key:"set",value:function(e){var t=this;return Object(T.batchedUpdates)((function(){if(t._focus(e),t._set(e)&&!t.is(ie))return t._onChange(t.get(),!0);t._stop()})),this}},{key:"pause",value:function(){le(this,"pause"),this.is(se)||(this._phase=se,Object(y.c)(this._state.pauseQueue,(function(e){return e()})))}},{key:"resume",value:function(){le(this,"resume"),this.is(se)&&(this._start(),Object(y.c)(this._state.resumeQueue,(function(e){return e()})))}},{key:"finish",value:function(e){var t=this;if(this.resume(),this.is(ie)){var r=this.animation;!r.config.decay&&y.d.und(e)&&(e=r.to),y.d.und(e)||this._set(e),Object(T.batchedUpdates)((function(){r.changed||(r.changed=!0,r.onStart&&r.onStart(t)),t._stop()}))}return this}},{key:"update",value:function(e){return le(this,"update"),(this.queue||(this.queue=[])).push(e),this}},{key:"start",value:function(){var e=Object(f.a)(i.a.mark((function e(t,r){var n,o,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(this,"start"),y.d.und(t)?(n=this.queue||[],this.queue=[]):n=[y.d.obj(t)?t:Object(w.a)(Object(w.a)({},r),{},{to:t})],e.next=4,Promise.all(n.map((function(e){return a._update(e)})));case 4:return o=e.sent,e.abrupt("return",W(this,o));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"stop",value:function(e){var t=this;return this.is(ce)||(J(this._state,this._lastCallId),this._focus(this.get()),Object(T.batchedUpdates)((function(){return t._stop(e)}))),this}},{key:"reset",value:function(){this._update({reset:!0})}},{key:"dispose",value:function(){this.is(ce)||(this.animation&&(this.animation.onRest=[]),this.stop(),this._phase=ce)}},{key:"onParentChange",value:function(e){Object(s.a)(Object(c.a)(r.prototype),"onParentChange",this).call(this,e),"change"==e.type?this.is(ie)||(this._reset(),this.is(se)||this._start()):"priority"==e.type&&(this.priority=e.priority+1)}},{key:"_prepareNode",value:function(e){var t=e.to,r=e.from,n=e.reverse,o=this.key||"",a={to:t=!y.d.obj(t)||Object(b.b)(t)?t:t[o],from:r=!y.d.obj(r)||Object(b.b)(r)?r:r[o]};if(this.is(oe)){if(n){var i=[r,t];t=i[0],r=i[1]}r=Object(b.c)(r);var s=this._updateNode(y.d.und(r)?Object(b.c)(t):r);s&&!y.d.und(r)&&s.setValue(r)}return a}},{key:"_updateNode",value:function(e){var t=Object(x.f)(this);if(!y.d.und(e)){var r=this._getNodeType(e);t&&t.constructor===r||Object(x.h)(this,t=r.create(e))}return t}},{key:"_getNodeType",value:function(e){var t=Object(x.f)(e);return t?t.constructor:y.d.arr(e)?x.a:Object(y.e)(e)?x.c:x.d}},{key:"_update",value:function(e,t){var r=this,n=this._defaultProps,o=function(t){var r=j(e,t);y.d.und(r)||(n[t]=r),n[t]&&(e[t]=n[t])};o("cancel"),o("pause");var a=this._prepareNode(e);return Q(++this._lastCallId,{key:this.key,props:e,state:this._state,actions:{pause:this.pause.bind(this),resume:this.resume.bind(this),start:this._merge.bind(this,a)}}).then((function(n){if(e.loop&&n.finished&&(!t||!n.noop)){var o=fe(e);if(o)return r._update(o,!0)}return n}))}},{key:"_merge",value:function(e,t,r){if(t.cancel)return this.stop(!0),r(Z(this));var n=this.key,o=this.animation,a=this._defaultProps,i=!y.d.und(e.to),s=!y.d.und(e.from);if(i||s){if(!(t.callId>this._lastToId))return r(Z(this));this._lastToId=t.callId}var c=function(e){return y.d.und(t[e])?a[e]:t[e]},u=he(c("onDelayEnd"),n);u&&u(t,this),t.default&&function(e,t,r){C(t,r,e)}(a,t,["pause","cancel"]);var l=o.to,h=o.from,d=e.to,f=void 0===d?l:d,p=e.from,v=void 0===p?h:p;if(s&&!i&&(f=v),t.reverse){var m=[v,f];f=m[0],v=m[1]}var g=!Object(y.f)(v,h);g&&(o.from=v);var M=!Object(y.f)(f,l);M&&this._focus(f);var A=Object(b.b)(f),I=Object(b.b)(v);I&&(v=I.get());var D=y.d.arr(t.to)||y.d.fun(t.to),S=o.config,R=S.decay,G=S.velocity;t.config&&!D&&function(e,t,r){for(var n in r&&(F(r=Object(w.a)({},r),t),t=Object(w.a)(Object(w.a)({},r),t)),F(e,t),Object.assign(e,t),O)null==e[n]&&(e[n]=O[n]);var o=e.mass,a=e.frequency,i=e.damping;y.d.und(a)||(a<.01&&(a=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/a,2)*o,e.friction=4*Math.PI*i*o/a)}(S,V(t.config,n),t.config!==a.config?V(a.config,n):void 0);var E=Object(x.f)(this);if(!E||y.d.und(f))return r(q(this,!0));var P=y.d.und(t.reset)?s&&!t.default:!y.d.und(v)&&L(t.reset,n),_=P?v:this.get(),k=z(f),U=y.d.num(k)||y.d.arr(k)||Object(y.e)(k),N=!D&&(!U||L(a.immediate||t.immediate,n));if(M)if(N)E=this._updateNode(k);else{var j=this._getNodeType(f);if(j!==E.constructor)throw Error("Cannot animate between "+E.constructor.name+" and "+j.name+', as the "to" prop suggests')}var X=E.constructor,H=!!A,B=!1;if(!H){var Q=P||this.is(oe)&&g;(M||Q)&&(H=!(B=Object(y.f)(z(_),k))),Object(y.f)(S.decay,R)&&Object(y.f)(S.velocity,G)||(H=!0)}if(B&&this.is(ie)&&(o.changed&&!P?H=!0:H||this._stop()),!D){(H||Object(b.b)(l))&&(o.values=E.getPayload(),o.toValues=A?null:X==x.c?[1]:Object(y.h)(k)),o.immediate=N,o.onStart=he(c("onStart"),n),o.onChange=he(c("onChange"),n);var W=o.onRest,$=P&&!t.onRest?W[0]||y.g:de(he(c("onRest"),n),this);if(H){o.onRest=[$,de(r,this)];var J=P?0:1;J<W.length&&Object(T.batchedUpdates)((function(){for(;J<W.length;J++)W[J]()}))}else(P||t.onRest)&&(o.onRest[0]=$)}var ee=he(c("onProps"),n);ee&&ee(t,this),P&&E.setValue(_),D?r(K(t.to,t,this._state,this)):H?(P&&(this._phase=ae),this._reset(),this._start()):this.is(ie)&&!M?o.onRest.push(de(r,this)):r(Y(this,_))}},{key:"_focus",value:function(e){var t=this.animation;if(e!==t.to){var r=Object(b.b)(t.to);r&&r.removeChild(this),t.to=e;var n=0;(r=Object(b.b)(e))&&(r.addChild(this),te(e)&&(n=(e.priority||0)+1)),this.priority=n}}},{key:"_set",value:function(e){var t=Object(b.b)(e);t&&(e=t.get());var r=Object(x.f)(this),n=r&&r.getValue();return r?r.setValue(e):this._updateNode(e),!Object(y.f)(e,n)}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.animation;n.changed||t||(n.changed=!0,n.onStart&&n.onStart(this)),n.onChange&&n.onChange(e,this),Object(s.a)(Object(c.a)(r.prototype),"_onChange",this).call(this,e,t)}},{key:"_reset",value:function(){var e=this.animation;Object(x.f)(this).reset(e.to),this.is(ie)||(e.changed=!1),e.immediate||(e.fromValues=e.values.map((function(e){return e.lastPosition}))),Object(s.a)(Object(c.a)(r.prototype),"_reset",this).call(this)}},{key:"_start",value:function(){this.is(ie)||(this._phase=ie,Object(s.a)(Object(c.a)(r.prototype),"_start",this).call(this),T.skipAnimation?this.finish():T.frameLoop.start(this))}},{key:"_stop",value:function(e){if(this.resume(),this.is(ie)){this._phase=ae,this._onChange(this.get(),!0);var t=this.animation;Object(y.b)(t.values,(function(e){e.done=!0}));var r=t.onRest;r.length&&(t.onRest=[t.toValues?y.g:r[0]],t.changed||(r[0]=y.g),Object(y.b)(r,(function(t){return t(e)})))}}},{key:"idle",get:function(){return!this.is(ie)&&!this._state.asyncTo}},{key:"goal",get:function(){return Object(b.c)(this.animation.to)}},{key:"velocity",get:function(){var e=Object(x.f)(this);return e instanceof x.d?e.lastVelocity||0:e.getPayload().map((function(e){return e.lastVelocity||0}))}}]),r}(ne);function le(e,t){if(e.is(ce))throw Error('Cannot call "'+t+'" of disposed "'+e.constructor.name+'" object')}function he(e,t){return y.d.fun(e)?e:t&&e?e[t]:void 0}var de=function(e,t){var r=t.animation.to;return e?function(n){if(n)e(Z(t));else{var o=z(r),a=z(t.get()),i=Object(y.f)(a,o);e(q(t,i))}}:y.g};function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,n=V(t);if(n){var o=!0!==n&&B(n),a=(o||e).reverse,i=!o||o.reset;return pe(Object(w.a)(Object(w.a)({},e),{},{loop:t,default:!1,to:!a||y.d.arr(r)||y.d.fun(r)?r:void 0,from:i?e.from:void 0,reset:i},o))}}function pe(e){var t=e=B(e),r=t.to,n=t.from,o=new Set;return n?ve(n,o):delete e.from,y.d.obj(r)?ve(r,o):r||delete e.to,e.keys=o.size?Array.from(o):null,e}function ve(e,t){Object(y.b)(e,(function(e,r){return null!=e&&t.add(r)}))}var me=["onStart","onChange","onRest"],ge=1,ye=function(){function e(t,r){Object(v.a)(this,e),this.id=ge++,this.springs={},this.queue=[],this._flush=void 0,this._initialProps=void 0,this._phase=oe,this._lastAsyncId=0,this._active=new Set,this._state={pauseQueue:new Set,resumeQueue:new Set},this._events={onStart:new Set,onChange:new Set,onRest:new Map},this._onFrame=this._onFrame.bind(this),r&&(this._flush=r),t&&this.start(t)}return Object(u.a)(e,[{key:"is",value:function(e){return this._phase==e}},{key:"get",value:function(){var e={};return this.each((function(t,r){return e[r]=t.get()})),e}},{key:"update",value:function(e){return e&&this.queue.push(pe(e)),this}},{key:"start",value:function(e){var t=e?Object(y.h)(e).map(pe):this.queue;return e||(this.queue=[]),this._flush?this._flush(this,t):(xe(this,t),be(this,t))}},{key:"stop",value:function(e){if(y.d.und(e))this.each((function(e){return e.stop()})),J(this._state,this._lastAsyncId);else{var t=this.springs;Object(y.b)(Object(y.h)(e),(function(e){return t[e].stop()}))}return this}},{key:"pause",value:function(e){if(y.d.und(e))this.each((function(e){return e.pause()}));else{var t=this.springs;Object(y.b)(Object(y.h)(e),(function(e){return t[e].pause()}))}return this}},{key:"resume",value:function(e){if(y.d.und(e))this.each((function(e){return e.resume()}));else{var t=this.springs;Object(y.b)(Object(y.h)(e),(function(e){return t[e].resume()}))}return this}},{key:"reset",value:function(){return this.each((function(e){return e.reset()})),this}},{key:"each",value:function(e){Object(y.b)(this.springs,e)}},{key:"dispose",value:function(){this._state.asyncTo=void 0,this.each((function(e){return e.dispose()})),this.springs={}}},{key:"_onFrame",value:function(){var e=this,t=this._events,r=t.onStart,n=t.onChange,a=t.onRest,i=this._active.size>0;i&&this._phase!=ie&&(this._phase=ie,Object(y.c)(r,(function(t){return t(e)})));var s=(n.size||!i&&a.size)&&this.get();Object(y.c)(n,(function(e){return e(s)})),i||(this._phase=ae,Object(y.c)(a,(function(e){var t=Object(o.a)(e,2),r=t[0],n=t[1];n.value=s,r(n)})))}},{key:"onParentChange",value:function(e){"change"==e.type&&(this._active[e.idle?"delete":"add"](e.parent),T.frameLoop.onFrame(this._onFrame))}},{key:"idle",get:function(){return!this._state.asyncTo&&Object.values(this.springs).every((function(e){return e.idle}))}}]),e}();function be(e,t){return Promise.all(t.map((function(t){return Me(e,t)}))).then((function(t){return W(e,t)}))}function Me(e,t,r){var n=t.to,o=t.loop,a=t.onRest;o&&(t.loop=!1);var i=y.d.arr(n)||y.d.fun(n)?n:void 0;i?(t.to=void 0,t.onRest=void 0):Object(y.b)(me,(function(r){var n=t[r];if(y.d.fun(n)){var o=e._events[r];o instanceof Set?t[r]=function(){return o.add(n)}:t[r]=function(e){var t=e.finished,r=e.cancelled,a=o.get(n);a?(t||(a.finished=!1),r&&(a.cancelled=!0)):o.set(n,{value:null,finished:t,cancelled:r})}}}));var s=(t.keys||Object.keys(e.springs)).map((function(r){return e.springs[r].start(t)})),c=e._state;return i?s.push(Q(++e._lastAsyncId,{props:t,state:c,actions:{pause:y.g,resume:y.g,start:function(t,r){t.onRest=a,t.cancel?function(e,t){return!y.d.und(j(e,t))}(t,"cancel")&&J(c,t.callId):r(K(i,t,c,e))}}})):t.keys||!0!==t.cancel||J(c,e._lastAsyncId),Promise.all(s).then((function(a){var i=W(e,a);if(o&&i.finished&&(!r||!i.noop)){var s=fe(t,o,n);if(s)return xe(e,[s]),Me(e,s,!0)}return i}))}function Ae(e,t){var r=Object(w.a)({},e.springs);return t&&Object(y.b)(Object(y.h)(t),(function(e){y.d.und(e.keys)&&(e=pe(e)),y.d.obj(e.to)||(e=Object(w.a)(Object(w.a)({},e),{},{to:void 0})),De(r,e,(function(e){return we(e)}))})),r}function Ie(e,t){Object(y.b)(t,(function(t,r){e.springs[r]||(e.springs[r]=t,t.addChild(e))}))}function we(e,t){var r=new ue;return r.key=e,t&&r.addChild(t),r}function De(e,t,r){t.keys&&Object(y.b)(t.keys,(function(n){(e[n]||(e[n]=r(n)))._prepareNode(t)}))}function xe(e,t){Object(y.b)(t,(function(t){De(e.springs,t,(function(t){return we(t,e)}))}))}var Te=Object(D.createContext)({}),Se=function(e){var t=e.children,r=Object(G.a)(e,["children"]),n=Object(D.useContext)(Te);r=U((function(){return Object(w.a)(Object(w.a)({},n),r)}),[n,r.pause,r.cancel,r.immediate,r.config]);var o=Te.Provider;return Object(D.createElement)(o,{value:r},t)};Se.Provider=Te.Provider,Se.Consumer=Te.Consumer;var Re=function(){return Object(D.useContext)(Te)},Ge=function(e){return{get controllers(){return e()},update:function(t){return Object(y.b)(e(),(function(e,r){e.update(N(t,r,e))})),this},start:function(t){return Object(f.a)(i.a.mark((function r(){var n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all(e().map((function(e,r){var n=N(t,r,e);return e.start(n)})));case 2:return n=r.sent,r.abrupt("return",{value:n.map((function(e){return e.value})),finished:n.every((function(e){return e.finished}))});case 4:case"end":return r.stop()}}),r)})))()},stop:function(t){return Object(y.b)(e(),(function(e){return e.stop(t)}))},pause:function(t){return Object(y.b)(e(),(function(e){return e.pause(t)}))},resume:function(t){return Object(y.b)(e(),(function(e){return e.resume(t)}))}}};var Ee="mount",Oe="enter",Pe="update",Fe="leave";function _e(e,t,r){var n=t.ref,o=t.reset,a=t.sort,i=t.trail,s=void 0===i?0:i,c=t.expires,u=void 0===c||c,l=Object(y.h)(e),h=[],d=ke(l,t),f=Object(D.useRef)(null),p=o?null:f.current;Object(g.a)((function(){f.current=h})),Object(A.b)((function(){return function(){return Object(y.b)(f.current,(function(e){e.expired&&clearTimeout(e.expirationId),e.ctrl.dispose()}))}}));var v=[];if(p&&Object(y.b)(p,(function(e,t){e.expired?clearTimeout(e.expirationId):~(t=v[t]=d.indexOf(e.key))&&(h[t]=e)})),Object(y.b)(l,(function(e,t){h[t]||(h[t]={key:d[t],item:e,phase:Ee,ctrl:new ye})})),v.length){var m=-1;Object(y.b)(v,(function(e,r){var n=p[r];~e?(m=h.indexOf(n),h[m]=Object(w.a)(Object(w.a)({},n),{},{item:l[e]})):t.leave&&h.splice(++m,0,n)}))}y.d.fun(a)&&h.sort((function(e,t){return a(e.item,t.item)}));var b=-s,M=Object(A.a)(),I=C(t),x=new Map;Object(y.b)(h,(function(e,r){var n,o,a=e.key,i=e.phase;if(i==Ee)n=t.enter,o=Oe;else{var c=d.indexOf(a)<0;if(i!=Fe)if(c)n=t.leave,o=Fe;else{if(!(n=t.update))return;o=Pe}else{if(c)return;n=t.enter,o=Oe}}if(n=V(n,e.item,r),!(n=y.d.obj(n)?B(n):{to:n}).config){var l=t.config||I.config;n.config=V(l,e.item,r)}var h=Object(w.a)(Object(w.a)({},I),{},{delay:b+=s,reset:!1},n);if(o==Oe&&y.d.und(h.from)){var v=y.d.und(t.initial)||p?t.from:t.initial;h.from=V(v,e.item,r)}var m=h.onRest;h.onRest=function(e){var t=f.current,r=t.find((function(e){return e.key===a}));if(r)if(y.d.fun(m)&&m(e,r),e.cancelled&&r.phase!=Pe)r.phase=i;else if(r.ctrl.idle){var n=t.every((function(e){return e.ctrl.idle}));if(r.phase==Fe){var o=V(u,r.item);if(!1!==o){var s=!0===o?0:o;if(r.expired=!0,!n&&s>0)return void(s<=2147483647&&(r.expirationId=setTimeout(M,s)))}}n&&t.some((function(e){return e.expired}))&&M()}};var g=Ae(e.ctrl,h);x.set(e,{phase:o,springs:g,payload:h})}));var T=Re();Object(g.a)((function(){Object(y.b)(h,(function(e){e.ctrl.start({default:T})}))}),[T]);var S=Object(D.useMemo)((function(){return Ge((function(){return f.current.map((function(e){return e.ctrl}))}))}),[]);Object(D.useImperativeHandle)(n,(function(){return S})),Object(g.a)((function(){Object(y.b)(x,(function(e,t){var r=e.phase,o=e.springs,a=e.payload;Ie(t.ctrl,o),T.cancel||(t.phase=r,r==Oe&&t.ctrl.start({default:T}),t.ctrl[n?"update":"start"](a))}))}),o?void 0:r);var R=function(e){return Object(D.createElement)(D.Fragment,null,h.map((function(t,r){var n=(x.get(t)||t.ctrl).springs,o=e(Object(w.a)({},n),t.item,t,r);return o&&o.type?Object(D.createElement)(o.type,Object(w.a)({},o.props,{key:y.d.str(t.key)||y.d.num(t.key)?t.key:t.ctrl.id,ref:o.ref})):o})))};return 3==arguments.length?[R,S.start,S.stop]:R}function ke(e,t){var r=t.key,n=t.keys,o=void 0===n?r:n;return y.d.und(o)?e:y.d.fun(o)?e.map(o):Object(y.h)(o)}var Ue=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e,o){var a;Object(v.a)(this,r),(a=t.call(this)).source=e,a.key=void 0,a.idle=!0,a.calc=void 0,a.calc=I.a.apply(void 0,Object(m.a)(o));var i=a._get(),s=y.d.arr(i)?x.a:x.d;return Object(x.h)(Object(n.a)(a),s.create(i)),a}return Object(u.a)(r,[{key:"advance",value:function(e){var t=this._get(),r=this.get();Object(y.f)(t,r)||(Object(x.f)(this).setValue(t),this._onChange(t,this.idle))}},{key:"_get",value:function(){var e=y.d.arr(this.source)?this.source.map((function(e){return e.get()})):Object(y.h)(this.source.get());return this.calc.apply(this,Object(m.a)(e))}},{key:"_reset",value:function(){Object(y.b)(Object(x.g)(this),(function(e){return e.reset()})),Object(s.a)(Object(c.a)(r.prototype),"_reset",this).call(this)}},{key:"_start",value:function(){this.idle=!1,Object(s.a)(Object(c.a)(r.prototype),"_start",this).call(this),T.skipAnimation?(this.idle=!0,this.advance()):T.frameLoop.start(this)}},{key:"_attach",value:function(){var e=this,t=!0,r=1;Object(y.b)(Object(y.h)(this.source),(function(n){te(n)&&(n.idle||(t=!1),r=Math.max(r,n.priority+1)),n.addChild(e)})),this.priority=r,t||(this._reset(),this._start())}},{key:"_detach",value:function(){var e=this;Object(y.b)(Object(y.h)(this.source),(function(t){t.removeChild(e)})),this.idle=!0}},{key:"onParentChange",value:function(e){"start"==e.type?this.advance():"change"==e.type?this.idle?this.advance():e.idle&&(this.idle=Object(y.h)(this.source).every((function(e){return!1!==e.idle})),this.idle&&(this.advance(),Object(y.b)(Object(x.g)(this),(function(e){e.done=!0})))):"priority"==e.type&&(this.priority=Object(y.h)(this.source).reduce((function(e,t){return Math.max(e,(t.priority||0)+1)}),0)),Object(s.a)(Object(c.a)(r.prototype),"onParentChange",this).call(this,e)}}]),r}(ne);M.Globals.assign({createStringInterpolator:E.a,to:function(e,t){return new Ue(e,t)}})},78:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i}));var n=Symbol.for("FluidValue:config");function o(e){var t=a(e);return t?t.get():e}function a(e){if(e)return e[n]}var i=function(){var e,t;e=this,t=this,Object.defineProperty(e,n,{value:t,configurable:!0})}}}]);
//# sourceMappingURL=1.143fbb12.chunk.js.map