(this.webpackJsonpwebglfun=this.webpackJsonpwebglfun||[]).push([[8],{329:function(e,t,n){"use strict";n.r(t);var r=n(49);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o=n(31),a=n(1),c=n(0),s=n(30),u=n(39),l=n(98),v=(n(43),n(47));function p(){var e=Object(u.g)(l.a,"images/AnimeWater/stones.jpg"),t=Object(u.g)(l.a,"images/GradientFire/rainbowcloud.jpg"),n=Object(u.g)(l.a,"images/ImageParticle/particleshape.png"),r=256,i=Object(c.useMemo)((function(){for(var e=[],t=[],n=-128;n<128;n++)for(var i=-128;i<128;i++)e.push(n),e.push(i),e.push(0),t.push((128-n)/r),t.push((i+128)/r),t.push(0);return[new Float32Array(e),new Float32Array(t)]}),[r]),v=Object(o.a)(i,2),p=v[0],f=v[1],b=new s.ShaderMaterial({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:s.DoubleSide,transparent:!0,vertexShader:"\nuniform float time;\nuniform sampler2D stoneTexture;\nuniform sampler2D particleTexture;\nattribute vec3 aCoordinates;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvarying float funct;\nvarying vec2 vCoordinate;\nfloat PI = 3.141592653589793238;\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvoid main(){\n  vUv = uv;  \n  vCoordinate = aCoordinates.xy;\n  vec2 tcoord = aCoordinates.xy;\n  tcoord -= vec2(0.5);\n  vec3 pos = position;  \n  float rnd = rand(vec2(pos.x,pos.y));  \n  //float r = 10.*rand(aCoordinates.xy);\n  //pos.z = position.z + r*sin(time);\n  float r =100.*length(tcoord); \n  funct = tan(r*.01 + time) + sin(r*0.001 + time);\n  pos.z = 10.*funct;\n  vec4 mvposition =  modelViewMatrix * vec4(pos, 1.0);\n  gl_PointSize = 1000. * (1. / -mvposition.z);\n  gl_Position = projectionMatrix * mvposition;  \n}\n",fragmentShader:"\nuniform float time;\nuniform sampler2D stoneTexture;\nuniform sampler2D imgTexture;\nuniform sampler2D particleTexture;\nuniform vec4 resolution;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvarying vec2 vCoordinate;\nvarying float funct;\nfloat PI = 3.141592653589793238;\n\nvoid main(){    \n    vec2 v_uv = vUv;    \n    vec2 v_uv_img = vCoordinate;\n    vec4 stone = texture2D(stoneTexture,v_uv_img);       \n    vec4 img2 = texture2D(imgTexture,v_uv_img);       \n    vec4 particle = texture2D(particleTexture,gl_PointCoord);\n    //float r =100.*length(tcoord); \n    //float f = tan(r*.01 + time) + sin(r*0.001 + time);\n    particle.r = smoothstep(0.1,0.4,particle.r);\n    gl_FragColor = stone;    \n    gl_FragColor.a *= particle.r; \n}\n",uniforms:{time:{value:0},stoneTexture:{type:"v4",value:e},imgTexture:{type:"v4",value:t},particleTexture:{type:"v4",value:n},resolution:{type:"v4",value:new s.Vector4}},depthTest:!1,depthWrite:!1}),m=new s.Clock;return Object(u.f)((function(){var e=m.getElapsedTime();b.uniforms.time.value=e})),Object(a.jsx)("points",{material:b,children:Object(a.jsxs)("bufferGeometry",{attach:"geometry",children:[Object(a.jsx)("bufferAttribute",{attachObject:["attributes","position"],count:p.length/3,array:p,itemSize:3}),Object(a.jsx)("bufferAttribute",{attachObject:["attributes","aCoordinates"],count:p.length/3,array:f,itemSize:3})]})})}function f(e){var t=Object(c.useRef)(),n=Object(u.h)().setDefaultCamera;return Object(c.useEffect)((function(){n(t.current)}),[n]),Object(u.f)((function(){return t.current.updateMatrixWorld()})),Object(a.jsx)("perspectiveCamera",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t},e))}t.default=function(e){return e.inspiration,Object(c.useEffect)((function(){return document.title="Image Particles",function(){document.title="WebGlfun"}}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(u.a,{gl:{antialias:!1,alpha:!1},onCreated:function(e){return e.gl.setClearColor("black")},children:[Object(a.jsx)(f,{position:[0,0,-300],near:.001,far:1e4}),Object(a.jsx)("ambientLight",{}),Object(a.jsx)("pointLight",{position:[150,150,150],intensity:.55}),Object(a.jsx)(c.Suspense,{fallback:Object(a.jsx)("group",{}),children:Object(a.jsx)(p,{})}),Object(a.jsx)(v.a,{})]})})}},43:function(e,t,n){}}]);
//# sourceMappingURL=8.61c0808b.chunk.js.map